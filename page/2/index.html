<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta property="og:type" content="website">
<meta property="og:title" content="Code">
<meta property="og:url" content="http://utilcoder.com/page/2/index.html">
<meta property="og:site_name" content="Code">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Code">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://utilcoder.com/page/2/"/>





  <title>Code</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Code</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://utilcoder.com/系统分析与设计/系统分析与设计/HW9/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="CoderUtil">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Code">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/系统分析与设计/系统分析与设计/HW9/" itemprop="url">HW9</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-16T09:37:24+08:00">
                2019-05-16
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/系统分析与设计/" itemprop="url" rel="index">
                    <span itemprop="name">系统分析与设计</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ol>
<li>使用类图，分别对 Asg_RH 文档中 Make Reservation 用例以及 Payment 用例开展领域建模。然后，根据上述模型，给出建议的数据表以及主要字段，特别是主键和外键</li>
</ol>
<ul>
<li>注意事项：<ul>
<li>对象必须是名词、特别是技术名词、报表、描述类的处理；</li>
<li>关联必须有多重性、部分有名称与导航方向；</li>
<li>属性要注意计算字段；</li>
</ul>
</li>
<li>数据建模，为了简化描述仅需要给出表清单，例如：<ul>
<li>Hotel（ID/Key，Name，LoctionID/Fkey，Address…..）；</li>
</ul>
</li>
</ul>
<p>领域模型的关系</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">*(不包含0)</span><br><span class="line">0...1</span><br><span class="line">0...n</span><br></pre></td></tr></table></figure>
<h4 id="Make-Reservation"><a href="#Make-Reservation" class="headerlink" title="Make Reservation"></a>Make Reservation</h4><ul>
<li>领域建模</li>
</ul>
<p><img src="../../images\20190507005030340.png" alt="20190507005030340"></p>
<ul>
<li>数据表</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line">Traveller (</span><br><span class="line">	TravellerID/Key, </span><br><span class="line">	name, </span><br><span class="line">	email</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">Reservation (</span><br><span class="line">	ReservationID/Key, </span><br><span class="line">	TravellerID/FKey, </span><br><span class="line">	HotelID/FKey, </span><br><span class="line">	checkInDate, </span><br><span class="line">	numberofNights</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">ReservationItem (</span><br><span class="line">	ReservationItemID/Key, </span><br><span class="line">	ReservationID/FKey, </span><br><span class="line">	RoomID/Fkey, </span><br><span class="line">	type, </span><br><span class="line">	checkInDate, </span><br><span class="line">	checkOutDate, </span><br><span class="line">	numberOfNights, </span><br><span class="line">	numberOfAdults, </span><br><span class="line">	numberOfChildren, </span><br><span class="line">	ageOfChildren</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">Hotel (</span><br><span class="line">	HotelID/Key, </span><br><span class="line">	LoctionID/Fkey, </span><br><span class="line">	name, </span><br><span class="line">	address, </span><br><span class="line">	star, </span><br><span class="line">	address, </span><br><span class="line">	loc-code, </span><br><span class="line">	brief-intro, </span><br><span class="line">	isFavourite, </span><br><span class="line">	isLowPrice, </span><br><span class="line">	rating, </span><br><span class="line">	isMaxDiscountOff</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">Location(</span><br><span class="line">	LocationID/Key, </span><br><span class="line">	HotelID/Fkey</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">Room (</span><br><span class="line">	RoomID/Key, </span><br><span class="line">	HotelID/FKey, </span><br><span class="line">	type, </span><br><span class="line">	date, </span><br><span class="line">	isAvailiable, </span><br><span class="line">	isReserved, </span><br><span class="line">	price, </span><br><span class="line">	reservedNumber, </span><br><span class="line">	totalNumber</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">RoomDescription(</span><br><span class="line">	RoomID/FKey, </span><br><span class="line">	type, </span><br><span class="line">	total, </span><br><span class="line">	list-price, </span><br><span class="line">	description</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">RoomCatalog(</span><br><span class="line">	RoomID/FKey, </span><br><span class="line">	type</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h4 id="Payment"><a href="#Payment" class="headerlink" title="Payment"></a>Payment</h4><ul>
<li>领域建模</li>
</ul>
<p><img src="../../images\20190507010558258.png" alt="20190507010558258"></p>
<ul>
<li>数据表</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">Payment(</span><br><span class="line">	ID/key, </span><br><span class="line">	totalPrice, </span><br><span class="line">	reservationID/Fkey, </span><br><span class="line">	cardID/Fkey</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">ReservationItem(</span><br><span class="line">	ID/key, </span><br><span class="line">	RoomID/Fkey, </span><br><span class="line">	BasketID/Fkey, </span><br><span class="line">	checkInDate, </span><br><span class="line">	checkOutDate, </span><br><span class="line">	NumberOfAdults, </span><br><span class="line">	NumberOfChildren, </span><br><span class="line">	Price</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">CreditCard(</span><br><span class="line">	ID/key, </span><br><span class="line">	Type, </span><br><span class="line">	CardSecurityCode, </span><br><span class="line">	ExpiryDate, </span><br><span class="line">	CardHolderID/Fkey</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">CardHolder(</span><br><span class="line">	ID/key, </span><br><span class="line">	Title, </span><br><span class="line">	FirstName, </span><br><span class="line">	LastName, </span><br><span class="line">	Address1, </span><br><span class="line">	Address2, </span><br><span class="line">	City, </span><br><span class="line">	CountyOrState, </span><br><span class="line">	Country, </span><br><span class="line">	Postcode, </span><br><span class="line">	DaytimeTelephone, </span><br><span class="line">	EveningTelephone</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>2、使用 UML State Model，对每个订单对象生命周期建模：</p>
<ul>
<li>建模对象： 参考 Asg_RH 文档， 对 Reservation/Order 对象建模；</li>
<li>建模要求： 参考练习不能提供足够信息帮助你对订单对象建模，请参考现在 定旅馆 的旅游网站，尽可能分析围绕订单发生的各种情况，直到订单通过销售事件（柜台销售）结束订单。</li>
</ul>
<p><img src="../../images\TIM截图20190516100454.png" alt="TIM截图20190516100454"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://utilcoder.com/系统分析与设计/系统分析与设计/HW7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="CoderUtil">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Code">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/系统分析与设计/系统分析与设计/HW7/" itemprop="url">HW7</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-16T09:01:59+08:00">
                2019-05-16
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/系统分析与设计/" itemprop="url" rel="index">
                    <span itemprop="name">系统分析与设计</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="1-根据订旅馆建模文档，Asg-RH-pdf："><a href="#1-根据订旅馆建模文档，Asg-RH-pdf：" class="headerlink" title="1. 根据订旅馆建模文档，Asg-RH.pdf："></a>1. 根据订旅馆建模文档，<a href="https://sysu-swsad.github.io/swad-guide/material/Asg_RH.pdf" target="_blank" rel="noopener">Asg-RH.pdf</a>：</h2><h3 id="1-1-绘制用例图模型-到子用例"><a href="#1-1-绘制用例图模型-到子用例" class="headerlink" title="1.1 绘制用例图模型(到子用例)"></a>1.1 绘制用例图模型(到子用例)</h3><p><img src="../../images\TIM截图20190516091455.png" alt="TIM截图20190516091455"></p>
<h3 id="1-2-给出-make-reservation-用例的活动图："><a href="#1-2-给出-make-reservation-用例的活动图：" class="headerlink" title="1.2 给出 make reservation 用例的活动图："></a>1.2 给出 make reservation 用例的活动图：</h3><p><img src="../../images\TIM截图20190516092209.png" alt="TIM截图20190516092209"></p>
<h2 id="2-根据课程练习“投递员使用投递箱给收件人快递包裹”的业务场景"><a href="#2-根据课程练习“投递员使用投递箱给收件人快递包裹”的业务场景" class="headerlink" title="2. 根据课程练习“投递员使用投递箱给收件人快递包裹”的业务场景"></a>2. 根据课程练习“投递员使用投递箱给收件人快递包裹”的业务场景</h2><h3 id="2-1-分别用多泳道图建模三个场景的业务过程"><a href="#2-1-分别用多泳道图建模三个场景的业务过程" class="headerlink" title="2.1 分别用多泳道图建模三个场景的业务过程"></a>2.1 分别用多泳道图建模三个场景的业务过程</h3><ul>
<li>x科技公司发明了投递柜，它们自建了投递柜以及远程控制系统。注册的投递员在推广期免费使用投递柜。由于缺乏资源，仅能使用y移动平台向客户发送短信通知：</li>
</ul>
<p><img src="../../images\TIM截图20190516092916.png" alt="TIM截图20190516092916"></p>
<ul>
<li>随着产品推广，x公司与各大快递z公司达成协议。x公司在快递柜上添加了二维码扫描装置，z公司的快递员不仅可在快递柜上登陆（由z公司提供认证服务），且可扫描快递单号，投递入柜后自动由z公司发短信给客户。客户取件后，自动发送给z公司投递完成：</li>
</ul>
<p><img src="../../images\TIM截图20190516092959.png" alt="TIM截图20190516092959"></p>
<ul>
<li>x公司进一步优化服务，开发了微信小程序实现扫码取快递。如果用户关注了该公司公众号，直接通过过公众号推送给用户取件码等信息。不再发送短信：</li>
</ul>
<p><img src="../../images\TIM截图20190516093210.png" alt="TIM截图20190516093210"></p>
<h3 id="2-2-根据上述流程，给出快递柜系统最终的用例图模型："><a href="#2-2-根据上述流程，给出快递柜系统最终的用例图模型：" class="headerlink" title="2.2 根据上述流程，给出快递柜系统最终的用例图模型："></a>2.2 根据上述流程，给出快递柜系统最终的用例图模型：</h3><ul>
<li>用正常色彩表示第一个业务流程反映的用例；</li>
<li>用绿色背景表述第二个业务场景添加或修改的用例，以及支持 Actor；</li>
<li>用黄色背景表述第三个业务场景添加或修改的用例，以及支持 Actor；</li>
</ul>
<p><img src="../../images\TIM截图20190516093449.png" alt="TIM截图20190516093449"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://utilcoder.com/系统分析与设计/系统分析与设计/HW6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="CoderUtil">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Code">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/系统分析与设计/系统分析与设计/HW6/" itemprop="url">HW6</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-15T14:37:56+08:00">
                2019-05-15
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/系统分析与设计/" itemprop="url" rel="index">
                    <span itemprop="name">系统分析与设计</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="1-简答题"><a href="#1-简答题" class="headerlink" title="1. 简答题"></a>1. 简答题</h1><h2 id="1-1-用例的概念"><a href="#1-1-用例的概念" class="headerlink" title="1.1 用例的概念"></a>1.1 用例的概念</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">用例是软件工程或系统工程中对系统反应外界请求的描述，它包含一组相关的成功和失败场景集合，用以说明系统是如何和最终用户或其它系统互动</span><br><span class="line"></span><br><span class="line">需要注意: </span><br><span class="line">	1. 用例不是图形，而是文本；</span><br><span class="line">	2. 用例建模主要是编写文本，而不是绘制图表；</span><br><span class="line">	3. 关于用例没有任何面向对象的东西；</span><br><span class="line">	4. 用例是经典OOA/D的关键需求输入；</span><br></pre></td></tr></table></figure>
<h2 id="1-2-用例和场景的关系？什么是主场景或-happy-path？"><a href="#1-2-用例和场景的关系？什么是主场景或-happy-path？" class="headerlink" title="1.2 用例和场景的关系？什么是主场景或 happy path？"></a>1.2 用例和场景的关系？什么是主场景或 happy path？</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">场景是参与者和系统之间的一系列特定的活动和交互，也称为用例实例; 用例是一组场景（主场景加上零个或多个可选场景）的集合；</span><br><span class="line"></span><br><span class="line">主场景（或Happy Path）也被称为“理想路径”场景，是指系统的主要交互场景，能够直接实现用户的目标。</span><br></pre></td></tr></table></figure>
<h2 id="1-3-用例有哪些形式？"><a href="#1-3-用例有哪些形式？" class="headerlink" title="1.3 用例有哪些形式？"></a>1.3 用例有哪些形式？</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">用例有三种常用形式：</span><br><span class="line"></span><br><span class="line">	1. Brief：简洁的总结，通常用于主成功场景；在早期的需求分析中，能够快速了解主题和范围</span><br><span class="line"></span><br><span class="line">	2. Casual：非正式的段落格式，涵盖各种场景的多个段落；主要应用于早期的需求分析；</span><br><span class="line"></span><br><span class="line">	3. Fully：详细编写所有步骤及各种变化，同时具有补充部分，如前置条件和成功保证；在以一种简短的格式确定并编写了许多用例之后，会详细地编写一些具有体系结构重要性和高价值的用例。</span><br></pre></td></tr></table></figure>
<h2 id="1-4-对于复杂业务，为什么编制完整用例非常难？"><a href="#1-4-对于复杂业务，为什么编制完整用例非常难？" class="headerlink" title="1.4 对于复杂业务，为什么编制完整用例非常难？"></a>1.4 对于复杂业务，为什么编制完整用例非常难？</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">对于复杂业务，涉及的场景数量会很多, 各个场景之间的关联使得用例设计变得特别困难，很难将所有的目标、故事、使用场景遵循一定的顺序列举出来，较难实现用户与服务之间的完整与协调，用例的完整性难以保障。</span><br></pre></td></tr></table></figure>
<h2 id="1-5-什么是用例图？"><a href="#1-5-什么是用例图？" class="headerlink" title="1.5 什么是用例图？"></a>1.5 什么是用例图？</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1. 用例图是一种优秀的系统语境图，用以描述用例名称和参与者之间的连接关系, 说明的是谁要使用系统，以及他们使用该系统可以做些什么</span><br><span class="line"></span><br><span class="line">2. 用例图能够展示系统边界、位于边界之外的事物以及系统如何被使用</span><br><span class="line"></span><br><span class="line">3. 用例图可以作为沟通的工具，用以概括系统及其参与者的行为。</span><br></pre></td></tr></table></figure>
<h2 id="1-6-用例图的基本符号与元素？用例图的基本符号与元素？"><a href="#1-6-用例图的基本符号与元素？用例图的基本符号与元素？" class="headerlink" title="1.6 用例图的基本符号与元素？用例图的基本符号与元素？"></a>1.6 用例图的基本符号与元素？用例图的基本符号与元素？</h2><ul>
<li>系统：使用包含用例的矩形绘制系统的边界，将参与者置于系统边界之外：</li>
</ul>
<p><img src="../../images\system-symbol.jpg" alt="system-symbol"></p>
<ul>
<li>用例：使用椭圆绘制用例，用表示系统功能的动词标记椭圆：</li>
</ul>
<p><img src="../../images\use-case-symbol.jpg" alt="use-case-symbol"></p>
<ul>
<li>参与者：参与者是系统的用户，当一个系统是另一个系统的参与者时，用参与者原型标记参与者系统：</li>
</ul>
<p><img src="../../images\actor-symbol.jpg" alt="actor-symbol"></p>
<ul>
<li>关系：用简单的一行说明一个参与者和一个用例之间的关系；对于用例之间的关系，使用标记为<code>include</code>或<code>extend</code>的箭头<ul>
<li><code>include</code>: 表示<strong>主要</strong>的功能</li>
<li><code>extend</code>: 表示一个功能是可选的</li>
</ul>
</li>
</ul>
<p><img src="../../images\relationships-symbol.jpg" alt="relationships-symbol"></p>
<h2 id="1-7-用例图的画法与步骤："><a href="#1-7-用例图的画法与步骤：" class="headerlink" title="1.7 用例图的画法与步骤："></a>1.7 用例图的画法与步骤：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">1. 确定系统边界</span><br><span class="line"></span><br><span class="line">2. 确定参与者: </span><br><span class="line">	a. 确定谁将使用该系统的主要功能；</span><br><span class="line">	b. 谁将需要该系统的支持；</span><br><span class="line">	c. 谁将需要维护、管理该系统，以及保持该系统处于工作状态；</span><br><span class="line">	d. 系统需要处理哪些硬件设备；</span><br><span class="line">	e. 与该系统交互的是什么系统；</span><br><span class="line">	f. 谁或者什么系统对本系统产生的结果感兴趣；</span><br><span class="line"></span><br><span class="line">3. 识别用例: </span><br><span class="line">	a. 从分析系统的参与者开始，考虑每一个参与者是如何使用系统的</span><br><span class="line">	b. 考虑特定参与者希望系统提供什么功能；</span><br><span class="line">	c. 考虑系统是否存储和检索信息，如果是，有哪个参与者触发；</span><br><span class="line">	d. 当系统改变状态时，是否通知参与者；</span><br><span class="line">	e. 是否存在影响系统的外部事件；</span><br><span class="line">	f. 哪个参与者通知系统这些事件；</span><br><span class="line"></span><br><span class="line">4. 确定用例间的关系:</span><br><span class="line">	a. 关联关系：使用实线将参与者与相应的用例相连</span><br><span class="line">	b. 包含关系：客户用例和提供者用例之间用include箭头相连</span><br><span class="line">	c. 扩展关系：基础用例和扩展用例之间用extends箭头相连</span><br><span class="line">	d. 泛化关系：子用例与父用例之间用泛化箭头相连</span><br><span class="line"></span><br><span class="line">5. 确定关联的外部支持系统；</span><br></pre></td></tr></table></figure>
<h2 id="1-8-用例图给利益相关人与开发者的价值有哪些？"><a href="#1-8-用例图给利益相关人与开发者的价值有哪些？" class="headerlink" title="1.8 用例图给利益相关人与开发者的价值有哪些？"></a>1.8 用例图给利益相关人与开发者的价值有哪些？</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">利益相关人：可以直观看到系统的结果和用户的功能体验，保证系统按照用户的需求进行设计；用例能够根据需要对复杂程度和形式化程序进行增减调节，即能够响应用户（利益相关人)提出的需求，而用例图则使得这种调节更加便利，可以通过修改图形间的关系实现。</span><br><span class="line"></span><br><span class="line">开发者：用例图是设计者设计过程的结论与参考，设计者与开发者之间的交流工具，开发者开发过程的蓝图；用例图使得开发者能够更明确地获得需求，更好地理解需求；用例图可以指导开发和测试，同时可以在整个过程中对其他工作流起到指导作用。</span><br></pre></td></tr></table></figure>
<h1 id="2-建模练习题"><a href="#2-建模练习题" class="headerlink" title="2. 建模练习题"></a>2. 建模练习题</h1><h2 id="2-1-选择2-3个你熟悉的类似业务的在线服务系统，分别绘制它们用例图-并满足以下要求："><a href="#2-1-选择2-3个你熟悉的类似业务的在线服务系统，分别绘制它们用例图-并满足以下要求：" class="headerlink" title="2.1 选择2-3个你熟悉的类似业务的在线服务系统，分别绘制它们用例图, 并满足以下要求："></a>2.1 选择2-3个你熟悉的类似业务的在线服务系统，分别绘制它们用例图, 并满足以下要求：</h2><ul>
<li>请使用用户的视角，描述用户目标或系统提供的服务；</li>
<li>粒度达到子用例级别，并用 include 和 exclude 关联它们；</li>
<li>请用色彩标注出你认为创新（区别于竞争对手的）用例或子用例；</li>
<li>尽可能识别外部系统和服务</li>
</ul>
<ol>
<li>订电影票</li>
</ol>
<p><img src="../../images\ticket.jpg" alt="ticket"></p>
<ol>
<li>订酒店</li>
</ol>
<p><img src="../../images\hotel.jpg" alt="hotel"></p>
<h2 id="2-2-回答下列问题："><a href="#2-2-回答下列问题：" class="headerlink" title="2.2 回答下列问题："></a>2.2 回答下列问题：</h2><h3 id="2-2-1-为什么相似系统的用例图是相似的？"><a href="#2-2-1-为什么相似系统的用例图是相似的？" class="headerlink" title="2.2.1 为什么相似系统的用例图是相似的？"></a>2.2.1 为什么相似系统的用例图是相似的？</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">相似系统面向的参与者是相似的，在相似的最终目标下，系统的参与者、用例、边界以及它们之间的关系构成也是相似的, 所以最终画出来的用例图也就是相似的</span><br></pre></td></tr></table></figure>
<h3 id="2-2-2-如果是定旅馆业务，请对比-Asg-RH-用例图，简述如何利用不同时代、不同地区产品的用例图，展现、突出创新业务和技术；"><a href="#2-2-2-如果是定旅馆业务，请对比-Asg-RH-用例图，简述如何利用不同时代、不同地区产品的用例图，展现、突出创新业务和技术；" class="headerlink" title="2.2.2 如果是定旅馆业务，请对比 Asg_RH 用例图，简述如何利用不同时代、不同地区产品的用例图，展现、突出创新业务和技术；"></a>2.2.2 如果是定旅馆业务，请对比 Asg_RH 用例图，简述如何利用不同时代、不同地区产品的用例图，展现、突出创新业务和技术；</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Asg_RH用例图提供了最基本的服务，而现今的订旅馆业务则更综合与人性化，可以综合周边环境、旅馆类别、距离、价格、交通等因素推荐更适宜于用户的旅馆。</span><br></pre></td></tr></table></figure>
<h3 id="2-2-3-如何利用用例图定位创新思路（业务创新、或技术创新、或商业模式创新）在系统中的作用；"><a href="#2-2-3-如何利用用例图定位创新思路（业务创新、或技术创新、或商业模式创新）在系统中的作用；" class="headerlink" title="2.2.3 如何利用用例图定位创新思路（业务创新、或技术创新、或商业模式创新）在系统中的作用；"></a>2.2.3 如何利用用例图定位创新思路（业务创新、或技术创新、或商业模式创新）在系统中的作用；</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1. 在用例图中使用颜色对创新思路进行高亮标记；</span><br><span class="line">2. 判断创新思路在用例图中的位置；</span><br></pre></td></tr></table></figure>
<h3 id="2-2-4-请使用-SCRUM-方法，选择一个用例图，编制某定旅馆开发的需求（backlog）开发计划表；"><a href="#2-2-4-请使用-SCRUM-方法，选择一个用例图，编制某定旅馆开发的需求（backlog）开发计划表；" class="headerlink" title="2.2.4 请使用 SCRUM 方法，选择一个用例图，编制某定旅馆开发的需求（backlog）开发计划表；"></a>2.2.4 请使用 SCRUM 方法，选择一个用例图，编制某定旅馆开发的需求（backlog）开发计划表；</h3><table>
<thead>
<tr>
<th style="text-align:center">ID</th>
<th style="text-align:center">Name</th>
<th style="text-align:center">Imp</th>
<th style="text-align:center">Est</th>
<th style="text-align:center">How to demo</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">注册</td>
<td style="text-align:center">5</td>
<td style="text-align:center">3</td>
<td style="text-align:center">点击注册按钮，输入手机号，获取验证码，输入密码</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center">登陆</td>
<td style="text-align:center">5</td>
<td style="text-align:center">3</td>
<td style="text-align:center">点击登陆，输入手机号，选择密码登陆或短信验证登陆，填写密码或获取验证码并正确填写验证码</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td style="text-align:center">查询酒店</td>
<td style="text-align:center">15</td>
<td style="text-align:center">10</td>
<td style="text-align:center">通过位置，种类价格，档次等属性筛选或排序酒店，或直接通过酒店名查找酒店</td>
</tr>
<tr>
<td style="text-align:center">4</td>
<td style="text-align:center">预订酒店</td>
<td style="text-align:center">20</td>
<td style="text-align:center">16</td>
<td style="text-align:center">选择酒店后，选择房间类型，根据条件筛选房间，确定入住日期，预付定金</td>
</tr>
<tr>
<td style="text-align:center">5</td>
<td style="text-align:center">取消预订</td>
<td style="text-align:center">10</td>
<td style="text-align:center">6</td>
<td style="text-align:center">选择订单，点击退订，返回定金</td>
</tr>
<tr>
<td style="text-align:center">6</td>
<td style="text-align:center">酒店评价</td>
<td style="text-align:center">10</td>
<td style="text-align:center">8</td>
<td style="text-align:center">交易完成后，可选择对酒店进行评论及评分</td>
</tr>
</tbody>
</table>
<h3 id="2-2-5-根据任务4，参考-使用用例点估算软件成本，给出项目用例点的估算；"><a href="#2-2-5-根据任务4，参考-使用用例点估算软件成本，给出项目用例点的估算；" class="headerlink" title="2.2.5 根据任务4，参考 使用用例点估算软件成本，给出项目用例点的估算；"></a>2.2.5 根据任务4，参考 使用用例点估算软件成本，给出项目用例点的估算；</h3><table>
<thead>
<tr>
<th style="text-align:center">用例</th>
<th style="text-align:center"># 业务</th>
<th style="text-align:center"># 计算</th>
<th style="text-align:center">原因</th>
<th style="text-align:center">UC比重</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">注册</td>
<td style="text-align:center">4</td>
<td style="text-align:center">2</td>
<td style="text-align:center">简单</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center">登陆</td>
<td style="text-align:center">3</td>
<td style="text-align:center">2</td>
<td style="text-align:center">简单</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td style="text-align:center">查询酒店</td>
<td style="text-align:center">7</td>
<td style="text-align:center">7</td>
<td style="text-align:center">一般</td>
</tr>
<tr>
<td style="text-align:center">4</td>
<td style="text-align:center">预订酒店</td>
<td style="text-align:center">4</td>
<td style="text-align:center">4</td>
<td style="text-align:center">一般</td>
</tr>
<tr>
<td style="text-align:center">5</td>
<td style="text-align:center">取消预订</td>
<td style="text-align:center">3</td>
<td style="text-align:center">2</td>
<td style="text-align:center">简单</td>
</tr>
<tr>
<td style="text-align:center">6</td>
<td style="text-align:center">酒店评价</td>
<td style="text-align:center">3</td>
<td style="text-align:center">2</td>
<td style="text-align:center">简单</td>
</tr>
</tbody>
</table>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://utilcoder.com/计算机图形学/计算机图形学/学习(六)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="CoderUtil">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Code">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/计算机图形学/计算机图形学/学习(六)/" itemprop="url">学习六</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-12T16:21:21+08:00">
                2019-05-12
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/计算机图形学/" itemprop="url" rel="index">
                    <span itemprop="name">计算机图形学</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="阴影映射shadow-mapping"><a href="#阴影映射shadow-mapping" class="headerlink" title="阴影映射shadow mapping"></a>阴影映射shadow mapping</h1><p>实现阴影的一种技术. </p>
<h2 id="实现思想"><a href="#实现思想" class="headerlink" title="实现思想"></a>实现思想</h2><p>如果我们绘制一条从光源出发的光线, 将光线第一次击中物体的点和光线上其他点进行对比, 看看其他点是否比该点更远, 如果是的话，这个点就在阴影中. </p>
<p><img src="../../images\TIM截图20190512163046.png" alt="TIM截图20190512163046"></p>
<p>阴影渲染两大基本步骤：<br>    1)以光源视角渲染场景，得到深度图DepthMap, 并存储为texture</p>
<p>​    2)以camera视角渲染场景，使用Shadowing Mapping算法(比较当前深度值与在DepthMap Texture的深度 值)，决定某个点是否在阴影下</p>
<p><img src="../../images\TIM截图20190512163841.png" alt="TIM截图20190512163841"></p>
<p>1) 左图中, 我们以光源为观察者, 通过投影矩阵来渲染场景并创建一个深度贴图。这个投影和视图矩阵结合在一起成为一个T变换，它可以将任何三维位置转变到光源的可见坐标空间</p>
<p>2) 在右图中,  渲染点P¯处的片元，需要决定它是否在阴影中。我们先得使用T把P¯变换到光源的坐标空间里. 它的z坐标就对应于它的深度，例子中这个值是0.9。使用点P¯在光源的坐标空间的坐标，我们可以索引深度贴图，来获得从光的视角中最近的可见深度，结果是点C¯，最近的深度是0.4。因为索引深度贴图的结果是一个小于点P¯的深度，我们可以断定P¯被挡住了，它在阴影中了。</p>
<h2 id="生成深度贴图"><a href="#生成深度贴图" class="headerlink" title="生成深度贴图"></a>生成深度贴图</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">//	1. 创建一个帧缓冲对象</span><br><span class="line">GLuint depthMapFBO;</span><br><span class="line">glGenFramebuffers(1, &amp;depthMapFBO);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//	2. 创建一个2D纹理, 提供给帧缓冲的深度缓冲使用</span><br><span class="line">const GLuint SHADOW_WIDTH = 1024, SHADOW_HEIGHT = 1024;</span><br><span class="line"></span><br><span class="line">GLuint depthMap;</span><br><span class="line">glGenTextures(1, &amp;depthMap);</span><br><span class="line">glBindTexture(GL_TEXTURE_2D, depthMap);</span><br><span class="line">glTexImage2D(GL_TEXTURE_2D, 0, GL_DEPTH_COMPONENT, </span><br><span class="line">             SHADOW_WIDTH, SHADOW_HEIGHT, 0, GL_DEPTH_COMPONENT, GL_FLOAT, NULL);	//	把纹理格式指定为GL_DEPTH_COMPONENT, 把纹理的高宽设置为1024</span><br><span class="line">glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);</span><br><span class="line">glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);</span><br><span class="line">glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT); </span><br><span class="line">glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//	3. 把生成的深度纹理作为帧缓冲的深度缓冲</span><br><span class="line">glBindFramebuffer(GL_FRAMEBUFFER, depthMapFBO);</span><br><span class="line">glFramebufferTexture2D(GL_FRAMEBUFFER, GL_DEPTH_ATTACHMENT, GL_TEXTURE_2D, depthMap, 0);</span><br><span class="line">glDrawBuffer(GL_NONE);	//	我们只需要深度信息，颜色缓冲没有用, 通过将调用glDrawBuffer和glReadBuffer把读和绘制缓冲设置为GL_NONE来告诉OpenGL我们不适用任何颜色数据进行渲染</span><br><span class="line">glReadBuffer(GL_NONE);</span><br><span class="line">glBindFramebuffer(GL_FRAMEBUFFER, 0);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 4. 渲染深度贴图</span><br><span class="line">glViewport(0, 0, SHADOW_WIDTH, SHADOW_HEIGHT);</span><br><span class="line">glBindFramebuffer(GL_FRAMEBUFFER, depthMapFBO);</span><br><span class="line">    glClear(GL_DEPTH_BUFFER_BIT);</span><br><span class="line">    ConfigureShaderAndMatrices();</span><br><span class="line">    RenderScene();</span><br><span class="line">glBindFramebuffer(GL_FRAMEBUFFER, 0);</span><br><span class="line"></span><br><span class="line">// 5. 使用深度贴图渲染场景</span><br><span class="line">glViewport(0, 0, SCR_WIDTH, SCR_HEIGHT);</span><br><span class="line">glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);</span><br><span class="line">ConfigureShaderAndMatrices();</span><br><span class="line">glBindTexture(GL_TEXTURE_2D, depthMap);</span><br><span class="line">RenderScene();</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://utilcoder.com/A-Frame/A-Frame/A-Frame学习/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="CoderUtil">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Code">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/A-Frame/A-Frame/A-Frame学习/" itemprop="url">A-Frame学习</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-08T22:49:58+08:00">
                2019-05-08
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/A-Frame/" itemprop="url" rel="index">
                    <span itemprop="name">A-Frame</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="引入CDN文件"><a href="#引入CDN文件" class="headerlink" title="引入CDN文件"></a>引入CDN文件</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- Production Version, Minified --&gt;</span><br><span class="line">&lt;script src=&quot;https://aframe.io/releases/0.5.0/aframe.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;!-- Development Version, Uncompressed with Source Maps --&gt;</span><br><span class="line">&lt;script src=&quot;https://aframe.io/releases/0.5.0/aframe.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h1 id="初始化场景"><a href="#初始化场景" class="headerlink" title="初始化场景"></a>初始化场景</h1><pre><code>右手系, z轴指向屏幕外
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;a-scene&gt;</span><br><span class="line">    &lt;a-box position=&quot;-1 0.5 -3&quot; rotation=&quot;0 45 0&quot; color=&quot;#4CC3D9&quot;&gt;&lt;/a-box&gt;  # 添加几何模型, 包括box, cylinder, sphere</span><br><span class="line"></span><br><span class="line">    &lt;a-assets&gt;                          # 预加载资源   </span><br><span class="line">        &lt;img id=&quot;texture&quot; src=&quot;images/3video.jpg&quot; alt=&quot;&quot;&gt;</span><br><span class="line">    &lt;/a-assets&gt;</span><br><span class="line">    &lt;a-box src=&quot;#texture&quot; color=&quot;#B76705&quot; depth=&quot;2&quot;height=&quot;2&quot; width=&quot;4&quot; position=&quot;0 0 -1.25&quot;&gt;&lt;/a-box&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &lt;a-sky color=&quot;#DDDDDD&quot;&gt;&lt;/a-sky&gt;     # 添加天空盒(背景), 每个场景都需要一个背景</span><br><span class="line"></span><br><span class="line">    &lt;a-camera                           # 存在缺省相机, 更改默认相机属性</span><br><span class="line">        position=&quot;0 1 14&quot;</span><br><span class="line">        cursor-visible=&quot;true&quot;</span><br><span class="line">        cursor-scale=&quot;2&quot;</span><br><span class="line">        cursor-color=&quot;#0095DD&quot;</span><br><span class="line">        cursor-opacity=&quot;0.5&quot;&gt;</span><br><span class="line">    &lt;/a-camera&gt;</span><br><span class="line"></span><br><span class="line">    &lt;a-light                            # 存在缺省光源, 添加平行光和环境光</span><br><span class="line">        type=&quot;directional&quot;</span><br><span class="line">        color=&quot;#FFF&quot;</span><br><span class="line">        intensity=&quot;0.5&quot;</span><br><span class="line">        position=&quot;-1 1 2&quot;&gt;</span><br><span class="line">    &lt;/a-light&gt;</span><br><span class="line">    &lt;a-light</span><br><span class="line">        type=&quot;ambient&quot;</span><br><span class="line">        color=&quot;#FFF&quot;&gt;</span><br><span class="line">    &lt;/a-light&gt;</span><br><span class="line">&lt;/a-scene&gt;</span><br></pre></td></tr></table></figure>
<h1 id="自定义组件"><a href="#自定义组件" class="headerlink" title="自定义组件"></a>自定义组件</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 随机颜色的盒子 --&gt;</span><br><span class="line">&lt;a-entity geometry=&quot;primitive: box; depth: 0.5; height: 0.5; width 0.5&quot;</span><br><span class="line">          material=&quot;shader: standard&quot;</span><br><span class="line">          position=&quot;0 0.5 -2&quot;</span><br><span class="line">          random-color&gt;&lt;/a-entity&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  AFRAME.registerComponent(&apos;random-color&apos;, &#123;</span><br><span class="line">      dependencies: [&apos;material&apos;],</span><br><span class="line"></span><br><span class="line">      init: function () &#123;</span><br><span class="line">          // 将材质组件的颜色属性设置为随机颜色</span><br><span class="line">          this.el.setAttribute(&apos;material&apos;, &apos;color&apos;, getRandomColor());</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  function getRandomColor() &#123;</span><br><span class="line">      const letters = &apos;0123456789ABCDEF&apos;;</span><br><span class="line">      var color = &apos;#&apos;;</span><br><span class="line">      for (var i = 0; i &lt; 6; i++ ) &#123;</span><br><span class="line">          color += letters[Math.floor(Math.random() * 16)];</span><br><span class="line">      &#125;</span><br><span class="line">      return color;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h1 id="查询场景、组件querySelector"><a href="#查询场景、组件querySelector" class="headerlink" title="查询场景、组件querySelector"></a>查询场景、组件querySelector</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">window.onload=function()&#123;</span><br><span class="line">    var scene = document.querySelector(&apos;a-scene&apos;);</span><br><span class="line">    var box = scene.querySelector(&apos;a-box&apos;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="获取、修改属性"><a href="#获取、修改属性" class="headerlink" title="获取、修改属性"></a>获取、修改属性</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">window.onload=function()&#123;</span><br><span class="line">    var scene = document.querySelector(&apos;a-scene&apos;);</span><br><span class="line">    var box = scene.querySelector(&apos;a-box&apos;);</span><br><span class="line">    </span><br><span class="line">    // 获取属性</span><br><span class="line">    console.log(box.getAttribute(&apos;position&apos;));   </span><br><span class="line"></span><br><span class="line">    //  修改属性</span><br><span class="line">    box.setAttribute(&apos;color&apos;, &apos;red&apos;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="监听事件"><a href="#监听事件" class="headerlink" title="监听事件"></a>监听事件</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">window.onload=function()&#123;</span><br><span class="line">    var scene = document.querySelector(&apos;a-scene&apos;);</span><br><span class="line">    var box = scene.querySelector(&apos;a-box&apos;);</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    box.addEventListener(&apos;click&apos;, function () &#123;</span><br><span class="line">        box.setAttribute(&apos;color&apos;, &apos;red&apos;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://utilcoder.com/数据挖掘/数据挖掘/(一) Python回顾/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="CoderUtil">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Code">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/数据挖掘/数据挖掘/(一) Python回顾/" itemprop="url">(一) Python回顾</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-07T20:10:57+08:00">
                2019-05-07
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/数据挖掘/" itemprop="url" rel="index">
                    <span itemprop="name">数据挖掘</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="格式化输出"><a href="#格式化输出" class="headerlink" title="格式化输出"></a>格式化输出</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(&quot;&#123;&#125; &#123;&#125;&quot;.format(&quot;hello&quot;, &quot;world&quot;))   # 输出hello world</span><br></pre></td></tr></table></figure>
<h1 id="输出中文"><a href="#输出中文" class="headerlink" title="输出中文"></a>输出中文</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># -*- coding: UTF-8 -*-</span><br><span class="line">print (&apos;你好&apos;)</span><br></pre></td></tr></table></figure>
<h1 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a ** 2		# 幂运算</span><br></pre></td></tr></table></figure>
<h1 id="条件判断"><a href="#条件判断" class="headerlink" title="条件判断"></a>条件判断</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">if 条件1:</span><br><span class="line"></span><br><span class="line">elif 条件2:</span><br><span class="line"></span><br><span class="line">else:</span><br></pre></td></tr></table></figure>
<h1 id="for"><a href="#for" class="headerlink" title="for"></a>for</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">for k in range(101):		# range用于生成连续序列[0, 100], range(a, b, c)表示首项为a、差为b、小于c的序列</span><br><span class="line">	print k</span><br></pre></td></tr></table></figure>
<h1 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">1.  </span><br><span class="line">  def add2(x):</span><br><span class="line">    return x + 2</span><br><span class="line">	</span><br><span class="line">2. 默认参数</span><br><span class="line">	def add2(x = 0, y = 2):</span><br><span class="line">    return [x + 2, y + 2]   # 返回列表</span><br><span class="line"></span><br><span class="line">3. </span><br><span class="line">  def add2(x, y): </span><br><span class="line">    return x + 2, y + 2     # 双重返回</span><br><span class="line"></span><br><span class="line">  x, y = add2(1, 2)</span><br></pre></td></tr></table></figure>
<h1 id="lambda"><a href="#lambda" class="headerlink" title="lambda"></a>lambda</h1><p>  即匿名函数<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">f = lambda x, y: x + y    # 定义函数f(x, y): return x + y</span><br></pre></td></tr></table></figure></p>
<h1 id="容器"><a href="#容器" class="headerlink" title="容器"></a>容器</h1><p>  容器中元素类型可以不同<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">1. List</span><br><span class="line">  # 声明List </span><br><span class="line">  a = [1, 2, 3]</span><br><span class="line"></span><br><span class="line">  # 修改List</span><br><span class="line">  a[0] = 2</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  # 别名</span><br><span class="line">  b = a</span><br><span class="line"></span><br><span class="line">  # 复制</span><br><span class="line">  c = a[:]</span><br><span class="line"></span><br><span class="line">  # 返回列表中最大、小值</span><br><span class="line">  max = max(a)</span><br><span class="line">  min = min(a)</span><br><span class="line"></span><br><span class="line">  # 列表求和</span><br><span class="line">  sum = sum(a)</span><br><span class="line"></span><br><span class="line">  # 列表升序</span><br><span class="line">  sorted(a)</span><br><span class="line"></span><br><span class="line">  # 填加元素</span><br><span class="line">  a = []</span><br><span class="line">  a.append(4)</span><br><span class="line"></span><br><span class="line">  # 列表解析</span><br><span class="line">  b = [i + 2 for i in a]    # 即 for i in a: b.append(i + 2)</span><br><span class="line"></span><br><span class="line">  # 下标为-1, 返回最后一个元素</span><br><span class="line">  b = a[-1]</span><br><span class="line"></span><br><span class="line">  # 统计元10在a中出现的次数</span><br><span class="line">  a.count(10)</span><br><span class="line"></span><br><span class="line">  # 返回元素个数</span><br><span class="line">  len(a)</span><br><span class="line"></span><br><span class="line">2. Tuple</span><br><span class="line">  # 声明元组</span><br><span class="line">  a = (1, 2, 3)</span><br><span class="line"></span><br><span class="line">  a[0] = 2  # 错误, Tuple不可以被修改</span><br><span class="line"></span><br><span class="line">  # 返回元组个数</span><br><span class="line">  len(a)</span><br><span class="line"></span><br><span class="line">3. Dictionary</span><br><span class="line"></span><br><span class="line">  d = &#123;&#125;</span><br><span class="line">  d[&apos;name&apos;] = &apos;Tom&apos;</span><br></pre></td></tr></table></figure></p>
<h1 id="import"><a href="#import" class="headerlink" title="import"></a>import</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">1. 导入函数库</span><br><span class="line">  import math</span><br><span class="line"></span><br><span class="line">2. 给库起别名</span><br><span class="line">  import math as m</span><br><span class="line"></span><br><span class="line">3. 导入库中的函数</span><br><span class="line">  from math import exp    # 区分import math与from math import *, 后者将大量的函数单独导入</span><br><span class="line"></span><br><span class="line">4. 给函数起别名</span><br><span class="line">  from math import exp as e</span><br></pre></td></tr></table></figure>
<h1 id="main"><a href="#main" class="headerlink" title="main"></a>main</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">if __name__ == &apos;__main__&apos;: 当.py文件被直接运行时，if __name__ == &apos;__main__&apos;之下的代码块将被运行；当.py文件以模块形式被导入时，if __name__ == &apos;__main__&apos;之下的代码块不被运行。</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://utilcoder.com/计算机图形学/计算机图形学/期中复习/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="CoderUtil">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Code">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/计算机图形学/计算机图形学/期中复习/" itemprop="url">期中复习</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-05T10:21:08+08:00">
                2019-05-05
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/计算机图形学/" itemprop="url" rel="index">
                    <span itemprop="name">计算机图形学</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="计算机图形学CG"><a href="#计算机图形学CG" class="headerlink" title="计算机图形学CG"></a>计算机图形学CG</h1><p>​    所有可视化内容的综合体(模型 + 渲染 + 处理 + 动画)</p>
<h2 id="模型Model"><a href="#模型Model" class="headerlink" title="模型Model"></a>模型Model</h2><p>​    在计算机上创建物体的3D形状和外观</p>
<ul>
<li>表示方法: 数字矩阵, 三角网格</li>
</ul>
<h2 id="渲染Render"><a href="#渲染Render" class="headerlink" title="渲染Render"></a>渲染Render</h2><p>​    在计算机上显示3D模型的2D图像</p>
<ul>
<li>包括: 逼真渲染、交互渲染、艺术渲染</li>
</ul>
<h2 id="动画Animation"><a href="#动画Animation" class="headerlink" title="动画Animation"></a>动画Animation</h2><p>​    显示物体的实时变化</p>
<h1 id="与其他学科的关系"><a href="#与其他学科的关系" class="headerlink" title="与其他学科的关系"></a>与其他学科的关系</h1><ul>
<li>计算机图形学: 生成图像</li>
<li>图像处理: 图像变换</li>
<li>计算机视觉: 从图像中提取特征值</li>
</ul>
<h1 id="帧缓存FrameBuffer-显存"><a href="#帧缓存FrameBuffer-显存" class="headerlink" title="帧缓存FrameBuffer(显存)"></a>帧缓存FrameBuffer(显存)</h1><p>​    帧缓存的每一个存储单元对应屏幕的一个像素, 整个帧缓存对应一帧图像</p>
<ul>
<li>一般采用double-buffer, 即显示一个buffer时, 填充另一个buffer</li>
</ul>
<h1 id="通道"><a href="#通道" class="headerlink" title="通道"></a>通道</h1><p>​    只存储了单一R、G、B值的图像矩阵</p>
<ul>
<li>若用400 <em> 400 </em> 3的矩阵表示图像, 则R通道, G通道, B通道: 分别表示[400, 400, 0], [400, 400, 1], [400, 400, 2]</li>
</ul>
<ul>
<li>alpha通道: alpha表示透明度, 取值为0~1</li>
</ul>
<h1 id="渲染管线"><a href="#渲染管线" class="headerlink" title="渲染管线"></a>渲染管线</h1><p>​    完成渲染的流水线过程</p>
<p><img src="../../images\TIM截图20190506203021.png" alt="TIM截图20190506203021"></p>
<ul>
<li>顶点着色器: 对顶点进行处理, 如空间坐标系的转换、裁剪</li>
</ul>
<ul>
<li>光栅化: 把顶点转换为栅格状的片段, 每个片段对应帧缓存的一个像素</li>
</ul>
<p><img src="../../images/TIM截图20190505135817.png" alt="TIM截图20190505135817"></p>
<ul>
<li>片段着色器: 计算每一个片元的颜色</li>
</ul>
<h1 id="光栅化Rasterization"><a href="#光栅化Rasterization" class="headerlink" title="光栅化Rasterization"></a>光栅化Rasterization</h1><h2 id="画线"><a href="#画线" class="headerlink" title="画线"></a>画线</h2><ul>
<li>数值微分法DDA: 选择abs(dx)和abs(dy)大的方向进行单位步进, 另一个方向根据斜率进行步进(且步进 &lt; 1)</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">int round(float x) &#123;</span><br><span class="line">    return (int)(x+0.5);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void lineDDA(int x0, int y0, int xEnd, int yEnd) &#123;</span><br><span class="line">    int dx = xEnd - x0, dy = yEnd - y0, steps;</span><br><span class="line">    float xIncrement, yIncrement, x = x0, y = y0;</span><br><span class="line">    </span><br><span class="line">    //	abs(dx)和abs(dy)大的作为单位步进方向</span><br><span class="line">    if (abs(dx) &gt; abs(dy)) </span><br><span class="line">        steps = abs(dx);</span><br><span class="line">    else</span><br><span class="line">        steps = abs(dy);</span><br><span class="line">    xIncrement = float(dx) / float(steps);</span><br><span class="line">    yIncrement = float(dy) / float(steps);</span><br><span class="line"> </span><br><span class="line">    setPixel(round(x), round(y));</span><br><span class="line">    for (int i = 0; i &lt; steps; i++) &#123;</span><br><span class="line">        x += xIncrement;</span><br><span class="line">        y += yIncrement;</span><br><span class="line">        setPixel(round(x), round(y));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>布兰森汉姆Bresenham: 在DDA的基础上, 进行改进(不是简单的向上取整, 而是看向上取整还是向下取整更精确)</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1. abs(dx)和abs(dy)大的作为单位步进方向</span><br><span class="line"></span><br><span class="line">2. 若在x进行单位步进, 则在y方向上的步进小于1, 此时y + 1/k是约等于Ym还是Ym+1更精确呢?</span><br><span class="line"></span><br><span class="line">3. 那我们就需要比较Dupper和Ddown的大小, 较大则说明偏的远</span><br></pre></td></tr></table></figure>
<p><img src="../../images\TIM截图20190505171100.png" alt="TIM截图20190505171100"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">//	abs(dx) &gt; abs(dy)的情景</span><br><span class="line">//	对于abs(dy) &gt; abs(dx)的情景, 只要传参时(x0, xEnd)和(y0, yEnd)进行交换</span><br><span class="line">void lineBres(int x0, int y0, int xEnd, int yEnd) &#123;</span><br><span class="line">    int dx = fabs(xEnd - x0);</span><br><span class="line">    int dy = fabs(yEnd - y0);</span><br><span class="line">    int p = 2 * dy - dx;</span><br><span class="line">    int x, y;</span><br><span class="line"> </span><br><span class="line"> 	//	选定x较小的方向为初始点</span><br><span class="line">    if (x0 &gt; xEnd) &#123;</span><br><span class="line">        x = xEnd;</span><br><span class="line">        y = yEnd;</span><br><span class="line">        xEnd = x0;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        x = x0;</span><br><span class="line">        y = y0;</span><br><span class="line">    &#125;</span><br><span class="line">    setPixel(x, y);</span><br><span class="line"> </span><br><span class="line">    while (x &lt; xEnd) &#123;</span><br><span class="line">        if (p &lt; 0) </span><br><span class="line">            p += 2 * dy;</span><br><span class="line">        else &#123;</span><br><span class="line">            y++;</span><br><span class="line">            p += 2 * (dy - dx);</span><br><span class="line">        &#125;</span><br><span class="line">        x++;</span><br><span class="line">        setPixel(x, y);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="画圆"><a href="#画圆" class="headerlink" title="画圆"></a>画圆</h2><p>​    将圆分成8份, 选一份计算出起点和终点, 再使用Bresenham画线算法(根据abs(dx)和abs(dy)传参), 然后根据对称性, 得出另外七份</p>
<h1 id="三角形填充"><a href="#三角形填充" class="headerlink" title="三角形填充"></a>三角形填充</h1><ul>
<li>Edge-Walking</li>
</ul>
<p><img src="../../images\TIM截图20190507091136.png" alt="TIM截图20190507091136"></p>
<ul>
<li>Edge-equation</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1. 计算三条边的一般式方程Ax+By+C=0</span><br><span class="line"></span><br><span class="line">2. 将三条边“中心化”(中心化后, 三角形中的任意一个点代入3条曲线, 都会使Ax+By+C &gt;= 0). 中心化的方式, 对于每条边的方程, 代入另一个顶点, 若小于0，则将参数A、B、C都乘以-1</span><br><span class="line"></span><br><span class="line">3. 计算三角形的外接矩形</span><br><span class="line"></span><br><span class="line">4. 遍历外接矩形中的每一个点(x, y)，若对于三条边, Ax+By+C都&gt;=0, 则说明点在三角形内, 画出该点</span><br></pre></td></tr></table></figure>
<p><img src="../../images\TIM截图20190507091329.png" alt="TIM截图20190507091329"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">vector&lt;int&gt; lineEquation(int x1, int y1, int x2, int y2) &#123;</span><br><span class="line">    // line equation: Ax+ By+ C= 0</span><br><span class="line">    vector&lt;int&gt; res;</span><br><span class="line">    int A= y2- y1;</span><br><span class="line">    int B= x1- x2;</span><br><span class="line">    int C= x2* y1- x1* y2;</span><br><span class="line">    res.push_back(A);</span><br><span class="line">    res.push_back(B);</span><br><span class="line">    res.push_back(C);</span><br><span class="line">    return res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">vector&lt;int&gt; rasterizeTriangle(int x1, int y1, int x2, int y2, int x3, int y3) &#123;</span><br><span class="line">    int max_x= max(x1, max(x2, x3));</span><br><span class="line">    int min_x= min(x1, min(x2, x3));</span><br><span class="line">    int max_y= max(y1, max(y2, y3));</span><br><span class="line">    int min_y= min(y1, min(y2, y3));</span><br><span class="line">    int center_x= (max_x- min_x)/ 2;</span><br><span class="line">    int center_y= (max_y- min_y)/ 2;</span><br><span class="line">    vector&lt; vector&lt;int&gt; &gt; lines;</span><br><span class="line">    lines.push_back(lineEquation(x1, y1, x2, y2));</span><br><span class="line">    lines.push_back(lineEquation(x1, y1, x3, y3));</span><br><span class="line">    lines.push_back(lineEquation(x3, y3, x2, y2));</span><br><span class="line">    // centerlize the equations</span><br><span class="line">    for (int i= 0; i&lt; 3; i++) &#123;</span><br><span class="line">        int x_temp, y_temp;</span><br><span class="line">        if (i== 0) &#123;</span><br><span class="line">            x_temp= x3; y_temp= y3;</span><br><span class="line">        &#125; else if (i== 1) &#123;</span><br><span class="line">            x_temp= x2; y_temp= y2;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            x_temp= x1; y_temp= y1;</span><br><span class="line">        &#125;</span><br><span class="line">        // A*x+ B*y+ C</span><br><span class="line">        if (lines[i][0]* x_temp+ lines[i][1]* y_temp+ lines[i][2]&lt; 0) &#123;</span><br><span class="line">            for (int j= 0; j&lt; lines[i].size(); j++) &#123;</span><br><span class="line">                lines[i][j]*= -1;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    // set pixel</span><br><span class="line">    vector&lt;int&gt; pixels;</span><br><span class="line">    for (int x= min_x; x&lt;= max_x; x++) &#123;</span><br><span class="line">        for (int y= min_y; y&lt;= max_y; y++) &#123;</span><br><span class="line">            bool isInside= true;</span><br><span class="line">            for (int i= 0; i&lt; 3; i++) &#123;</span><br><span class="line">                if (lines[i][0]* x+ lines[i][1]* y+ lines[i][2]&lt; 0) &#123;</span><br><span class="line">                    isInside= false;</span><br><span class="line">                    break;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            if (isInside) &#123;</span><br><span class="line">                pixels.push_back(x);</span><br><span class="line">                pixels.push_back(y);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return pixels;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="坐标系"><a href="#坐标系" class="headerlink" title="坐标系"></a>坐标系</h1><h2 id="齐次坐标"><a href="#齐次坐标" class="headerlink" title="齐次坐标"></a>齐次坐标</h2><ul>
<li>概念: 在空间直角坐标系中, 任意一点可用一个三维坐标矩阵[x y z]表示。如果将该点用一个四维坐标的矩阵[Hx Hy Hz Hw]表示时, 则称为齐次坐标表示方法(Hw称为比例因子, Hw为0表示一个点, Hw为1表示一个向量)</li>
</ul>
<ul>
<li>齐次坐标与笛卡尔坐标的区别: 笛卡尔坐标下平行直线不会相交; 而在齐次坐标系下,  满足透视学中无穷远处相交于一点的需要</li>
</ul>
<ul>
<li>齐次坐标与笛卡尔坐标的转换: 当w不为零时, 齐次点坐标(x, y, z, w) = 三维空间点坐标(x/w, y/w, z/w); 当w为零时, 齐次点(x, y, z, 0.0)表示此点位于某方向的无穷远处</li>
</ul>
<ul>
<li>使用场景: 所有仿射变换都可以变为齐次坐标下的矩阵运算</li>
</ul>
<h2 id="右手系与左手系"><a href="#右手系与左手系" class="headerlink" title="右手系与左手系"></a>右手系与左手系</h2><ul>
<li>右手系: 伸开右手， 大拇指指向X轴正方向, 食指指向Y轴正方向, 其他三个手指向手心弯曲90°, 指向Z轴正方向</li>
<li>左手系: 伸开左手， 大拇指指向X轴正方向, 食指指向Y轴正方向, 其他三个手指向手心弯曲90°, 指向Z轴正方向</li>
</ul>
<ul>
<li>OpenGl采用右手系</li>
</ul>
<h2 id="仿射变换"><a href="#仿射变换" class="headerlink" title="仿射变换"></a>仿射变换</h2><p>​    向量P‘ = 变换矩阵 * 向量P</p>
<ul>
<li>实现原理</li>
</ul>
<p><img src="../../images\TIM截图20190506140843.png" alt="TIM截图20190506140843"></p>
<p><img src="../../images\TIM截图20190507093222.png" alt="TIM截图20190507093222"></p>
<p><img src="../../images\TIM截图20190507093301.png" alt="TIM截图20190507093301"></p>
<ul>
<li>glm提供了支持</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">scale = glm::scale(trans, glm::vec3(0.5, 0.5, 0.5));</span><br><span class="line"></span><br><span class="line">trans = glm::translate(trans, glm::vec3(1.0f, 1.0f, 0.0f));</span><br><span class="line"></span><br><span class="line">rotate = glm::rotate(trans, glm::radians(90.0f), glm::vec3(0.0, 0.0, 1.0));</span><br></pre></td></tr></table></figure>
<h2 id="坐标系转换"><a href="#坐标系转换" class="headerlink" title="坐标系转换"></a>坐标系转换</h2><p><img src="../../images\TIM截图20190506202200.png" alt="TIM截图20190506202200"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">坐标系:</span><br><span class="line">	1. 局部空间: 物体中心为原点</span><br><span class="line">	</span><br><span class="line">	2. 世界空间: 屏幕中心为原点. 面对屏幕, 你的右边是x正轴, 上面是y正轴, 屏幕指向你为z正轴. 世界空间包含物体、相机、光源</span><br><span class="line">	</span><br><span class="line">	3. 观察空间: 以相机为原点. 当物体在原点, 相机在轴正向的效果 &lt;=&gt; 相机在原点, 物体在z轴负向</span><br><span class="line">	</span><br><span class="line">	4. 裁剪空间: 以视区窗口为原点</span><br><span class="line">	</span><br><span class="line">	5. 屏幕空间: </span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line"></span><br><span class="line">坐标系变换:</span><br><span class="line">    Modeling Transformation: 因为世界空间以屏幕中心为原点, 因此要将每个物体的位置设为相对屏幕中心的</span><br><span class="line"></span><br><span class="line">    Viewing Transformation: 因为观察空间以相机为原点, 因此要将除相机外每个物体的位置设为相对相机的</span><br><span class="line"></span><br><span class="line">    Projection Transformation: 通过投影, 将3D物体投影到2D相机屏幕</span><br><span class="line">    </span><br><span class="line">    Viewport Transformation: 将投影后的屏幕的图像映射到视区</span><br></pre></td></tr></table></figure>
<h2 id="LookAt矩阵"><a href="#LookAt矩阵" class="headerlink" title="LookAt矩阵"></a>LookAt矩阵</h2><p>​    用于生成Viewing Transformation矩阵</p>
<ul>
<li>实现原理</li>
</ul>
<p><img src="../../images\TIM截图20190506190004.png" alt="TIM截图20190506190004"></p>
<ul>
<li>glm提供了支持</li>
</ul>
<p><img src="../../images\TIM截图20190506185806.png" alt="TIM截图20190506185806"></p>
<p><img src="../../images\TIM截图20190506190832.png" alt="TIM截图20190506190832"></p>
<h2 id="正交投影、透视投影"><a href="#正交投影、透视投影" class="headerlink" title="正交投影、透视投影"></a>正交投影、透视投影</h2><p>​    用于生成Projection Transformation矩阵</p>
<ul>
<li>正交投影Orthogonal Projection: 显示出来的物体大小与物体距离相机的距离无关</li>
</ul>
<ul>
<li>透视投影Perspective Projection:  距离相机越远, 物体越小</li>
</ul>
<p><img src="../../images\TIM截图20190506195602.png" alt="TIM截图20190506195602"></p>
<ul>
<li>glm提供了支持(注意, 第3、4个参数表示到相机的距离, 距离只能为正)</li>
</ul>
<p><img src="../../images\TIM截图20190506201043.png" alt="TIM截图20190506201043"></p>
<p><img src="../../images\TIM截图20190506200526.png" alt="TIM截图20190506200526"></p>
<h1 id="裁剪"><a href="#裁剪" class="headerlink" title="裁剪"></a>裁剪</h1><ul>
<li>Cohen-Sutherland算法: </li>
</ul>
<p><a href="https://blog.csdn.net/pleasecallmewhy/article/details/8393445" target="_blank" rel="noopener">https://blog.csdn.net/pleasecallmewhy/article/details/8393445</a></p>
<h2 id="深度缓冲-Z缓冲"><a href="#深度缓冲-Z缓冲" class="headerlink" title="深度缓冲(Z缓冲)"></a>深度缓冲(Z缓冲)</h2><p>​    保存了某点到观察点的距离</p>
<h2 id="窗口、视区"><a href="#窗口、视区" class="headerlink" title="窗口、视区"></a>窗口、视区</h2><ul>
<li>窗口Window: 执行程序后显示的窗口, 通过glutInitWindowSize设置窗口大小, gluOrtho2D设置窗口位置</li>
</ul>
<ul>
<li>视区Viewport: 窗口中用于显示图形的一块矩形区域(通常视区和窗口一样大, 但是若想在窗口上同时画两个图, 则视区为窗口一半). 只有绘制在视区的图形才能被显示, 如果图形有一部分超出了视区, 那么那一部分是看不到的. 通过glViewport设置视区在窗口的位置和大小</li>
</ul>
<h1 id="光照"><a href="#光照" class="headerlink" title="光照"></a>光照</h1><p>​    物体显示的颜色 = 光源颜色向量和物体颜色向量的点积. 三种光照可以组合使用即 (ambient + diffuse + specular) * objectColor</p>
<p><img src="../../images\TIM截图20190506213135.png" alt="TIM截图20190506213135"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://utilcoder.com/计算机图形学/计算机图形学/学习(五)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="CoderUtil">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Code">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/计算机图形学/计算机图形学/学习(五)/" itemprop="url">学习五</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-04-29T14:26:52+08:00">
                2019-04-29
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/计算机图形学/" itemprop="url" rel="index">
                    <span itemprop="name">计算机图形学</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="颜色"><a href="#颜色" class="headerlink" title="颜色"></a>颜色</h1><ul>
<li>物体的颜色, 是由物体反射光源后得到的</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">glm::vec3 lightColor(1.0f, 1.0f, 1.0f);		//	光源颜色为白色</span><br><span class="line">glm::vec3 toyColor(1.0f, 0.5f, 0.31f);		//	物体颜色</span><br><span class="line">glm::vec3 result = lightColor * toyColor;	//	反射后的颜色</span><br></pre></td></tr></table></figure>
<h1 id="创建光照场景"><a href="#创建光照场景" class="headerlink" title="创建光照场景"></a>创建光照场景</h1><h2 id="创建物体"><a href="#创建物体" class="headerlink" title="创建物体"></a>创建物体</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">1. 创建物体VAO	</span><br><span class="line">	//	cubeVAO</span><br><span class="line">	unsigned int cubeVAO;</span><br><span class="line">	glGenVertexArrays(1, &amp;cubeVAO);</span><br><span class="line">	glBindVertexArray(cubeVAO);</span><br><span class="line"></span><br><span class="line">	//	VBO</span><br><span class="line">	unsigned int VBO;</span><br><span class="line">	glGenBuffers(1, &amp;VBO);</span><br><span class="line">	glBindBuffer(GL_ARRAY_BUFFER, VBO);</span><br><span class="line">	glBufferData(GL_ARRAY_BUFFER, sizeof(vertices), vertices, GL_STATIC_DRAW);</span><br><span class="line"></span><br><span class="line">	//	设置位置属性</span><br><span class="line">	glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 6 * sizeof(float), (void*)0);</span><br><span class="line">	glEnableVertexAttribArray(0);</span><br><span class="line"></span><br><span class="line">	//	法向量属性</span><br><span class="line">	glVertexAttribPointer(1, 3, GL_FLOAT, GL_FALSE, 6 * sizeof(float), (void*)(3 * sizeof(float)));</span><br><span class="line">	glEnableVertexAttribArray(1);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	when(...) &#123;</span><br><span class="line">		2. 激活物体着色器并传递参数</span><br><span class="line">        Shader cubeShader(&quot;cubeShader.vs&quot;, &quot;cubeShader.fs&quot;);</span><br><span class="line">		cubeShader.use();</span><br><span class="line">		cubeShader.setVec3(...)</span><br><span class="line">		cubeShader.setMat4(&quot;model&quot;, model);</span><br><span class="line">		cubeShader.setMat4(&quot;projection&quot;, projection);</span><br><span class="line">        cubeShader(&quot;view&quot;, view);</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        3. 绘制物体</span><br><span class="line">        glBindVertexArray(cubeVAO);</span><br><span class="line">        glDrawArrays(GL_TRIANGLES, 0, 36);</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<h2 id="创建光源"><a href="#创建光源" class="headerlink" title="创建光源"></a>创建光源</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">1. 创建光源VAO	</span><br><span class="line">	//	lightVAO</span><br><span class="line">	unsigned int lightVAO;</span><br><span class="line">	glGenVertexArrays(1, &amp;lightVAO);</span><br><span class="line">	glBindVertexArray(lightVAO);</span><br><span class="line"></span><br><span class="line">	//	VBO</span><br><span class="line">	glBindBuffer(GL_ARRAY_BUFFER, VBO);</span><br><span class="line"></span><br><span class="line">	//	设置位置属性</span><br><span class="line">	glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 6 * sizeof(float), (void*)0);</span><br><span class="line">	glEnableVertexAttribArray(0);</span><br><span class="line">	</span><br><span class="line"></span><br><span class="line">	when(...) &#123;</span><br><span class="line">		2. 激活光源着色器并传递参数</span><br><span class="line">        Shader lightShader(&quot;lightShader.vs&quot;, &quot;lightShader.fs&quot;);</span><br><span class="line">		lightShader.use();</span><br><span class="line">		lightShader.setVec3(...)</span><br><span class="line">		lightShader.setMat4(&quot;model&quot;, model);</span><br><span class="line">		lightShader.setMat4(&quot;projection&quot;, projection);</span><br><span class="line">        lightShader(&quot;view&quot;, view);</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        3. 绘制光源</span><br><span class="line">        glBindVertexArray(lightVAO);</span><br><span class="line">        glDrawArrays(GL_TRIANGLES, 0, 36);</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<h1 id="冯氏光照模型"><a href="#冯氏光照模型" class="headerlink" title="冯氏光照模型"></a>冯氏光照模型</h1><ul>
<li><p>Phong Shading : 在片段着色器实现冯氏光照模型</p>
</li>
<li><p>Gouraud Shading: 在顶点着色器实现的冯氏光照模型</p>
</li>
</ul>
<h1 id="Phong-Shading"><a href="#Phong-Shading" class="headerlink" title="Phong Shading"></a>Phong Shading</h1><h2 id="环境光照Ambient"><a href="#环境光照Ambient" class="headerlink" title="环境光照Ambient"></a>环境光照Ambient</h2><ul>
<li>即使在黑暗的情况下，世界上通常也仍然有一些光亮（月亮、远处的光），所以物体几乎永远不会是完全黑暗的。为了模拟这个，我们会使用一个环境光照常量，它永远会给物体一些颜色</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//	用光的颜色乘以一个很小的常量环境因子，再乘以物体的颜色</span><br><span class="line"></span><br><span class="line">    //	片段着色器</span><br><span class="line">    float ambientStrength = 0.1;</span><br><span class="line">    vec3 ambient = ambientStrength * lightColor;</span><br><span class="line"></span><br><span class="line">    vec3 result = ambient * objectColor;</span><br><span class="line">    FragColor = vec4(result, 1.0);</span><br></pre></td></tr></table></figure>
<h2 id="漫反射光照Diffuse"><a href="#漫反射光照Diffuse" class="headerlink" title="漫反射光照Diffuse"></a>漫反射光照Diffuse</h2><ul>
<li>模拟光源对物体的方向性影响。物体的某一部分越是正对着光源，它就会越亮。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//	用光源发出的光线与物体表面法向量形成的夹角，计算物体表面的漫反射光照</span><br><span class="line"></span><br><span class="line">    //	顶点着色器</span><br><span class="line">    Normal = mat3(transpose(inverse(model))) * aNormal;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    //	片段着色器</span><br><span class="line">    vec3 norm = normalize(Normal);		//	normalize返回该方向的单位向量</span><br><span class="line">    vec3 lightDir = normalize(lightPos - FragPos);</span><br><span class="line">    float diff = max(dot(norm, lightDir), 0.0);</span><br><span class="line">    vec3 diffuse = diffuseStrength * diff * lightColor;</span><br></pre></td></tr></table></figure>
<h2 id="镜面光照Specular"><a href="#镜面光照Specular" class="headerlink" title="镜面光照Specular"></a>镜面光照Specular</h2><ul>
<li>模拟有光泽物体上面出现的亮点。镜面光照的颜色相比于物体的颜色会更倾向于光的颜色</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//	需要设置一个观察者的位置变量，然后进行镜面光照计算</span><br><span class="line"></span><br><span class="line">	//	片段着色器</span><br><span class="line">	vec3 viewDir = normalize(viewPos - FragPos);</span><br><span class="line"> 	vec3 reflectDir = reflect(-lightDir, norm);  </span><br><span class="line"> 	float spec = pow(max(dot(viewDir, reflectDir), 0.0), ShininessStrength);</span><br><span class="line"> 	vec3 specular = specularStrength * spec * lightColor;</span><br></pre></td></tr></table></figure>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">//	顶点着色器</span><br><span class="line">#version 330 core</span><br><span class="line">layout (location = 0) in vec3 aPos;</span><br><span class="line">layout (location = 1) in vec3 aNormal;</span><br><span class="line"></span><br><span class="line">out vec3 FragPos;</span><br><span class="line">out vec3 Normal;</span><br><span class="line"></span><br><span class="line">uniform mat4 model;</span><br><span class="line">uniform mat4 view;</span><br><span class="line">uniform mat4 projection;</span><br><span class="line"></span><br><span class="line">void main() &#123;</span><br><span class="line">    FragPos = vec3(model * vec4(aPos, 1.0));</span><br><span class="line">    Normal = mat3(transpose(inverse(model))) * aNormal;  </span><br><span class="line">    </span><br><span class="line">    gl_Position = projection * view * vec4(FragPos, 1.0);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//	片段着色器</span><br><span class="line">#version 330 core</span><br><span class="line"></span><br><span class="line">out vec4 FragColor;</span><br><span class="line"></span><br><span class="line">in vec3 Normal;  </span><br><span class="line">in vec3 FragPos;  </span><br><span class="line"></span><br><span class="line">uniform float ambientStrength;</span><br><span class="line">uniform float diffuseStrength;</span><br><span class="line">uniform float specularStrength; </span><br><span class="line">uniform int ShininessStrength;</span><br><span class="line"></span><br><span class="line">uniform vec3 lightPos; </span><br><span class="line">uniform vec3 objectColor;</span><br><span class="line">uniform vec3 lightColor;</span><br><span class="line">uniform vec3 viewPos; </span><br><span class="line"></span><br><span class="line">void main() &#123;</span><br><span class="line">	//	环境光</span><br><span class="line">    vec3 ambient = ambientStrength * lightColor;</span><br><span class="line"></span><br><span class="line">	//	漫反射</span><br><span class="line">	vec3 norm = normalize(Normal);</span><br><span class="line">	vec3 lightDir = normalize(lightPos - FragPos);</span><br><span class="line">	float diff = max(dot(norm, lightDir), 0.0);</span><br><span class="line">	vec3 diffuse = diffuseStrength * diff * lightColor;</span><br><span class="line"></span><br><span class="line">	//	镜面光</span><br><span class="line">	vec3 viewDir = normalize(viewPos - FragPos);</span><br><span class="line">	vec3 reflectDir = reflect(-lightDir, norm);  </span><br><span class="line">	float spec = pow(max(dot(viewDir, reflectDir), 0.0), ShininessStrength);</span><br><span class="line">	vec3 specular = specularStrength * spec * lightColor;  </span><br><span class="line"></span><br><span class="line">	vec3 result = (ambient + diffuse + specular) * objectColor;</span><br><span class="line">    FragColor = vec4(result, 1.0);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="Gouraud-Shading"><a href="#Gouraud-Shading" class="headerlink" title="Gouraud Shading"></a>Gouraud Shading</h1><ul>
<li>将Phong Shading在片段着色器中的计算移动到顶点着色器中.</li>
</ul>
<ul>
<li>相对Phong Shading, 开销较小; 但是由于片段的颜色是由插值决定的, 因此拟真度较低</li>
</ul>
<h2 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a>总结</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">//	顶点着色器</span><br><span class="line">#version 330 core</span><br><span class="line">layout (location = 0) in vec3 aPos;</span><br><span class="line">layout (location = 1) in vec3 aNormal;</span><br><span class="line"></span><br><span class="line">out vec3 LightingColor; </span><br><span class="line"></span><br><span class="line">uniform float ambientStrength;</span><br><span class="line">uniform float diffuseStrength;</span><br><span class="line">uniform float specularStrength; </span><br><span class="line">uniform int ShininessStrength;</span><br><span class="line"></span><br><span class="line">uniform vec3 lightPos;</span><br><span class="line">uniform vec3 viewPos;</span><br><span class="line">uniform vec3 lightColor;</span><br><span class="line"></span><br><span class="line">uniform mat4 model;</span><br><span class="line">uniform mat4 view;</span><br><span class="line">uniform mat4 projection;</span><br><span class="line"></span><br><span class="line">void main() &#123;</span><br><span class="line">    gl_Position = projection * view * model * vec4(aPos, 1.0);</span><br><span class="line">    </span><br><span class="line">    // gouraud shading</span><br><span class="line">    vec3 Position = vec3(model * vec4(aPos, 1.0));</span><br><span class="line">    vec3 Normal = mat3(transpose(inverse(model))) * aNormal;</span><br><span class="line">    </span><br><span class="line">    // 环境光</span><br><span class="line">    vec3 ambient = ambientStrength * lightColor;</span><br><span class="line">  	</span><br><span class="line">    // 漫反射 </span><br><span class="line">    vec3 norm = normalize(Normal);</span><br><span class="line">    vec3 lightDir = normalize(lightPos - Position);</span><br><span class="line">    float diff = max(dot(norm, lightDir), 0.0);</span><br><span class="line">    vec3 diffuse = diffuseStrength * diff * lightColor;</span><br><span class="line">    </span><br><span class="line">    // 镜面光</span><br><span class="line">    vec3 viewDir = normalize(viewPos - Position);</span><br><span class="line">    vec3 reflectDir = reflect(-lightDir, norm);  </span><br><span class="line">    float spec = pow(max(dot(viewDir, reflectDir), 0.0), ShininessStrength);</span><br><span class="line">    vec3 specular = specularStrength * spec * lightColor;      </span><br><span class="line"></span><br><span class="line">    LightingColor = ambient + diffuse + specular;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//	片段着色器</span><br><span class="line">#version 330 core</span><br><span class="line">out vec4 FragColor;</span><br><span class="line"></span><br><span class="line">in vec3 LightingColor; </span><br><span class="line"></span><br><span class="line">uniform vec3 objectColor;</span><br><span class="line"></span><br><span class="line">void main() &#123;</span><br><span class="line">   FragColor = vec4(LightingColor * objectColor, 1.0);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="光源来回移动"><a href="#光源来回移动" class="headerlink" title="光源来回移动"></a>光源来回移动</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">1. 定义全局光源坐标</span><br><span class="line"></span><br><span class="line">	glm::vec3 lightPos(20.0f, 8.0f, 20.0f);</span><br><span class="line">	</span><br><span class="line">2. 光源随时间移动</span><br><span class="line"></span><br><span class="line">	when(...) &#123;</span><br><span class="line">        if (enable_translate) &#123;</span><br><span class="line">			lightPos.x = sin(glfwGetTime()) * 8.0f;</span><br><span class="line">			lightPos.y = sin(glfwGetTime()) * 8.0f;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<h1 id="作业代码"><a href="#作业代码" class="headerlink" title="作业代码"></a>作业代码</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;glad/glad.h&gt;</span><br><span class="line">#include &lt;GLFW/glfw3.h&gt;</span><br><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &quot;imgui.h&quot;</span><br><span class="line">#include &quot;imgui_impl_glfw.h&quot;</span><br><span class="line">#include &quot;imgui_impl_opengl3.h&quot;</span><br><span class="line">#include &lt;cmath&gt;</span><br><span class="line">#include &lt;vector&gt;</span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">#include &lt;glm/glm.hpp&gt;</span><br><span class="line">#include &lt;glm/gtc/matrix_transform.hpp&gt;</span><br><span class="line">#include &lt;glm/gtc/type_ptr.hpp&gt;</span><br><span class="line">#include &quot;camera.h&quot;</span><br><span class="line">#include &quot;shader.h&quot;</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">const unsigned int SCR_WIDTH = 800;</span><br><span class="line">const unsigned int SCR_HEIGHT = 600;</span><br><span class="line"></span><br><span class="line">void framebuffer_size_callback(GLFWwindow* window, int width, int height);</span><br><span class="line">void mouse_callback(GLFWwindow* window, double xpos, double ypos);</span><br><span class="line">void scroll_callback(GLFWwindow* window, double xoffset, double yoffset);</span><br><span class="line">void processInput(GLFWwindow* window);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Camera camera(glm::vec3(0.0f, 0.0f, 10.0f));</span><br><span class="line">//鼠标位置</span><br><span class="line">float mouseX = 0.0f;</span><br><span class="line">float mouseY = 0.0f;</span><br><span class="line">bool firstMouse = true;</span><br><span class="line">//每一帧间隔时间</span><br><span class="line">float deltaTime = 0.0f;</span><br><span class="line">//上一帧的时刻</span><br><span class="line">float lastFrame = 0.0f;</span><br><span class="line"></span><br><span class="line">//	光源坐标</span><br><span class="line">glm::vec3 lightPos(20.0f, 8.0f, 20.0f);</span><br><span class="line"></span><br><span class="line">int main() &#123;</span><br><span class="line">	//	初始化</span><br><span class="line">	glfwInit();</span><br><span class="line">	glfwWindowHint(GLFW_CONTEXT_VERSION_MAJOR, 3);</span><br><span class="line">	glfwWindowHint(GLFW_CONTEXT_VERSION_MINOR, 3);</span><br><span class="line">	glfwWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	//	创建一个窗口</span><br><span class="line">	GLFWwindow* window = glfwCreateWindow(SCR_WIDTH, SCR_HEIGHT, &quot;LearnOpenGL&quot;, NULL, NULL);</span><br><span class="line">	if (window == NULL)</span><br><span class="line">	&#123;</span><br><span class="line">		std::cout &lt;&lt; &quot;Failed to create GLFW window&quot; &lt;&lt; std::endl;</span><br><span class="line">		glfwTerminate();</span><br><span class="line">		return -1;</span><br><span class="line">	&#125;</span><br><span class="line">	//	设置窗口上下文为当前线程的主上下文</span><br><span class="line">	glfwMakeContextCurrent(window);</span><br><span class="line">	//	当窗口大小改变时调用此函数</span><br><span class="line">	glfwSetFramebufferSizeCallback(window, framebuffer_size_callback);</span><br><span class="line">	//	通知glfw捕获鼠标与滚轮事件</span><br><span class="line">	glfwSetCursorPosCallback(window, mouse_callback);</span><br><span class="line">	glfwSetScrollCallback(window, scroll_callback);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	//	使用GLAD加载OpenGL提供的函数指针</span><br><span class="line">	if (!gladLoadGLLoader((GLADloadproc)glfwGetProcAddress)) &#123;</span><br><span class="line">		std::cout &lt;&lt; &quot;Failed to initialize GLAD&quot; &lt;&lt; std::endl;</span><br><span class="line">		return -1;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	//	顶点数组</span><br><span class="line">	float vertices[] = &#123;</span><br><span class="line">		-2.0f, -2.0f, -2.0f, 0.0f, 0.0f, -1.0f,</span><br><span class="line">		2.0f, -2.0f, -2.0f, 0.0f, 0.0f, -1.0f,</span><br><span class="line">		2.0f, 2.0f, -2.0f, 0.0f, 0.0f, -1.0f,</span><br><span class="line">		2.0f, 2.0f, -2.0f, 0.0f, 0.0f, -1.0f,</span><br><span class="line">		-2.0f, 2.0f, -2.0f, 0.0f, 0.0f, -1.0f,</span><br><span class="line">		-2.0f, -2.0f, -2.0f, 0.0f, 0.0f, -1.0f,</span><br><span class="line"></span><br><span class="line">		-2.0f, -2.0f, 2.0f, 0.0f, 0.0f, 1.0f,</span><br><span class="line">		2.0f, -2.0f, 2.0f, 0.0f, 0.0f, 1.0f,</span><br><span class="line">		2.0f, 2.0f, 2.0f, 0.0f, 0.0f, 1.0f,</span><br><span class="line">		2.0f, 2.0f, 2.0f, 0.0f, 0.0f, 1.0f,</span><br><span class="line">		-2.0f, 2.0f, 2.0f, 0.0f, 0.0f, 1.0f,</span><br><span class="line">		-2.0f, -2.0f, 2.0f, 0.0f, 0.0f, 1.0f,</span><br><span class="line"></span><br><span class="line">		-2.0f, 2.0f, 2.0f, -1.0f, 0.0f, 0.0f,</span><br><span class="line">		-2.0f, 2.0f, -2.0f, -1.0f, 0.0f, 0.0f,</span><br><span class="line">		-2.0f, -2.0f, -2.0f, -1.0f, 0.0f, 0.0f,</span><br><span class="line">		-2.0f, -2.0f, -2.0f, -1.0f, 0.0f, 0.0f,</span><br><span class="line">		-2.0f, -2.0f, 2.0f, -1.0f, 0.0f, 0.0f,</span><br><span class="line">		-2.0f, 2.0f, 2.0f, -1.0f, 0.0f, 0.0f,</span><br><span class="line"></span><br><span class="line">		2.0f, 2.0f, 2.0f, 1.0f, 0.0f, 0.0f,</span><br><span class="line">		2.0f, 2.0f, -2.0f, 1.0f, 0.0f, 0.0f,</span><br><span class="line">		2.0f, -2.0f, -2.0f, 1.0f, 0.0f, 0.0f,</span><br><span class="line">		2.0f, -2.0f, -2.0f, 1.0f, 0.0f, 0.0f,</span><br><span class="line">		2.0f, -2.0f, 2.0f, 1.0f, 0.0f, 0.0f,</span><br><span class="line">		2.0f, 2.0f, 2.0f, 1.0f, 0.0f, 0.0f,</span><br><span class="line"></span><br><span class="line">		-2.0f, -2.0f, -2.0f, 0.0f, -1.0f, 0.0f,</span><br><span class="line">		2.0f, -2.0f, -2.0f, 0.0f, -1.0f, 0.0f,</span><br><span class="line">		2.0f, -2.0f, 2.0f, 0.0f, -1.0f, 0.0f,</span><br><span class="line">		2.0f, -2.0f, 2.0f, 0.0f, -1.0f, 0.0f,</span><br><span class="line">		-2.0f, -2.0f, 2.0f, 0.0f, -1.0f, 0.0f,</span><br><span class="line">		-2.0f, -2.0f, -2.0f, 0.0f, -1.0f, 0.0f,</span><br><span class="line"></span><br><span class="line">		-2.0f, 2.0f, -2.0f, 0.0f, 1.0f, 0.0f,</span><br><span class="line">		2.0f, 2.0f, -2.0f, 0.0f, 1.0f, 0.0f,</span><br><span class="line">		2.0f, 2.0f, 2.0f, 0.0f, 1.0f, 0.0f,</span><br><span class="line">		2.0f, 2.0f, 2.0f, 0.0f, 1.0f, 0.0f,</span><br><span class="line">		-2.0f, 2.0f, 2.0f, 0.0f, 1.0f, 0.0f,</span><br><span class="line">		-2.0f, 2.0f, -2.0f, 0.0f, 1.0f, 0.0f,</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	//	cubeVAO</span><br><span class="line">	unsigned int cubeVAO;</span><br><span class="line">	glGenVertexArrays(1, &amp;cubeVAO);</span><br><span class="line">	glBindVertexArray(cubeVAO);</span><br><span class="line"></span><br><span class="line">	//	VBO</span><br><span class="line">	unsigned int VBO;</span><br><span class="line">	glGenBuffers(1, &amp;VBO);</span><br><span class="line">	glBindBuffer(GL_ARRAY_BUFFER, VBO);</span><br><span class="line">	glBufferData(GL_ARRAY_BUFFER, sizeof(vertices), vertices, GL_STATIC_DRAW);</span><br><span class="line"></span><br><span class="line">	//	设置位置属性</span><br><span class="line">	//	属性值为0的顶点属性，有3个值，相邻顶点的同一属性距离为6个float，偏移为0</span><br><span class="line">	glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 6 * sizeof(float), (void*)0);</span><br><span class="line">	glEnableVertexAttribArray(0);</span><br><span class="line"></span><br><span class="line">	//	法向量属性</span><br><span class="line">	//	属性值为1的顶点属性，有3个值，相邻顶点的同一属性距离为6个float，偏移为3个float</span><br><span class="line">	glVertexAttribPointer(1, 3, GL_FLOAT, GL_FALSE, 6 * sizeof(float), (void*)(3 * sizeof(float)));</span><br><span class="line">	glEnableVertexAttribArray(1);</span><br><span class="line"></span><br><span class="line">	//	lightVAO</span><br><span class="line">	unsigned int lightVAO;</span><br><span class="line">	glGenVertexArrays(1, &amp;lightVAO);</span><br><span class="line">	glBindVertexArray(lightVAO);</span><br><span class="line"></span><br><span class="line">	//	VBO</span><br><span class="line">	glBindBuffer(GL_ARRAY_BUFFER, VBO);</span><br><span class="line"></span><br><span class="line">	//	设置位置属性</span><br><span class="line">	glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 6 * sizeof(float), (void*)0);</span><br><span class="line">	glEnableVertexAttribArray(0);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	//	开启深度测试</span><br><span class="line">	glEnable(GL_DEPTH_TEST);</span><br><span class="line"></span><br><span class="line">	//	初始化ImgUI</span><br><span class="line">	IMGUI_CHECKVERSION();</span><br><span class="line">	ImGui::CreateContext();</span><br><span class="line">	ImGuiIO&amp; io = ImGui::GetIO(); (void)io;</span><br><span class="line">	ImGui::StyleColorsDark();</span><br><span class="line">	ImGui_ImplGlfw_InitForOpenGL(window, true);</span><br><span class="line">	ImGui_ImplOpenGL3_Init(&quot;#version 150&quot;);</span><br><span class="line"></span><br><span class="line">	bool enable_camera = false;</span><br><span class="line">	bool choose_phong = true;</span><br><span class="line">	bool choose_gouraud = false;</span><br><span class="line">	bool light_move = false;</span><br><span class="line">	float ambientStrength = 0.1f;</span><br><span class="line">	float diffuseStrength = 1.0f;</span><br><span class="line">	float specularStrength = 1.0f;</span><br><span class="line">	int ShininessStrength = 30;</span><br><span class="line">	glm::vec3 viewPos;</span><br><span class="line"></span><br><span class="line">	//	循环渲染</span><br><span class="line">	while (!glfwWindowShouldClose(window)) &#123;	//	判断渲染是否结束</span><br><span class="line"></span><br><span class="line">		if (enable_camera) &#123;</span><br><span class="line">			glfwSetInputMode(window, GLFW_CURSOR, GLFW_CURSOR_DISABLED);</span><br><span class="line">		&#125;</span><br><span class="line">		else &#123;</span><br><span class="line">			glfwSetInputMode(window, GLFW_CURSOR, GLFW_CURSOR_NORMAL);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">		//计算当前时间和帧间隔时间</span><br><span class="line">		float currentFrame = glfwGetTime();</span><br><span class="line">		deltaTime = currentFrame - lastFrame;</span><br><span class="line">		lastFrame = currentFrame;</span><br><span class="line"></span><br><span class="line">		//	获取键盘输入</span><br><span class="line">		processInput(window);</span><br><span class="line"></span><br><span class="line">		//	清屏</span><br><span class="line">		glClear(GL_COLOR_BUFFER_BIT);</span><br><span class="line">		//	清除深度缓冲</span><br><span class="line">		glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);</span><br><span class="line">		</span><br><span class="line"></span><br><span class="line">		// 创建ImGUI</span><br><span class="line">		ImGui_ImplOpenGL3_NewFrame();</span><br><span class="line">		ImGui_ImplGlfw_NewFrame();</span><br><span class="line">		ImGui::NewFrame();	</span><br><span class="line">		ImGui::Begin(&quot;Edit cube&quot;);</span><br><span class="line">		ImGui::SetWindowFontScale(1.4);</span><br><span class="line">		if (ImGui::Button(&quot;enable camera&quot;)) &#123;</span><br><span class="line">			if (enable_camera) &#123;</span><br><span class="line">				enable_camera = false;</span><br><span class="line">			&#125;</span><br><span class="line">			else &#123;</span><br><span class="line">				enable_camera = true;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		if (ImGui::RadioButton(&quot;Phong Shader&quot;, choose_phong)) &#123;</span><br><span class="line">			choose_gouraud = false;</span><br><span class="line">			choose_phong = true;</span><br><span class="line">		&#125;</span><br><span class="line">		if (ImGui::RadioButton(&quot;Gouraud Shader&quot;, choose_gouraud)) &#123;</span><br><span class="line">			choose_gouraud = true;</span><br><span class="line">			choose_phong = false;</span><br><span class="line">		&#125;</span><br><span class="line">		ImGui::SliderFloat(&quot;ambientStrength&quot;, &amp;ambientStrength, 0.01f, 10.0f);</span><br><span class="line">		ImGui::SliderFloat(&quot;diffuseStrength&quot;, &amp;diffuseStrength, 0.01f, 10.0f);</span><br><span class="line">		ImGui::SliderFloat(&quot;specularStrength&quot;, &amp;specularStrength, 0.01f, 10.0f);</span><br><span class="line">		ImGui::SliderInt(&quot;ShininessStrength&quot;, &amp;ShininessStrength, 0, 256);</span><br><span class="line"></span><br><span class="line">		if (ImGui::Button(&quot;light move&quot;)) &#123;</span><br><span class="line">			if (light_move)</span><br><span class="line">				light_move = false;</span><br><span class="line">			else </span><br><span class="line">				light_move = true;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		ImGui::End();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">		//	灯光移动</span><br><span class="line">		if (light_move) &#123;</span><br><span class="line">			lightPos.x = sin(glfwGetTime()) * 8.0f;</span><br><span class="line">			lightPos.y = sin(glfwGetTime()) * 8.0f;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		glm::mat4 model = glm::mat4(1.0f);</span><br><span class="line">		glm::mat4 view = glm::mat4(1.0f);</span><br><span class="line">		glm::mat4 projection = glm::mat4(1.0f);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">		if (enable_camera) &#123;</span><br><span class="line">			view = camera.GetViewMatrix();</span><br><span class="line">			viewPos = camera.Position;</span><br><span class="line"></span><br><span class="line">			projection = glm::perspective(glm::radians(camera.Zoom), (float)SCR_WIDTH / (float)SCR_HEIGHT, 0.1f, 100.0f);</span><br><span class="line">		&#125;</span><br><span class="line">		else &#123;</span><br><span class="line">			//把场景移动(-1.0f, -1.0f, -5.0f)</span><br><span class="line">			view = glm::translate(view, glm::vec3(0.0f, 0.0f, -10.0f));</span><br><span class="line">			viewPos = glm::vec3(1.0f, 1.0f, 5.0f);</span><br><span class="line"></span><br><span class="line">			projection = glm::perspective(glm::radians(45.0f), (float)SCR_WIDTH / (float)SCR_HEIGHT, 0.1f, 100.0f);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		model = glm::rotate(model, glm::radians(20.0f), glm::vec3(1.0f, 0.0f, 0.0f));</span><br><span class="line">		model = glm::rotate(model, glm::radians(-20.0f), glm::vec3(0.0f, 1.0f, 0.0f));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">		if (choose_phong) &#123;</span><br><span class="line"></span><br><span class="line">			//	创建着色器</span><br><span class="line">			Shader cubeShader(&quot;cubePhongShader.vs&quot;, &quot;cubePhongShader.fs&quot;);</span><br><span class="line"></span><br><span class="line">			//	激活着色器</span><br><span class="line">			cubeShader.use();</span><br><span class="line"></span><br><span class="line">			//	设置着色器程序uniform</span><br><span class="line">			cubeShader.setFloat(&quot;ambientStrength&quot;, ambientStrength);</span><br><span class="line">			cubeShader.setFloat(&quot;diffuseStrength&quot;, diffuseStrength);</span><br><span class="line">			cubeShader.setFloat(&quot;specularStrength&quot;, specularStrength);</span><br><span class="line">			cubeShader.setInt(&quot;ShininessStrength&quot;, ShininessStrength);</span><br><span class="line"></span><br><span class="line">			cubeShader.setVec3(&quot;objectColor&quot;, 1.0f, 0.5f, 0.31f);</span><br><span class="line">			cubeShader.setVec3(&quot;lightColor&quot;, 1.0f, 1.0f, 1.0f);</span><br><span class="line">			cubeShader.setVec3(&quot;lightPos&quot;, lightPos);</span><br><span class="line">			cubeShader.setVec3(&quot;viewPos&quot;, viewPos);</span><br><span class="line"></span><br><span class="line">			cubeShader.setMat4(&quot;model&quot;, model);</span><br><span class="line">			cubeShader.setMat4(&quot;view&quot;, view);</span><br><span class="line">			cubeShader.setMat4(&quot;projection&quot;, projection);</span><br><span class="line"></span><br><span class="line">			//	画物体</span><br><span class="line">			glBindVertexArray(cubeVAO);</span><br><span class="line">			glDrawArrays(GL_TRIANGLES, 0, 36);</span><br><span class="line">		&#125;</span><br><span class="line">		else if (choose_gouraud) &#123;</span><br><span class="line">			Shader cubeShader(&quot;cubeGouraudShader.vs&quot;, &quot;cubeGouraudShader.fs&quot;);</span><br><span class="line">			//使用着色器程序</span><br><span class="line">			cubeShader.use();</span><br><span class="line">			//设置着色器程序uniform</span><br><span class="line">			cubeShader.setFloat(&quot;ambientStrength&quot;, ambientStrength);</span><br><span class="line">			cubeShader.setFloat(&quot;diffuseStrength&quot;, diffuseStrength);</span><br><span class="line">			cubeShader.setFloat(&quot;specularStrength&quot;, specularStrength);</span><br><span class="line">			cubeShader.setInt(&quot;ShininessStrength&quot;, ShininessStrength);</span><br><span class="line"></span><br><span class="line">			cubeShader.setVec3(&quot;objectColor&quot;, 1.0f, 0.5f, 0.31f);</span><br><span class="line">			cubeShader.setVec3(&quot;lightColor&quot;, 1.0f, 1.0f, 1.0f);</span><br><span class="line">			cubeShader.setVec3(&quot;lightPos&quot;, lightPos);</span><br><span class="line">			cubeShader.setVec3(&quot;viewPos&quot;, viewPos);</span><br><span class="line"></span><br><span class="line">			cubeShader.setMat4(&quot;model&quot;, model);</span><br><span class="line">			cubeShader.setMat4(&quot;view&quot;, view);</span><br><span class="line">			cubeShader.setMat4(&quot;projection&quot;, projection);</span><br><span class="line"></span><br><span class="line">			//	画物体</span><br><span class="line">			glBindVertexArray(cubeVAO);</span><br><span class="line">			glDrawArrays(GL_TRIANGLES, 0, 36);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">		Shader lightShader(&quot;lightShader.vs&quot;, &quot;lightShader.fs&quot;);</span><br><span class="line"></span><br><span class="line">		lightShader.use();</span><br><span class="line">		model = glm::mat4(1.0f);</span><br><span class="line">		model = glm::scale(model, glm::vec3(0.2f));</span><br><span class="line">		model = glm::translate(model, lightPos);</span><br><span class="line">		lightShader.setMat4(&quot;model&quot;, model);</span><br><span class="line">		lightShader.setMat4(&quot;view&quot;, view);</span><br><span class="line">		lightShader.setMat4(&quot;projection&quot;, projection);</span><br><span class="line">		</span><br><span class="line"></span><br><span class="line">		//	画灯光</span><br><span class="line">		glBindVertexArray(lightVAO);</span><br><span class="line">		glDrawArrays(GL_TRIANGLES, 0, 36);</span><br><span class="line">		</span><br><span class="line"></span><br><span class="line">		// Rendering</span><br><span class="line">		ImGui::Render();</span><br><span class="line">		int display_w, display_h;</span><br><span class="line">		glfwMakeContextCurrent(window);</span><br><span class="line">		glfwGetFramebufferSize(window, &amp;display_w, &amp;display_h);</span><br><span class="line">		glViewport(0, 0, display_w, display_h);</span><br><span class="line">		ImGui_ImplOpenGL3_RenderDrawData(ImGui::GetDrawData());</span><br><span class="line"></span><br><span class="line">		glfwPollEvents();</span><br><span class="line">		glfwSwapBuffers(window);		//	交换颜色缓冲, 即渲染</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	//	释放VAO、VBO</span><br><span class="line">	glDeleteVertexArrays(1, &amp;cubeVAO);</span><br><span class="line">	glDeleteVertexArrays(1, &amp;lightVAO);</span><br><span class="line">	glDeleteBuffers(1, &amp;VBO);</span><br><span class="line"></span><br><span class="line">	//	释放渲染资源</span><br><span class="line">	glfwTerminate();</span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void framebuffer_size_callback(GLFWwindow* window, int width, int height) &#123;</span><br><span class="line">	glViewport(0, 0, width, height);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//	键盘输入</span><br><span class="line">void processInput(GLFWwindow* window) &#123;</span><br><span class="line">	if (glfwGetKey(window, GLFW_KEY_ESCAPE) == GLFW_PRESS) &#123;</span><br><span class="line">		glfwSetWindowShouldClose(window, true);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	if (glfwGetKey(window, GLFW_KEY_W) == GLFW_PRESS)</span><br><span class="line">		camera.ProcessKeyboard(FORWARD, deltaTime);</span><br><span class="line">	if (glfwGetKey(window, GLFW_KEY_S) == GLFW_PRESS)</span><br><span class="line">		camera.ProcessKeyboard(BACKWARD, deltaTime);</span><br><span class="line">	if (glfwGetKey(window, GLFW_KEY_A) == GLFW_PRESS)</span><br><span class="line">		camera.ProcessKeyboard(LEFT, deltaTime);</span><br><span class="line">	if (glfwGetKey(window, GLFW_KEY_D) == GLFW_PRESS)</span><br><span class="line">		camera.ProcessKeyboard(RIGHT, deltaTime);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//	鼠标移动</span><br><span class="line">void mouse_callback(GLFWwindow* window, double xpos, double ypos) &#123;</span><br><span class="line">	if (firstMouse)</span><br><span class="line">	&#123;</span><br><span class="line">		mouseX = xpos;</span><br><span class="line">		mouseY = ypos;</span><br><span class="line">		firstMouse = false;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	float xoffset = xpos - mouseX;</span><br><span class="line">	float yoffset = mouseY - ypos;</span><br><span class="line"></span><br><span class="line">	mouseX = xpos;</span><br><span class="line">	mouseY = ypos;</span><br><span class="line"></span><br><span class="line">	camera.ProcessMouseMovement(xoffset, yoffset);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//	鼠标放缩</span><br><span class="line">void scroll_callback(GLFWwindow* window, double xoffset, double yoffset) &#123;</span><br><span class="line">	camera.ProcessMouseScroll(yoffset);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://utilcoder.com/Django/Django/Django学习(一)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="CoderUtil">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Code">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/Django/Django/Django学习(一)/" itemprop="url">Django学习(一)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-04-22T17:12:17+08:00">
                2019-04-22
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Django/" itemprop="url" rel="index">
                    <span itemprop="name">Django</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">django-admin startproject 项目名</span><br></pre></td></tr></table></figure>
<h2 id="运行服务器"><a href="#运行服务器" class="headerlink" title="运行服务器"></a>运行服务器</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python manage.py runserver (端口号)	//	默认为8000</span><br></pre></td></tr></table></figure>
<h2 id="创建应用"><a href="#创建应用" class="headerlink" title="创建应用"></a>创建应用</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1. python manage.py startapp 应用名</span><br><span class="line"></span><br><span class="line">2. 在settings.py的INSTALLED_APPS中加上应用名</span><br></pre></td></tr></table></figure>
<h2 id="添加路由"><a href="#添加路由" class="headerlink" title="添加路由"></a>添加路由</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">1. 在应用目录下创建urls.py</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">2. 在根目录的urls.py中添加应用的url</span><br><span class="line">	path(&apos;&apos;, include(&apos;blog.urls&apos;))</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">3. 在应用的urls.py中添加访问的路径及调用的函数</span><br><span class="line">	path(&apos;index/&apos;, views.index)</span><br></pre></td></tr></table></figure>
<h2 id="请求与响应"><a href="#请求与响应" class="headerlink" title="请求与响应"></a>请求与响应</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># index.py</span><br><span class="line">from django.http import HttpResponse</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	def search_get(request):</span><br><span class="line">    	request.encoding=&apos;utf-8&apos;</span><br><span class="line">    	name = &apos;&apos;</span><br><span class="line">    		</span><br><span class="line">    	if request.method == &apos;GET&apos;:</span><br><span class="line">    		name = request.GET[&apos;name&apos;]</span><br><span class="line">    	elif request.method == &apos;POST&apos;</span><br><span class="line">    		name = request.POST[&apos;name&apos;]</span><br><span class="line">    	return HttpResponse(&#123;&apos;name&apos;: name&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="区分字典和对象"><a href="#区分字典和对象" class="headerlink" title="区分字典和对象"></a>区分字典和对象</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">1. 和数据库有关的是对象, 用.访问 </span><br><span class="line">	</span><br><span class="line">	test1 = models.Test.objects.get(name=&apos;Tom&apos;)</span><br><span class="line">	test1.name = &apos;John&apos;</span><br><span class="line">	test1.save()</span><br><span class="line">	</span><br><span class="line">2. POST参数传递的是字典, 用[]访问</span><br><span class="line">	</span><br><span class="line">	parameters = json.loads(request.body)</span><br><span class="line">	print(parameters[&apos;task&apos;][&apos;task_bonus&apos;])</span><br></pre></td></tr></table></figure>
<h2 id="MVC"><a href="#MVC" class="headerlink" title="MVC"></a>MVC</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">M: Model, 对应数据表</span><br><span class="line">V: View, 对应模板</span><br><span class="line">C: Control, 对应路由</span><br></pre></td></tr></table></figure>
<h2 id="编写Model"><a href="#编写Model" class="headerlink" title="编写Model"></a>编写Model</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">1. 在应用中创建models.py</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">2. 创建类, 继承models.Model, 该类对应数据表</span><br><span class="line"></span><br><span class="line">    # models.py</span><br><span class="line">    from django.db import models</span><br><span class="line"></span><br><span class="line">    class Test(models.Model):</span><br><span class="line">        name = models.CharField(max_length=20)</span><br><span class="line">        </span><br><span class="line">        def _str_(self):		//	在admin中将每一个数据项显示为name</span><br><span class="line">        	return self.name</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">3. 在settings.py的INSTALLED_APPS中添加类名</span><br><span class="line"></span><br><span class="line">	INSTALLED_APPS = (</span><br><span class="line">    	&apos;TestModel&apos;,              </span><br><span class="line">	)</span><br><span class="line">	</span><br><span class="line"></span><br><span class="line">4. 生成数据表</span><br><span class="line">	python manage.py makemigrations 应用名</span><br><span class="line">	python manage.py migrate</span><br><span class="line">	</span><br><span class="line"></span><br><span class="line">5. 可以在应用的migrations中查看生成的数据表</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">6. 通过SQLite Expert Personal打开根目录下的db.sqlite3查看数据库</span><br></pre></td></tr></table></figure>
<p><img src="../../images\TIM截图20190424102452.png" alt="TIM截图20190424102452"></p>
<p><img src="../../images\TIM截图20190424102540.png" alt="TIM截图20190424102540"></p>
<p><img src="../../images\TIM截图20190424205155.png" alt="TIM截图20190424205155"></p>
<h2 id="数据库操作"><a href="#数据库操作" class="headerlink" title="数据库操作"></a>数据库操作</h2><h2 id="get、filter"><a href="#get、filter" class="headerlink" title="get、filter"></a>get、filter</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">两者都是获取数据库条目</span><br><span class="line"></span><br><span class="line">get: 当符合条件的条目只有一条时, 才能使用get, 返回对象. 若有多个符合条件的条目, 则会错误</span><br><span class="line"></span><br><span class="line">filter: 返回符合条件的对象列表</span><br></pre></td></tr></table></figure>
<h2 id="增删改查"><a href="#增删改查" class="headerlink" title="增删改查"></a>增删改查</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">from . import models</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">1. 增</span><br><span class="line">	test1 = models.Test()</span><br><span class="line">	test1.name=&apos;Tom&apos;</span><br><span class="line">	test1.save()</span><br><span class="line">	</span><br><span class="line"></span><br><span class="line">2. 删</span><br><span class="line">	test1 = models.Test.objects.get(name=&apos;Tom&apos;)</span><br><span class="line">	test1.delete()</span><br><span class="line">	</span><br><span class="line"></span><br><span class="line">3. 改</span><br><span class="line">	test1 = models.Test.objects.get(name=&apos;Tom&apos;)</span><br><span class="line">	test1.name = &apos;John&apos;</span><br><span class="line">	test1.save()</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">4. 查</span><br><span class="line"></span><br><span class="line">	//	获取指定数据</span><br><span class="line">	test1 = models.Test.objects.filter(name=&apos;Tom&apos;).order_by(&apos;id&apos;)		//	&apos;id&apos;是升序, &apos;-id&apos;是降序</span><br><span class="line">	arr = []</span><br><span class="line">    for i in test1:</span><br><span class="line">        content = &#123;&apos;姓名&apos;: i.name&#125;</span><br><span class="line">        arr.append(content)</span><br><span class="line">    return HttpResponse(&#123;&apos;tests&apos;: arr&#125;)</span><br><span class="line">	</span><br><span class="line">	//	获取所有数据</span><br><span class="line">	test2 = models.Test.ojects.all()	</span><br><span class="line">	</span><br><span class="line"></span><br><span class="line">5. 不同app的数据表之间关联外键</span><br><span class="line"></span><br><span class="line">	不需要import</span><br><span class="line">	</span><br><span class="line">	class Bill(models.Model):</span><br><span class="line">    	user_id = models.ForeignKey(&apos;user.User&apos;,on_delete=models.CASCADE)</span><br></pre></td></tr></table></figure>
<h1 id="时区"><a href="#时区" class="headerlink" title="时区"></a>时区</h1><p>​    当setting.py中USE_TZ = False, 则关闭了时区功能, 默认为当前时区</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">存:</span><br><span class="line">	1. </span><br><span class="line">		models.DateTimeField(auto_now_add=True), 在创建数据条目时生成, 此后无法更改 </span><br><span class="line">		</span><br><span class="line">	或</span><br><span class="line">	</span><br><span class="line">	2. </span><br><span class="line">		models.DateTimeField(default=None, null=True), 创建数据条目时设为null, 此后手动修改</span><br><span class="line">		get_delivery.delivery_complishDate = strftime(&apos;%Y-%m-%d %H:%M:%S&apos;, localtime())</span><br><span class="line">取: </span><br><span class="line">	get_delivery.delivery_complishDate.strftime(&apos;%Y-%m-%d %H:%M:%S&apos;)</span><br></pre></td></tr></table></figure>
<h1 id="Admin"><a href="#Admin" class="headerlink" title="Admin"></a>Admin</h1><p>​    数据库管理界面</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">1. 创建超级用户</span><br><span class="line">	python manage.py createsuperuser</span><br><span class="line">	</span><br><span class="line"></span><br><span class="line">2. admin入口</span><br><span class="line">	localhost:8000/admin</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">3. 为了管理当前应用的数据表, 在admin.py中</span><br><span class="line">	from blog.models import Test</span><br><span class="line">	</span><br><span class="line">	admin.site.register(Test)</span><br></pre></td></tr></table></figure>
<h2 id="连接MySQL"><a href="#连接MySQL" class="headerlink" title="连接MySQL"></a>连接MySQL</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">1. 对于python3, 安装数据库驱动pymysql</span><br><span class="line">	pip install pymysql</span><br><span class="line">	</span><br><span class="line"></span><br><span class="line">2. 在根目录的_init_.py添加</span><br><span class="line">	import pymysql</span><br><span class="line">	pymysql.install_as_MySQLdb()</span><br><span class="line">	</span><br><span class="line"></span><br><span class="line">3. 更改settings.py的DATABASES</span><br><span class="line">	DATABASES = &#123;</span><br><span class="line">        &apos;default&apos;: &#123;</span><br><span class="line">            &apos;ENGINE&apos;: &apos;django.db.backends.mysql&apos;,</span><br><span class="line">            &apos;NAME&apos;: &apos;django_mysql&apos;,		# 数据库名</span><br><span class="line">            &apos;USER&apos;: &apos;root&apos;,</span><br><span class="line">            &apos;PASSWORD&apos;: &apos;123456&apos;,</span><br><span class="line">            &apos;HOST&apos;: &apos;127.0.0.1&apos;,</span><br><span class="line">            &apos;PORT&apos;: &apos;3306&apos;,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">4. 在使用makemeigrations生成数据表前, 手动创建数据库django_mysql</span><br><span class="line"></span><br><span class="line">	(1) 进入MySQL Command Line</span><br><span class="line"></span><br><span class="line">	(2)</span><br><span class="line">		mysql&gt; create database django_mysql;</span><br><span class="line">		Query OK, 1 row affected (0.01 sec)</span><br><span class="line">		</span><br><span class="line">		</span><br><span class="line">		MYSQL语法补充: </span><br><span class="line">			1. 查看所有数据库 show databases;</span><br><span class="line">			2. 进入数据库 	use 数据库名;</span><br><span class="line">			3. 删除数据库 	drop database 数据库名;</span><br><span class="line">			4. 查看所有数据表 show tables;</span><br><span class="line">			5. 查看指定数据表 select * from 数据表名</span><br><span class="line">			6. 删除数据表	drop table 数据表名</span><br><span class="line">		</span><br><span class="line"></span><br><span class="line">5. </span><br><span class="line">	python manage.py makemigrations</span><br><span class="line">	python manage.py migrate</span><br><span class="line">	</span><br><span class="line"></span><br><span class="line">6. </span><br><span class="line">	mysql&gt; use django_mysqls;</span><br><span class="line">	mysql&gt; show tables</span><br><span class="line">	</span><br><span class="line">	此时能看到生成的数据表</span><br></pre></td></tr></table></figure>
<h2 id="Session"><a href="#Session" class="headerlink" title="Session"></a>Session</h2><h3 id="Session原理"><a href="#Session原理" class="headerlink" title="Session原理"></a>Session原理</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">用户登录:</span><br><span class="line">	1. 服务器生成一个JSON&#123;&quot;sessionid&quot;: 随机字符串&#125;, 并设置session[&apos;login&apos;] = True</span><br><span class="line">	2. 生成的JSON通过cookie返回给前端, 前端从cookie中获取到随机字符串</span><br><span class="line">	3. 后端将&#123;&quot;sessionid&quot;: 随机字符串, &quot;login&quot;: True&#125;保存到服务器的数据库中</span><br><span class="line">	</span><br><span class="line"></span><br><span class="line">用户访问:</span><br><span class="line">	1. 在发送的请求头中设置cookie, 并将&#123;&quot;sessionid&quot;: 随机字符串&#125;放入cookie中. 服务器凭借该随机字符串, 在服务器的数据库中找到对应的条目, 再查看login</span><br><span class="line">	2. 根据session[&apos;login&apos;]判断是否登录</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">用户退出:</span><br><span class="line">	1. 服务器在数据库中删除对应条目</span><br></pre></td></tr></table></figure>
<h3 id="Session的弊端"><a href="#Session的弊端" class="headerlink" title="Session的弊端"></a>Session的弊端</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1. 当一台电脑, 有多个用户登录时, 前端只会保存最新登录用户的sessionid, 即后登录用户会覆盖前一个用户的登录状态</span><br><span class="line"></span><br><span class="line">2. 当一个用户, 在多台电脑时. 当用户在电脑A登录, 返回的sessionid保存在电脑A; 若用户要在电脑B登录, 得重新登录</span><br></pre></td></tr></table></figure>
<h3 id="Django的session"><a href="#Django的session" class="headerlink" title="Django的session"></a>Django的session</h3><ul>
<li>很多细节, 比如: cookie, 生成随机字符串, 将session保存在服务器数据库, 通过随机字符串从数据库中获取对应的session这些都不用自己实现</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">1. 登录</span><br><span class="line">	request.session[&apos;login&apos;] = True</span><br><span class="line">	request.session.set_expiry(datatiem类型)		# session在datatime时间后自动失效</span><br><span class="line"></span><br><span class="line">2. 访问其他页面</span><br><span class="line">	</span><br><span class="line">	若request.session.get(&apos;login&apos;, None) == True, 则访问成功		# None表示默认值</span><br><span class="line">	否则, 需要登录</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">3. 登出</span><br><span class="line">	del request.session[&apos;login&apos;]</span><br></pre></td></tr></table></figure>
<h2 id="CSRF"><a href="#CSRF" class="headerlink" title="CSRF"></a>CSRF</h2><p>​    跨域请求伪造</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">		①用户正常登录A银行网站,</span><br><span class="line"></span><br><span class="line">        ②A网站返回cookie信息给用户,浏览器保存cookie信息</span><br><span class="line"></span><br><span class="line">        ③在A网站没有退出登录的情况下(或者说cookie信息没过期), 登录了恶意网站B</span><br><span class="line"></span><br><span class="line">        ④恶意网站B,提前准备好转账表单或者其它请求 ,将其隐藏. 把提交到A网站的按钮设置为一个&quot;领取优惠券&quot;的图片链接.用户 点击链接</span><br><span class="line"></span><br><span class="line">        ⑤在用户主观未知的情况下,访问A网站,此时浏览器会自动携带cookie信息</span><br><span class="line"></span><br><span class="line">        ⑥A网站识别到cookie信息,默认为是用户本人做出的请求,根据请求做出相应的操作.</span><br><span class="line"></span><br><span class="line">        ⑦用户收到损失.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">防范原理:</span><br><span class="line">	登录时生成一个csrftoken放在cookie中，前端从cookie中取出该csrftoken并保存. </span><br><span class="line">	当用户再次向服务器发送请求时, 服务器会对比cookie和前端发送的请求头中的csrftoken, 若一样证明是用户操作.</span><br><span class="line">    对于hacker, 即使他获取了cookie, 但是他无法从cookie中取出csrftoken(加密), 因此他不能在请求中附带上csrftoken</span><br></pre></td></tr></table></figure>
<h3 id="django下csrf验证"><a href="#django下csrf验证" class="headerlink" title="django下csrf验证"></a>django下csrf验证</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">默认是全局开启的, 即对于所有路由函数都需要CSRF认证. 对于不需要CSRF认证的函数, 加上@csrf_exempt</span><br><span class="line"></span><br><span class="line">from django.views.decorators.csrf import csrf_exempt</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">0. </span><br><span class="line">	对于登录以及登录之前的操作, 例如注册, 使用@csrf_exempt, 不使用csrf验证</span><br><span class="line"></span><br><span class="line">1. </span><br><span class="line">	在登录函数, 调用get_token(request), 在cookie中设置csrftoken</span><br><span class="line">	</span><br><span class="line">	from django.middleware.csrf import get_token</span><br><span class="line">	</span><br><span class="line">2. </span><br><span class="line">	对于登录后的操作, 前端需要传递csrftoken(和传递sessionid一样)</span><br></pre></td></tr></table></figure>
<h2 id="redis数据库"><a href="#redis数据库" class="headerlink" title="redis数据库"></a>redis数据库</h2><h3 id="mysql和redis的区别"><a href="#mysql和redis的区别" class="headerlink" title="mysql和redis的区别"></a>mysql和redis的区别</h3><ul>
<li><p>mysql: 关系型数据库, 保存数据表; 持久性数据库, 数据保存在硬盘里, 读取速度较慢</p>
</li>
<li><p>redis: 非关系型数据库,  将保存键值对; 非持久性数据库,  数据保存在I/O缓存中, 读取速度较快</p>
</li>
</ul>
<h3 id="运行redis"><a href="#运行redis" class="headerlink" title="运行redis"></a>运行redis</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">1. 注册Redis服务</span><br><span class="line"></span><br><span class="line">	在D:\WorkEnvironment\Redis下输入</span><br><span class="line">	</span><br><span class="line">	&gt;redis-server.exe --service-install redis.windows.conf</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">2. 开启Redis服务</span><br><span class="line"></span><br><span class="line">	&gt;redis-server --service-start</span><br><span class="line">	</span><br><span class="line">3. 关闭Redis服务</span><br><span class="line">	</span><br><span class="line">	&gt;redis-server --service-stop</span><br></pre></td></tr></table></figure>
<h3 id="django配置redis"><a href="#django配置redis" class="headerlink" title="django配置redis"></a>django配置redis</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">1. </span><br><span class="line">	pip install django-redis</span><br><span class="line">	</span><br><span class="line">2. </span><br><span class="line">	在setting.py中加入</span><br><span class="line">	</span><br><span class="line">	CACHES = &#123;</span><br><span class="line">        &quot;default&quot;: &#123;</span><br><span class="line">            &quot;BACKEND&quot;: &quot;django_redis.cache.RedisCache&quot;,</span><br><span class="line">            &quot;LOCATION&quot;: &quot;redis://127.0.0.1:6379/1&quot;,</span><br><span class="line">            &quot;OPTIONS&quot;: &#123;</span><br><span class="line">               &quot;CLIENT_CLASS&quot;: &quot;django_redis.client.DefaultClient&quot;,</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h3 id="用redis保存-session"><a href="#用redis保存-session" class="headerlink" title="用redis保存 session"></a>用redis保存 session</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">在setting.py中加入</span><br><span class="line"></span><br><span class="line">SESSION_ENGINE = &quot;django.contrib.sessions.backends.cache&quot;</span><br><span class="line">SESSION_CACHE_ALIAS = &quot;default&quot;</span><br></pre></td></tr></table></figure>
<h3 id="redis缓存数据"><a href="#redis缓存数据" class="headerlink" title="redis缓存数据"></a>redis缓存数据</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">from django.core.cache import cache</span><br><span class="line"># 缓存中存储数据</span><br><span class="line">cache.set(key, value, timeout=..)</span><br><span class="line"># 缓存中读取数据</span><br><span class="line">v = cache.get(key)</span><br></pre></td></tr></table></figure>
<h2 id="import机制"><a href="#import机制" class="headerlink" title="import机制"></a>import机制</h2><p><a href="https://blog.csdn.net/qq_28072715/article/details/80939699" target="_blank" rel="noopener">https://blog.csdn.net/qq_28072715/article/details/80939699</a></p>
<h2 id="virtualenv"><a href="#virtualenv" class="headerlink" title="virtualenv"></a>virtualenv</h2><p>​    防止不同项目之间的依赖冲突. 比如项目A用到MySQL1.0, 项目B用到MySQL2.0, 会产生冲突, 因此需要通过virtualenv给每个项目创建一个虚拟的环境, 环境之间是隔离的</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">1. 安装virtualenv</span><br><span class="line"></span><br><span class="line">	pip install virtualenv </span><br><span class="line">	</span><br><span class="line">2. 创建虚拟环境</span><br><span class="line"></span><br><span class="line">	virtualenv 环境名(例如test)</span><br><span class="line"></span><br><span class="line">3. 激活虚拟环境</span><br><span class="line">	</span><br><span class="line">	进入test/Scripts, 输入activate, 然后会发现命令行前面带有(test)</span><br><span class="line"></span><br><span class="line">4. 退出虚拟环境</span><br><span class="line"></span><br><span class="line">	进入test/Scripts, 输入deactivate</span><br></pre></td></tr></table></figure>
<h2 id="Django单元测试test"><a href="#Django单元测试test" class="headerlink" title="Django单元测试test"></a>Django单元测试test</h2><p>会创建一个模拟数据库, 在测试完后删除该数据库</p>
<h3 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">1.</span><br><span class="line"></span><br><span class="line">    # test.py</span><br><span class="line">    class AuthorTestCase(TestCase):</span><br><span class="line"></span><br><span class="line">        # 执行每个test_前, 都会执行一次setUp</span><br><span class="line">        def setUp(self):</span><br><span class="line">            print(&apos;start)</span><br><span class="line"></span><br><span class="line">        # 测试结束的收尾工作</span><br><span class="line">        def tearDown(self):</span><br><span class="line">            print(&apos;end&apos;)</span><br><span class="line"></span><br><span class="line">        # 自己定义的测试方法，必须以&quot;test_&quot;开头. </span><br><span class="line">        def test_insert_data(self):</span><br><span class="line">            print(&apos;test&apos;)</span><br><span class="line">            </span><br><span class="line">        每个test之间的顺序是不确定的, 因此涉及到数据库读写顺序的问题, 则无法测试</span><br><span class="line">        </span><br><span class="line">2. </span><br><span class="line">	&gt;python manage.py test</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">1. 测试函数</span><br><span class="line">	from .views import myTest</span><br><span class="line"></span><br><span class="line">	def test_func(self):</span><br><span class="line">		self.assertEqual(myTest.func(), True)		//	调用函数, 预期值</span><br><span class="line"></span><br><span class="line">2. 测试HTTP请求</span><br><span class="line">	    # 测试密码登录功能</span><br><span class="line">    def test_user_password_session(self):</span><br><span class="line">        post_data = &#123;</span><br><span class="line">            &apos;user_phone&apos;: &apos;15626259034&apos;,</span><br><span class="line">            &apos;user_password&apos;: &apos;123456&apos;</span><br><span class="line">        &#125;</span><br><span class="line">        response = self.client.post(&apos;/user/password/session&apos;, data=post_data, content_type=&apos;application/json&apos;)		# 不设置header则默认传递的是表单</span><br><span class="line">        __ok__ = &#123;</span><br><span class="line">            &apos;code&apos;: 200,</span><br><span class="line">            &apos;message&apos;: &apos;OK&apos;,</span><br><span class="line">            &apos;data&apos;: &#123;</span><br><span class="line">                &apos;user_fillln&apos;: 0</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        self.assertEqual(response.json(), __ok__)</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://utilcoder.com/系统分析与设计/系统分析与设计/HW3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="CoderUtil">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Code">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/系统分析与设计/系统分析与设计/HW3/" itemprop="url">HW3</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-04-22T15:00:03+08:00">
                2019-04-22
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/系统分析与设计/" itemprop="url" rel="index">
                    <span itemprop="name">系统分析与设计</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="简答题"><a href="#简答题" class="headerlink" title="简答题"></a>简答题</h1><h3 id="简述瀑布模型、增量模型、螺旋模型，并分析优缺点-从项目特点、风险特征、人力资源利用角度思考"><a href="#简述瀑布模型、增量模型、螺旋模型，并分析优缺点-从项目特点、风险特征、人力资源利用角度思考" class="headerlink" title="简述瀑布模型、增量模型、螺旋模型，并分析优缺点(从项目特点、风险特征、人力资源利用角度思考)"></a>简述瀑布模型、增量模型、螺旋模型，并分析优缺点(从项目特点、风险特征、人力资源利用角度思考)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">瀑布模型: </span><br><span class="line">	将软件生存周期的各项活动规定为按固定顺序而连接的若干阶段工作，形如瀑布流水. 下一阶段的工作对象依赖于上一阶段的输出</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">增量模型: </span><br><span class="line">	把软件系统模块化，按照重要程度分批次地分析、设计、编码和测试这些模块，之后根据需求优先级逐步迭代实现后续需求。</span><br><span class="line">	</span><br><span class="line"></span><br><span class="line">螺旋模型: </span><br><span class="line">	兼顾了快速原型的迭代的特征以及瀑布模型的系统化与严格监控. 同时, 引入了其他模型不具备的风险分析技术, 在每个阶段都进行风险评估</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th style="text-align:center">模型</th>
<th style="text-align:center">优点</th>
<th style="text-align:center">缺点</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">瀑布模型</td>
<td style="text-align:center">模型复杂性较低</td>
<td style="text-align:center">风险控制能力较弱; 人力资源利用率较低</td>
</tr>
<tr>
<td style="text-align:center">增量模型</td>
<td style="text-align:center">人力资源利用率比较高; 开发风险较低</td>
<td style="text-align:center">模型扩展性较差, 迭代粒度需要合理设计</td>
</tr>
<tr>
<td style="text-align:center">螺旋模型</td>
<td style="text-align:center">人力资源利用率比较高; 开发风险较低</td>
<td style="text-align:center">风险分析提高成本; 迭代次数需要合理设计</td>
</tr>
</tbody>
</table>
<h3 id="简述统一过程三大特点，与面向对象的方法有什么关系？"><a href="#简述统一过程三大特点，与面向对象的方法有什么关系？" class="headerlink" title="简述统一过程三大特点，与面向对象的方法有什么关系？"></a>简述统一过程三大特点，与面向对象的方法有什么关系？</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">统一过程的三大特点:</span><br><span class="line">	1. 软件开发由用例驱动</span><br><span class="line">	2. 软件开发以架构设计为中心</span><br><span class="line">	3. 软件开发是一个迭代和增量的过程</span><br><span class="line">	</span><br><span class="line"></span><br><span class="line">统一过程与面向对象方法的关系: </span><br><span class="line">	统一过程是一种基于UML的、以构架为中心的、用例驱动与风险驱动相结合的迭代增量过程。它将软件开发过程要素和软件工件要素整合在统一的软件工程框架中，是一个面向对象的程序开发方法论。</span><br></pre></td></tr></table></figure>
<h3 id="简述统一过程四个阶段的划分准则是什么？每个阶段关键的里程碑是什么？"><a href="#简述统一过程四个阶段的划分准则是什么？每个阶段关键的里程碑是什么？" class="headerlink" title="简述统一过程四个阶段的划分准则是什么？每个阶段关键的里程碑是什么？"></a>简述统一过程四个阶段的划分准则是什么？每个阶段关键的里程碑是什么？</h3><table>
<thead>
<tr>
<th style="text-align:center">阶段</th>
<th style="text-align:center">划分准则</th>
<th style="text-align:center">里程碑</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">初始阶段</td>
<td style="text-align:center">系统建立商业案例并确定项目的边界</td>
<td style="text-align:center">生命周期目标里程碑</td>
</tr>
<tr>
<td style="text-align:center">细化阶段</td>
<td style="text-align:center">分析问题领域，建立健全的体系结构基础并安排好开发流程</td>
<td style="text-align:center">生命周期结构里程碑</td>
</tr>
<tr>
<td style="text-align:center">构造阶段</td>
<td style="text-align:center">完成开发所有应用程序功能、集成和测试</td>
<td style="text-align:center">初始功能里程碑</td>
</tr>
<tr>
<td style="text-align:center">交付阶段</td>
<td style="text-align:center">确保软件对用户可用</td>
<td style="text-align:center">产品发布里程碑</td>
</tr>
</tbody>
</table>
<h3 id="软件企业为什么能按固定节奏生产、固定周期发布软件产品？它给企业项目管理带来哪些好处？"><a href="#软件企业为什么能按固定节奏生产、固定周期发布软件产品？它给企业项目管理带来哪些好处？" class="headerlink" title="软件企业为什么能按固定节奏生产、固定周期发布软件产品？它给企业项目管理带来哪些好处？"></a>软件企业为什么能按固定节奏生产、固定周期发布软件产品？它给企业项目管理带来哪些好处？</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">原因:</span><br><span class="line">	软件企业需要根据产品需求，选择正确的开发模型以及软件开发、项目迭代的管理方法，从而能稳定控制对项目范围、费用、时间、质量、人力资源、风险、采购等方面的风险。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">好处:</span><br><span class="line">	这提升团队的软件开发效率，从而确保项目按照预定的范围、成本、进度和质量顺利完成。</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/12/">12</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.jpg"
                alt="CoderUtil" />
            
              <p class="site-author-name" itemprop="name">CoderUtil</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">117</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">17</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/CoderUtil" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:853130236@qq.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                友情链接
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="http://icytown.com/" title="Mega Show's Blog" target="_blank">Mega Show's Blog</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">CoderUtil</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
