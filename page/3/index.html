<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta property="og:type" content="website">
<meta property="og:title" content="Code">
<meta property="og:url" content="http://utilcoder.com/page/3/index.html">
<meta property="og:site_name" content="Code">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Code">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://utilcoder.com/page/3/"/>





  <title>Code</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Code</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://utilcoder.com/数据库/数据库/第五章 SQL查询/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Util">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Code">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/数据库/数据库/第五章 SQL查询/" itemprop="url">第五章 SQL查询</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-07T20:28:45+08:00">
                2018-04-07
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/数据库/" itemprop="url" rel="index">
                    <span itemprop="name">数据库</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="SELECT的格式"><a href="#SELECT的格式" class="headerlink" title="SELECT的格式"></a>SELECT的格式</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT [DISTINCT] select-list		//	默认结果包含重复的记录, DISTINCT指搜索的记录不能重复</span><br><span class="line">FROM from-list</span><br><span class="line">WHERE qualifications</span><br></pre></td></tr></table></figure>
<ul>
<li>选出拥有103号船的水手的名字</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT S.sname</span><br><span class="line">FROM Sailors S, Reserve R</span><br><span class="line">WHERE S.sid = R.sid AND R.bid = 103		//	相当于叉积</span><br></pre></td></tr></table></figure>
<h2 id="UNION-INTERSECT-EXCEPT"><a href="#UNION-INTERSECT-EXCEPT" class="headerlink" title="UNION, INTERSECT, EXCEPT"></a>UNION, INTERSECT, EXCEPT</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT S.sname</span><br><span class="line">FROM Sailors S, Reserve R, Boats B</span><br><span class="line">WHERE S.sid = R.sid AND R.bid = B.bid AND B.color = &apos;red&apos;</span><br><span class="line">(UNION / INTERSECT / EXCEPT)		//	并/交/差集</span><br><span class="line">SELECT S.sname</span><br><span class="line">FROM Sailors S, Reserve R, Boats B</span><br><span class="line">WHERE S.sid = R.sid AND R.bid = B.bid AND B.color = &apos;green&apos;</span><br></pre></td></tr></table></figure>
<h2 id="Like"><a href="#Like" class="headerlink" title="Like, %, _"></a>Like, %, _</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">用于字符的匹配:</span><br><span class="line">	%匹配任意个字符</span><br><span class="line">	_匹配一个字符</span><br><span class="line"></span><br><span class="line">SELECT S.age</span><br><span class="line">FROM Sailors S</span><br><span class="line">WHERE S.sname LIKE &apos;B_%B&apos;		//	名字以B开头和结尾, 且中间至少有一个字母</span><br></pre></td></tr></table></figure>
<h2 id="嵌套查询"><a href="#嵌套查询" class="headerlink" title="嵌套查询"></a>嵌套查询</h2><ul>
<li>选出拥有103号船的水手的名字</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">SELECT S.sname</span><br><span class="line">FROM Sailors S</span><br><span class="line">WHERE S.sid IN (SELECT R.sid		//	IN用于检测一个值是否在给定的集合中</span><br><span class="line">				FROM Reserve R</span><br><span class="line">				WHERE R.bid = 103)</span><br><span class="line">				</span><br><span class="line">或</span><br><span class="line">SELECT S.sname</span><br><span class="line">FROM Sailors S</span><br><span class="line">WHERE EXISTS (SELECT *</span><br><span class="line">			FROM Reserve R</span><br><span class="line">			WHERE R.bid = 103 AND R.sid = S.sid)</span><br></pre></td></tr></table></figure>
<h2 id="嵌套查询的集合比较"><a href="#嵌套查询的集合比较" class="headerlink" title="嵌套查询的集合比较"></a>嵌套查询的集合比较</h2><ul>
<li>选出等级最高的水手的id</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT S.sid</span><br><span class="line">FROM Sailors S</span><br><span class="line">WHERE S.rating &gt;= ALL (SELECT S2.rating		//	ANY表示比集合中的任意一个元素大, ALL表示比集合中的所有元素都大</span><br><span class="line">					FROM Sailors S2)</span><br></pre></td></tr></table></figure>
<h2 id="聚集操作符"><a href="#聚集操作符" class="headerlink" title="聚集操作符"></a>聚集操作符</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">1. COUNT([DISTINCT] select-list)</span><br><span class="line"></span><br><span class="line">2. SUM([DISTINCT] select-list)</span><br><span class="line"></span><br><span class="line">3. AVG([DISTINCT] select-list)</span><br><span class="line"></span><br><span class="line">4. MAX(select-list)</span><br><span class="line"></span><br><span class="line">5. MIN(select-list)</span><br></pre></td></tr></table></figure>
<ul>
<li>选出最年长的水手的名字和年龄</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT S.sname, S.age</span><br><span class="line">FROM Sailors S</span><br><span class="line">WHERE S.age = (SELECT MAX(S2.age) FROM Sailors S2)</span><br><span class="line"></span><br><span class="line">注意: 聚集操作符和普通字段不能同时获取</span><br><span class="line">SELECT S.sname, MAX(S.age)		//	错误</span><br><span class="line">FROM Sailors S</span><br></pre></td></tr></table></figure>
<h2 id="从一个SELECT的结果中SELECT信息"><a href="#从一个SELECT的结果中SELECT信息" class="headerlink" title="从一个SELECT的结果中SELECT信息"></a>从一个SELECT的结果中SELECT信息</h2><ul>
<li>选出平均年龄在所有等级中最低的那些等级</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT Temp.rating, Temp.avgage</span><br><span class="line">FROM (SELECT S.rating, AVG(S.age) AS avgage,</span><br><span class="line">		FROM Sailors S</span><br><span class="line">		GROUP BY S.rating) AS Temp</span><br><span class="line">WHERE Temp.avagage = (SELECT MIN (Temp.avgage) FROM Temp)</span><br></pre></td></tr></table></figure>
<h2 id="GROUP-BY和HAVING"><a href="#GROUP-BY和HAVING" class="headerlink" title="GROUP BY和HAVING"></a>GROUP BY和HAVING</h2><ul>
<li>GROUP BY用于分组</li>
</ul>
<ul>
<li>HAVING用于指定分组的条件</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT [DISTINCT] select-list</span><br><span class="line">FROM from-list</span><br><span class="line">WHERE qualification</span><br><span class="line">GROUP BY grouping-list</span><br><span class="line">HAVING group-qualication</span><br><span class="line"></span><br><span class="line">顺序是先通过WHERE获取满足条件的记录, 然后通过GROUP BY分组, 再通过HAVING去掉不符合条件的分组, 最后选出select-list</span><br></pre></td></tr></table></figure>
<ul>
<li>对于每个等级, 若至少有两个水手成年, 找出成年水手中的最小年龄</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT MIN(S.age)</span><br><span class="line">FROM Sailors S</span><br><span class="line">WHERE S.age &gt;= 18</span><br><span class="line">GROUP BY S.rating</span><br><span class="line">HAVING COUNT(*) &gt; 1</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://utilcoder.com/数据库/数据库/存储与索引概述/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Util">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Code">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/数据库/数据库/存储与索引概述/" itemprop="url">第八章 存储与索引概述</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-07T19:32:54+08:00">
                2018-04-07
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/数据库/" itemprop="url" rel="index">
                    <span itemprop="name">数据库</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="页"><a href="#页" class="headerlink" title="页"></a>页</h2><ul>
<li>数据库中信息读写的单位</li>
</ul>
<h2 id="文件"><a href="#文件" class="headerlink" title="文件"></a>文件</h2><ul>
<li>数据库在物理逻辑上由多个文件组成. 文件中存有很多记录</li>
</ul>
<h2 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h2><ul>
<li>对表中一列或多列的值进行排序的一种数据结构, 有助于加快检索信息. </li>
</ul>
<ul>
<li>索引是一种数据结构, 比如哈希索引和B+树索引</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">对于 SELECT * FROM TABLE t WHERE t.id = 100</span><br><span class="line"></span><br><span class="line">若不使用索引, 需要对整张表进行检索</span><br><span class="line">而使用索引, 可以快速进行定位</span><br></pre></td></tr></table></figure>
<h2 id="搜索码"><a href="#搜索码" class="headerlink" title="搜索码"></a>搜索码</h2><ul>
<li>索引对应的字段或字段集合的名称</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">比如对字段age进行索引, 则搜索码为age. 按&lt;time, age&gt;进行索引, 则搜索码为&lt;time, age&gt;</span><br></pre></td></tr></table></figure>
<h2 id="数据项"><a href="#数据项" class="headerlink" title="数据项"></a>数据项</h2><ul>
<li>存储在索引文件中的记录</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">比如记录在表中为:</span><br><span class="line">| id | name |</span><br><span class="line">| 1  | Tom  |</span><br><span class="line">| 2  | Marry|</span><br><span class="line">| 3  | Jim  |</span><br><span class="line"></span><br><span class="line">以结构为B+树的id索引的第一种形式为例:</span><br><span class="line">	[2]</span><br><span class="line">    /  \</span><br><span class="line">  [1]  [3]</span><br><span class="line">  </span><br><span class="line">这个称为数据项</span><br></pre></td></tr></table></figure>
<ul>
<li>数据项有三种形式: </li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">搜索码为k的数据项记作k*</span><br><span class="line"></span><br><span class="line">1. 数据项为k*</span><br><span class="line"></span><br><span class="line">2. 数据项为&lt;k, rid&gt;对, rid是搜索码为k的记录的id</span><br><span class="line"></span><br><span class="line">3. 数据项为&lt;k, rid-list&gt;对, rid-list是搜索码为k的所有记录的id的链表</span><br></pre></td></tr></table></figure>
<h2 id="唯一索引"><a href="#唯一索引" class="headerlink" title="唯一索引"></a>唯一索引</h2><p>​    索引字段没有重复的字段值</p>
<h2 id="主索引与次级索引"><a href="#主索引与次级索引" class="headerlink" title="主索引与次级索引"></a>主索引与次级索引</h2><p>​    主索引: 主键字段的索引. 比如字段id为主键, 它的索引为主索引</p>
<p>​    次级索引: 不包含主键字段的索引</p>
<h2 id="聚簇索引与非聚簇索引"><a href="#聚簇索引与非聚簇索引" class="headerlink" title="聚簇索引与非聚簇索引"></a>聚簇索引与非聚簇索引</h2><ul>
<li>聚簇索引: 索引的数据项顺序与记录的顺序相同</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">比如记录在表中为:</span><br><span class="line">| id | name |</span><br><span class="line">| 2  | Marry|</span><br><span class="line">| 1  | Tom  |</span><br><span class="line">| 3  | Jim  |</span><br><span class="line"></span><br><span class="line">以结构为B+树的id索引的第一种形式为例:</span><br><span class="line">	[2]</span><br><span class="line">    /  \</span><br><span class="line">  [1]  [3]</span><br></pre></td></tr></table></figure>
<ul>
<li>非聚簇索引: 索引的数据项顺序与记录的顺序不同</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://utilcoder.com/汇编/汇编/第五章 中断与端口/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Util">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Code">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/汇编/汇编/第五章 中断与端口/" itemprop="url">第五章 中断与端口</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-03T20:30:30+08:00">
                2018-04-03
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/汇编/" itemprop="url" rel="index">
                    <span itemprop="name">汇编</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="中断"><a href="#中断" class="headerlink" title="中断"></a>中断</h1><h2 id="CPU常见的内部中断"><a href="#CPU常见的内部中断" class="headerlink" title="CPU常见的内部中断"></a>CPU常见的内部中断</h2><table>
<thead>
<tr>
<th style="text-align:center">中断类型</th>
<th style="text-align:center">中断码(表示中断类型)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">除法错误</td>
<td style="text-align:center">0</td>
</tr>
<tr>
<td style="text-align:center">单步执行</td>
<td style="text-align:center">1</td>
</tr>
<tr>
<td style="text-align:center">执行into指令</td>
<td style="text-align:center">4</td>
</tr>
<tr>
<td style="text-align:center">执行int n指令</td>
<td style="text-align:center">n</td>
</tr>
</tbody>
</table>
<h2 id="中断向量"><a href="#中断向量" class="headerlink" title="中断向量"></a>中断向量</h2><ul>
<li>中断向量: 中断处理程序的入口</li>
</ul>
<ul>
<li><p>中断向量表</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">将中断向量保存在表中, 用中断码作为表序号. 将表保存在内存的低地址, 表的每个项大小为2个字, 高地址的字保存段地址, 低地址的字保存低地址</span><br><span class="line"></span><br><span class="line">当中断发生, 根据中断向量表找到对应的中断向量, 根据中断向量跳转到对应的中断处理程序</span><br></pre></td></tr></table></figure>
<p>​</p>
<p>​</p>
</li>
</ul>
<h2 id="中断过程"><a href="#中断过程" class="headerlink" title="中断过程"></a>中断过程</h2><ul>
<li>中断过程: 中断发生到进入中断处理程序的过程</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">1. 从中断信息中获取中断码N</span><br><span class="line"></span><br><span class="line">2. 标志寄存器的值入栈(中断过程可能改变PSW的值)						 pushf</span><br><span class="line"></span><br><span class="line">3. 设置PSW的TF与IF位为0						 				  TF = 0, IF = 0</span><br><span class="line"></span><br><span class="line">4. CS, IP入栈													push CS, push IP</span><br><span class="line"></span><br><span class="line">5. 从内存地址为N * 4的地址读取中断向量的IP, 4 * N + 2读取CS		   IP = 4 * N, CS = 4 * N + 2</span><br></pre></td></tr></table></figure>
<h2 id="中断处理程序"><a href="#中断处理程序" class="headerlink" title="中断处理程序"></a>中断处理程序</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1. 保存用到的寄存器</span><br><span class="line"></span><br><span class="line">2. 处理中断的程序</span><br><span class="line"></span><br><span class="line">3. 恢复用到的寄存器</span><br><span class="line"></span><br><span class="line">4. iret返回(即pop IP, pop CS, popf)</span><br></pre></td></tr></table></figure>
<h3 id="除法错误时显示overflow的中断处理程序"><a href="#除法错误时显示overflow的中断处理程序" class="headerlink" title="除法错误时显示overflow的中断处理程序"></a>除法错误时显示overflow的中断处理程序</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">assume cs:code</span><br><span class="line"></span><br><span class="line">code segment</span><br><span class="line"></span><br><span class="line">		/*</span><br><span class="line">			将中断处理程序安装到内存地址为0000:02000</span><br><span class="line">		*/</span><br><span class="line">start:	mov ax, cs			//	设置ds:si指向源地址</span><br><span class="line">		mov ds, ax			</span><br><span class="line">		mov si, offset do0</span><br><span class="line">		mov ax, 0</span><br><span class="line">		mov es, ax</span><br><span class="line">		mov di, 200h		//	设置es:di指向目的地址</span><br><span class="line">		mov cx, offset do0end - offset do0		//	设置cx为传输长度</span><br><span class="line">		cld				   //	设置传输方向为正</span><br><span class="line">		rep movsb		    	</span><br><span class="line">		</span><br><span class="line">		/*</span><br><span class="line">			在中断向量表中设置中断向量, 中断向量的值为0000:0200</span><br><span class="line">		*/</span><br><span class="line">		mov ax, 0</span><br><span class="line">		mov es, ax</span><br><span class="line">		mov word ptr es:[0 * 4], 200h</span><br><span class="line">		mov word ptr es:[0 * 4 + 2], 0</span><br><span class="line">		</span><br><span class="line">		mov ax, 4c00h</span><br><span class="line">		int 21h</span><br><span class="line">		</span><br><span class="line">		/*</span><br><span class="line">			中断处理程序, 用于显示&apos;overflow&apos;</span><br><span class="line">		*/</span><br><span class="line">do0:	jmp short do0start</span><br><span class="line">		db &apos;overflow&apos;		//	将&apos;overflow&apos;一起传输保存起来</span><br><span class="line">		</span><br><span class="line">do0start:</span><br><span class="line">		mov ax, cs</span><br><span class="line">		mov ds, ax</span><br><span class="line">		mov si, 202h			  	//	设置ds:si指向字符串, 因为do0保存在0000:0200, 而jmp shor do0start栈两个字节, 所以db &apos;overflow&apos;的地址为0000:0202</span><br><span class="line">		</span><br><span class="line">		mov ax, 0b800h</span><br><span class="line">		mov es, ax</span><br><span class="line">		mov di, 12 * 160 + 36 * 2	//	设置es:di指向显存</span><br><span class="line">		</span><br><span class="line">		mov cx, 9					//	设置cx为字符串长度</span><br><span class="line">	s:	mov al, [si]</span><br><span class="line">    	mov es:[di], al</span><br><span class="line">    	inc si</span><br><span class="line">    	add di, 2</span><br><span class="line">    	loop s						//	将字符串拷贝到缓存</span><br><span class="line">    	</span><br><span class="line">		iret</span><br><span class="line">		</span><br><span class="line">code ends</span><br><span class="line">end1</span><br></pre></td></tr></table></figure>
<h3 id="int指令"><a href="#int指令" class="headerlink" title="int指令"></a>int指令</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">assume cs:code</span><br><span class="line"></span><br><span class="line">code segment</span><br><span class="line">	start:	int 0	//	执行中断码为0的中断处理程序, 即处理除法错误的中断处理程序</span><br><span class="line">code ends</span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<h1 id="端口"><a href="#端口" class="headerlink" title="端口"></a>端口</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">用ax或al保存从端口读入的数据或保存到端口的数据. 8位用al, 16位用ax</span><br></pre></td></tr></table></figure>
<h2 id="直接端口寻址"><a href="#直接端口寻址" class="headerlink" title="直接端口寻址"></a>直接端口寻址</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">端口地址保存在操作数中, 端口地址为8位:</span><br><span class="line"></span><br><span class="line">    in al, 60h	//	从端口号为60h的端口读入一个字节</span><br><span class="line"></span><br><span class="line">    out 20h, al	//	向端口号为20h的端口写入一个字节</span><br></pre></td></tr></table></figure>
<h2 id="间接端口寻址"><a href="#间接端口寻址" class="headerlink" title="间接端口寻址"></a>间接端口寻址</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">端口地址保存在寄存器中, 端口地址为16位: </span><br><span class="line"></span><br><span class="line">    mov dx, 3f8h</span><br><span class="line">    in al, dx	//	当端口号大于8位, 将端口号放入dx中</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://utilcoder.com/汇编/汇编/第四章 标志寄存器/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Util">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Code">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/汇编/汇编/第四章 标志寄存器/" itemprop="url">第四章 标志寄存器</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-30T12:20:00+08:00">
                2018-03-30
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/汇编/" itemprop="url" rel="index">
                    <span itemprop="name">汇编</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="标志寄存器"><a href="#标志寄存器" class="headerlink" title="标志寄存器"></a>标志寄存器</h1><p><img src="https://CoderUtil.github.io/images/TIM截图20180327124456.png" alt="汇编"></p>
<table>
<thead>
<tr>
<th style="text-align:center">标志位</th>
<th style="text-align:center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">ZF</td>
<td style="text-align:center">执行指令后, 若结果为0, ZF = 1; 结果为1, ZF = 0</td>
</tr>
<tr>
<td style="text-align:center">PF</td>
<td style="text-align:center">执行指令后, 若结果中1的个数为偶数, PF = 1; 1的个数为奇数, PF = 0</td>
</tr>
<tr>
<td style="text-align:center">SF</td>
<td style="text-align:center">执行指令后, 若结果为负, SF = 1; 结果为正, SF = 0</td>
</tr>
<tr>
<td style="text-align:center">CF</td>
<td style="text-align:center">执行指令后, 若进行的是无符号运算, 且最高位向更高位进位或借位(二进制运算), CF = 1</td>
</tr>
<tr>
<td style="text-align:center">OF</td>
<td style="text-align:center">执行指令后, 若进行的是有符号运算, 且溢出, 则OF = 1, 反之OF = 0</td>
</tr>
<tr>
<td style="text-align:center">DF</td>
<td style="text-align:center">串处理指令中, 控制si, di的增减. DF = 1, si、di递增; DF = 0, si、di递减</td>
</tr>
</tbody>
</table>
<h2 id="adc与sbb"><a href="#adc与sbb" class="headerlink" title="adc与sbb"></a>adc与sbb</h2><table>
<thead>
<tr>
<th style="text-align:center">汇编指令</th>
<th style="text-align:center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">adc ax, bx</td>
<td style="text-align:center">ax = ax + bx + CF</td>
</tr>
<tr>
<td style="text-align:center">sbb ax, bx</td>
<td style="text-align:center">ax = ax - bx- CF</td>
</tr>
</tbody>
</table>
<h2 id="cmp"><a href="#cmp" class="headerlink" title="cmp"></a>cmp</h2><p>cmp ax, bx    &lt;=&gt;    执行ax - bx, 不改变ax与bx的值, 目的是改变标志位</p>
<table>
<thead>
<tr>
<th style="text-align:center">比较结果</th>
<th style="text-align:center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">SF = 1， OF = 0</td>
<td style="text-align:center">没有溢出(逻辑上的正负 = 实际结果的正负), ax &lt; bx</td>
</tr>
<tr>
<td style="text-align:center">SF = 1,    OF = 1</td>
<td style="text-align:center">溢出逻辑上的正负 != 实际结果的正负), ax &gt; bx</td>
</tr>
<tr>
<td style="text-align:center">SF = 0,    OF = 1</td>
<td style="text-align:center">…</td>
</tr>
<tr>
<td style="text-align:center">SF = 0,    OF = 0</td>
<td style="text-align:center">…</td>
</tr>
</tbody>
</table>
<h2 id="借助标志位的条件转移指令"><a href="#借助标志位的条件转移指令" class="headerlink" title="借助标志位的条件转移指令"></a>借助标志位的条件转移指令</h2><p>​    搭配cmp使用</p>
<table>
<thead>
<tr>
<th style="text-align:center">汇编指令</th>
<th style="text-align:center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">je 标号</td>
<td style="text-align:center">执行cmp ax, bx后, 若ax = bx, 跳转至标号处</td>
</tr>
<tr>
<td style="text-align:center">jne 标号</td>
<td style="text-align:center">执行cmp ax, bx后, 若ax != bx, 跳转至标号处</td>
</tr>
<tr>
<td style="text-align:center">jb 标号(b表示below)</td>
<td style="text-align:center">执行cmp ax, bx后, 若ax &lt; bx, 跳转至标号处</td>
</tr>
<tr>
<td style="text-align:center">jnb 标号</td>
<td style="text-align:center">执行cmp ax, bx后, 若ax &gt;= bx, 跳转至标号处</td>
</tr>
<tr>
<td style="text-align:center">ja 标号(a表示above)</td>
<td style="text-align:center">执行cmp ax, bx后, 若ax &gt; bx, 跳转至标号处</td>
</tr>
<tr>
<td style="text-align:center">jna 标号</td>
<td style="text-align:center">执行cmp ax, bx后, 若ax &lt;= bx, 跳转至标号处</td>
</tr>
</tbody>
</table>
<h3 id="奇跳转"><a href="#奇跳转" class="headerlink" title="奇跳转"></a>奇跳转</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">        test ax, 11111111B		//	将两个操作数进行与运算, 但是不改变操作数. 通常用于改变标志寄存器</span><br><span class="line">        jp isEven			   //	jp: PF = 1时(结果有偶数个1)跳转; jnp: PF = 0时跳转	</span><br><span class="line"></span><br><span class="line">isEven:</span><br></pre></td></tr></table></figure>
<h2 id="movsb"><a href="#movsb" class="headerlink" title="movsb"></a>movsb</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">movsb等价于:</span><br><span class="line">	1. mov es:[di], byte ptr ds:[si]</span><br><span class="line">	2. 若DF = 0, </span><br><span class="line">		add si, 1</span><br><span class="line">		add di, 1</span><br><span class="line">	   </span><br><span class="line">	   若DF = 1</span><br><span class="line">	     sub si, 1</span><br><span class="line">	     sub di, 1</span><br></pre></td></tr></table></figure>
<h1 id="movsw"><a href="#movsw" class="headerlink" title="movsw"></a>movsw</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">movsw等价于:</span><br><span class="line">	1. mov es:[di], word ptr ds:[si]</span><br><span class="line">	2. 若DF = 0, </span><br><span class="line">		add si, 2</span><br><span class="line">		add di, 2</span><br><span class="line">	   </span><br><span class="line">	   若DF = 1</span><br><span class="line">	     sub si, 2</span><br><span class="line">	     sub di, 2</span><br></pre></td></tr></table></figure>
<h2 id="rep"><a href="#rep" class="headerlink" title="rep"></a>rep</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rep movsb等价于:</span><br><span class="line">	s: movsb</span><br><span class="line">	   loop s</span><br></pre></td></tr></table></figure>
<h2 id="cld-std"><a href="#cld-std" class="headerlink" title="cld, std"></a>cld, std</h2><table>
<thead>
<tr>
<th style="text-align:center">汇编指令</th>
<th style="text-align:center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">cld</td>
<td style="text-align:center">DF = 0</td>
</tr>
<tr>
<td style="text-align:center">std</td>
<td style="text-align:center">DF = 1</td>
</tr>
</tbody>
</table>
<h2 id="内存单元的传送"><a href="#内存单元的传送" class="headerlink" title="内存单元的传送"></a>内存单元的传送</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">assume cs:code, ds:data</span><br><span class="line"></span><br><span class="line">//	将string1, stirng2的传送到string3, string4, 然后输出</span><br><span class="line">data segment </span><br><span class="line">    string1 db &apos;chenxingyu&apos;, 13, 10, &apos;$&apos;	</span><br><span class="line">    string2 db &apos;16340039&apos;, &apos;$&apos;</span><br><span class="line">    string3 db 16 dup (0)</span><br><span class="line">    string4 db 16 dup (0)</span><br><span class="line">data ends</span><br><span class="line"></span><br><span class="line">code segment </span><br><span class="line">start:  mov ax, data </span><br><span class="line">        mov ds, ax </span><br><span class="line">        mov es, ax </span><br><span class="line"></span><br><span class="line">        mov si, offset string1 						//  设置ds, si</span><br><span class="line">        mov di, offset string3						//	设置es, di</span><br><span class="line">        mov cx, offset string2 - offset string1		//	设置cx</span><br><span class="line">        cld											//	设置DF</span><br><span class="line">        rep movsb									//	循环传送</span><br><span class="line"></span><br><span class="line">        mov dx, offset string3		</span><br><span class="line">        mov ah, 9h				 </span><br><span class="line">        int 21h</span><br><span class="line"></span><br><span class="line">        mov si, offset string2 </span><br><span class="line">        mov di, offset string4</span><br><span class="line">        mov cx, offset string3 - offset string2</span><br><span class="line">        cld</span><br><span class="line">        rep movsb</span><br><span class="line"></span><br><span class="line">        mov dx, offset string4		</span><br><span class="line">        mov ah, 9h				 </span><br><span class="line">        int 21h</span><br><span class="line"></span><br><span class="line">        mov ah, 4ch</span><br><span class="line">        int 21h</span><br><span class="line">code ends </span><br><span class="line">end start</span><br></pre></td></tr></table></figure>
<h2 id="pushf与popf"><a href="#pushf与popf" class="headerlink" title="pushf与popf"></a>pushf与popf</h2><table>
<thead>
<tr>
<th style="text-align:center">汇编指令</th>
<th style="text-align:center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">pushf</td>
<td style="text-align:center">将16位的标志寄存器入栈</td>
</tr>
<tr>
<td style="text-align:center">popf</td>
<td style="text-align:center">出栈并将值赋给标志寄存器</td>
</tr>
</tbody>
</table>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://utilcoder.com/汇编/汇编/第三章 转移指令/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Util">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Code">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/汇编/汇编/第三章 转移指令/" itemprop="url">第三章 转移指令</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-30T10:46:31+08:00">
                2018-03-30
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/汇编/" itemprop="url" rel="index">
                    <span itemprop="name">汇编</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="转移指令"><a href="#转移指令" class="headerlink" title="转移指令"></a>转移指令</h1><p><img src="https://CoderUtil.github.io/images/TIM截图20180330105100.png" alt="汇编"></p>
<h2 id="offset"><a href="#offset" class="headerlink" title="offset"></a>offset</h2><p>​    取得标号的偏移地址</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">assume cs:code</span><br><span class="line"></span><br><span class="line">code segment</span><br><span class="line">	start: mov ax, offset start		//	相当于mov ax, 0</span><br><span class="line">	s:     mov ax, offset s			//	相当于mov ax, 3</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure>
<h2 id="jmp"><a href="#jmp" class="headerlink" title="jmp"></a>jmp</h2><table>
<thead>
<tr>
<th style="text-align:center">汇编指令</th>
<th style="text-align:center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">jmp short 标号   (短转移)</td>
<td style="text-align:center">跳转到标号处(即IP = offset 标号)</td>
</tr>
<tr>
<td style="text-align:center">jmp, near ptr 标号   (近转移)</td>
<td style="text-align:center">跳转到标号处</td>
</tr>
<tr>
<td style="text-align:center">jmp far ptr 标号    (段间转移)</td>
<td style="text-align:center">跳转到标号处</td>
</tr>
<tr>
<td style="text-align:center">jmp 16位寄存器</td>
<td style="text-align:center">IP = 16位寄存器的值</td>
</tr>
<tr>
<td style="text-align:center">jmp word ptr 内存单元</td>
<td style="text-align:center">内存单元存放一个字长度的单元, IP = 16位内存单元的值</td>
</tr>
<tr>
<td style="text-align:center">jmp dword ptr 内存单元</td>
<td style="text-align:center">内存单元存放两个字长度的单元, IP = 低地址16位内存单元的值,                                       CS = 高地址16位内存单元的值</td>
</tr>
</tbody>
</table>
<h2 id="jcxz"><a href="#jcxz" class="headerlink" title="jcxz"></a>jcxz</h2><table>
<thead>
<tr>
<th style="text-align:center">汇编指令</th>
<th style="text-align:center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">jcxz 标号</td>
<td style="text-align:center">如果cx = 0, 跳转到标号处</td>
</tr>
</tbody>
</table>
<h2 id="loop"><a href="#loop" class="headerlink" title="loop"></a>loop</h2><table>
<thead>
<tr>
<th style="text-align:center">汇编指令</th>
<th style="text-align:center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">loop 标号</td>
<td style="text-align:center">cx = cx - 1, 如果cx != 0, 跳转到标号处</td>
</tr>
</tbody>
</table>
<h2 id="ret与retf"><a href="#ret与retf" class="headerlink" title="ret与retf"></a>ret与retf</h2><table>
<thead>
<tr>
<th style="text-align:center">汇编指令</th>
<th style="text-align:center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">ret</td>
<td style="text-align:center">pop IP</td>
</tr>
<tr>
<td style="text-align:center">retf</td>
<td style="text-align:center">pop IP,  pop CS</td>
</tr>
</tbody>
</table>
<h2 id="call"><a href="#call" class="headerlink" title="call"></a>call</h2><table>
<thead>
<tr>
<th style="text-align:center">汇编指令</th>
<th style="text-align:center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">call 标号</td>
<td style="text-align:center">push IP, jmp near ptr 标号</td>
</tr>
<tr>
<td style="text-align:center">call for ptr 标号</td>
<td style="text-align:center">push CS,   push IP,    jmp far ptr 标号</td>
</tr>
<tr>
<td style="text-align:center">call 16 位 寄存器</td>
<td style="text-align:center">push IP,   jmp 16位寄存器</td>
</tr>
<tr>
<td style="text-align:center">call word ptr 内存单元</td>
<td style="text-align:center">push CS,  push IP,   jmp dword ptr 内存单元</td>
</tr>
<tr>
<td style="text-align:center">call dword ptr 内存单元</td>
<td style="text-align:center">push CS,   push IP,  jmp dword ptr 内存单元</td>
</tr>
</tbody>
</table>
<h1 id="子程序-函数"><a href="#子程序-函数" class="headerlink" title="子程序(函数)"></a>子程序(函数)</h1><p>​    通过call 保存主程序的位置并跳转到函数, 在函数的结尾通过ret返回到主程序</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">assume cs:code</span><br><span class="line">code segment</span><br><span class="line"></span><br><span class="line">	main: :</span><br><span class="line">		  :</span><br><span class="line">		  call sub1</span><br><span class="line">		  :</span><br><span class="line">		  :</span><br><span class="line">		  mov ax, 4c00h</span><br><span class="line">		  int 21h</span><br><span class="line">		  </span><br><span class="line">    sub1:  :</span><br><span class="line">    	   :</span><br><span class="line">    	   ret</span><br><span class="line">		 </span><br><span class="line"></span><br><span class="line">code ends</span><br><span class="line">end main</span><br></pre></td></tr></table></figure>
<h2 id="函数传参和返回值"><a href="#函数传参和返回值" class="headerlink" title="函数传参和返回值"></a>函数传参和返回值</h2><ul>
<li>主程序和子程序使用相同的寄存器</li>
</ul>
<ul>
<li>将数据放在内存中, 传递数据在内存中的地址</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">assume cs:code</span><br><span class="line">data segment</span><br><span class="line">	db &apos;word&apos;, 0	//	将以0结尾的字符串转换为大写</span><br><span class="line">	db &apos;unix&apos;, 0</span><br><span class="line">data ends</span><br><span class="line">code segment</span><br><span class="line">	start: mov ax, data</span><br><span class="line">		   mov ds, ax</span><br><span class="line">		   mov bx, 0</span><br><span class="line">		   </span><br><span class="line">		   mov cx, 4</span><br><span class="line">		s: mov si, bx</span><br><span class="line">            call capital</span><br><span class="line">            add bx, 5</span><br><span class="line">            loop s</span><br><span class="line">            </span><br><span class="line">            mov ax, 4c00h</span><br><span class="line">            int 21h</span><br><span class="line">            </span><br><span class="line">   capital: push cx			//	将主程序和子程序使用的相同的寄存器入栈, 防止冲突</span><br><span class="line">   			push si</span><br><span class="line">   			</span><br><span class="line">   	change:	mov cl, [si]</span><br><span class="line">   			mov ch, 0</span><br><span class="line">   			jcxz ok</span><br><span class="line">   			and byte ptr [si], 11011111b</span><br><span class="line">   			inc si</span><br><span class="line">   			jmp short change</span><br><span class="line">   	 	</span><br><span class="line">   	 	ok:	pop si			//	子程序完成后, 将栈中寄存器的值出栈</span><br><span class="line">   	 		pop cx</span><br><span class="line">   	 		ret</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://utilcoder.com/计算机组成与原理/计算机组成与原理/第三章 MIPS指令/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Util">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Code">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/计算机组成与原理/计算机组成与原理/第三章 MIPS指令/" itemprop="url">第三章 MIPS指令</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-27T14:06:28+08:00">
                2018-03-27
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/计算机组成与原理/" itemprop="url" rel="index">
                    <span itemprop="name">计算机组成与原理</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="小端法与大端法"><a href="#小端法与大端法" class="headerlink" title="小端法与大端法"></a>小端法与大端法</h1><ul>
<li>小端法: 低地址放低字节, 高地址放高字节(因此在内存中看上去是把数的低位放在高位前面)</li>
</ul>
<h1 id="字"><a href="#字" class="headerlink" title="字"></a>字</h1><p>MIPS中寄存器和内存单元的大小位4个字节, 所以字的大小为4个字节</p>
<h1 id="寄存器"><a href="#寄存器" class="headerlink" title="寄存器"></a>寄存器</h1><table>
<thead>
<tr>
<th style="text-align:center">名称</th>
<th style="text-align:center">寄存器号</th>
<th style="text-align:center">用途</th>
<th style="text-align:center">调用时是否保存(调用前入栈, 调用后出栈)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">\$zero</td>
<td style="text-align:center">0</td>
<td style="text-align:center">常数0</td>
<td style="text-align:center">否</td>
</tr>
<tr>
<td style="text-align:center">\$v0 ~ \$v1</td>
<td style="text-align:center">2 ~ 3</td>
<td style="text-align:center">计算结果和表达式求值</td>
<td style="text-align:center">否</td>
</tr>
<tr>
<td style="text-align:center">\$a0 ~ \$a3</td>
<td style="text-align:center">4 ~ 7</td>
<td style="text-align:center">参数</td>
<td style="text-align:center">否</td>
</tr>
<tr>
<td style="text-align:center">\$t0 ~ \$t7</td>
<td style="text-align:center">8 ~ 15</td>
<td style="text-align:center">临时寄存器</td>
<td style="text-align:center">否</td>
</tr>
<tr>
<td style="text-align:center">\$s0 ~ \$s7</td>
<td style="text-align:center">16 ~ 23</td>
<td style="text-align:center">保存寄存器</td>
<td style="text-align:center">是</td>
</tr>
<tr>
<td style="text-align:center">\$t8 ~ $t9</td>
<td style="text-align:center">24 ~ 25</td>
<td style="text-align:center">临时寄存器</td>
<td style="text-align:center">否</td>
</tr>
<tr>
<td style="text-align:center">\$gp</td>
<td style="text-align:center">28</td>
<td style="text-align:center">全局变量</td>
<td style="text-align:center">是</td>
</tr>
<tr>
<td style="text-align:center">\$sp</td>
<td style="text-align:center">29</td>
<td style="text-align:center">栈指针</td>
<td style="text-align:center">是</td>
</tr>
<tr>
<td style="text-align:center">\$fp</td>
<td style="text-align:center">30</td>
<td style="text-align:center">帧指针</td>
<td style="text-align:center">是</td>
</tr>
<tr>
<td style="text-align:center">\$ra</td>
<td style="text-align:center">31</td>
<td style="text-align:center">返回地址</td>
<td style="text-align:center">是</td>
</tr>
</tbody>
</table>
<h1 id="汇编指令"><a href="#汇编指令" class="headerlink" title="汇编指令"></a>汇编指令</h1><ul>
<li>算术</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">指令</th>
<th style="text-align:center">实例</th>
<th style="text-align:center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">加法</td>
<td style="text-align:center">add \$s1, \$s2, \$s3</td>
<td style="text-align:center">\$s1 = \$s2 + \$s3</td>
</tr>
<tr>
<td style="text-align:center">减法</td>
<td style="text-align:center">sub \$s1, \$s2, \$s3</td>
<td style="text-align:center">\$s1 = \$s2 - \$s3</td>
</tr>
<tr>
<td style="text-align:center">立即数加法</td>
<td style="text-align:center">addi \$s1, \$s2, 20</td>
<td style="text-align:center">\$s1 = \$s2 + 20</td>
</tr>
<tr>
<td style="text-align:center">立即数减法</td>
<td style="text-align:center">addi \$s1, \$s2, -20</td>
<td style="text-align:center">\$s1 = \$s2 + (-20)</td>
</tr>
<tr>
<td style="text-align:center">初始化</td>
<td style="text-align:center">addi \$s1, \$zero, \$zero</td>
<td style="text-align:center">将\$s1初始化为0</td>
</tr>
</tbody>
</table>
<ul>
<li>数据传输</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">指令</th>
<th style="text-align:center">实例</th>
<th style="text-align:center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">取字</td>
<td style="text-align:center">lw \$s1, 20 (\$s2)</td>
<td style="text-align:center">\$s1 = \$Memory[\$s2 + 20]</td>
</tr>
<tr>
<td style="text-align:center">存字</td>
<td style="text-align:center">sw \$s1, 20 (\$s2)</td>
<td style="text-align:center">\$Memory[\$s2 + 20] = \$s1</td>
</tr>
<tr>
<td style="text-align:center">取半字</td>
<td style="text-align:center">lh \$s1, 20 (\$s2)</td>
<td style="text-align:center">从内存读取半个字, 放在寄存器右边8位</td>
</tr>
<tr>
<td style="text-align:center">取无符号半字</td>
<td style="text-align:center">lhu \$s1, 20 (\$s2)</td>
<td style="text-align:center">…</td>
</tr>
<tr>
<td style="text-align:center">存半字</td>
<td style="text-align:center">sh \$s1, 20 (\$s2)</td>
<td style="text-align:center">把寄存器右边8位放入内存</td>
</tr>
<tr>
<td style="text-align:center">取字节</td>
<td style="text-align:center">lb \$s1, 20 (\$s2)</td>
<td style="text-align:center">…</td>
</tr>
<tr>
<td style="text-align:center">取无符号字节</td>
<td style="text-align:center">lbu \$s1, 20 (\$s2)</td>
<td style="text-align:center">…</td>
</tr>
<tr>
<td style="text-align:center">存字节</td>
<td style="text-align:center">sb \$s1, 20 (\$s2)</td>
<td style="text-align:center">…</td>
</tr>
<tr>
<td style="text-align:center">取链接字</td>
<td style="text-align:center">ll \$s1, 20 (\$s2)</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">存条件字</td>
<td style="text-align:center">sc \$s1, 20 (\$s2)</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">读取立即数的高位</td>
<td style="text-align:center">lui \$s1, 20</td>
<td style="text-align:center">将立即数放在寄存器的高16位</td>
</tr>
<tr>
<td style="text-align:center">构造32位数</td>
<td style="text-align:center">lui构造高16位和or构造低16位</td>
</tr>
</tbody>
</table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$Memory[$s2 + 20] &lt;==&gt; A[5]		//	$s2保存数组A的基址值, MIPS中字为4个字节, 所以有5个元素</span><br></pre></td></tr></table></figure>
<ul>
<li>逻辑</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">指令</th>
<th style="text-align:center">实例</th>
<th style="text-align:center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">与</td>
<td style="text-align:center">and \$s1, \$s2, \$s3</td>
<td style="text-align:center">\$s1 = \$s2 &amp; \$s3</td>
</tr>
<tr>
<td style="text-align:center">或</td>
<td style="text-align:center">or \$s1, \$s2, \$s3</td>
<td style="text-align:center">\$s1 = \$s2 \</td>
<td>\$s3</td>
</tr>
<tr>
<td style="text-align:center">或非</td>
<td style="text-align:center">nor \$s1, \$s2, \$s3</td>
<td style="text-align:center">\$s1 = -($s2</td>
<td>\$s3)</td>
</tr>
<tr>
<td style="text-align:center">立即数与</td>
<td style="text-align:center">andi \$s1, \$s2, 20</td>
<td style="text-align:center">\$s1 = \$s2 &amp; 20</td>
</tr>
<tr>
<td style="text-align:center">立即数或</td>
<td style="text-align:center">ori \$s1, \$s2, 20</td>
<td style="text-align:center">\$s1 = \$s2 \</td>
<td>20</td>
</tr>
<tr>
<td style="text-align:center">逻辑左移(不考虑符号位)</td>
<td style="text-align:center">sll \$s1, \$s2, 20</td>
<td style="text-align:center">\$s1 = \$s2 &lt;&lt; 20</td>
</tr>
<tr>
<td style="text-align:center">逻辑右移</td>
<td style="text-align:center">srl \$s1, \$s2, 20</td>
<td style="text-align:center">\$s1 = \$s2 &gt;&gt; 20</td>
</tr>
</tbody>
</table>
<ul>
<li>条件分支</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">指令</th>
<th style="text-align:center">实例</th>
<th style="text-align:center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">相等时跳转到标号</td>
<td style="text-align:center">beq \$s1, \$s2, L</td>
<td style="text-align:center">若\$s1 = \$s2, 跳转到标号L处</td>
</tr>
<tr>
<td style="text-align:center">不等时跳转到标号</td>
<td style="text-align:center">bnq \$s1, \$s2, L</td>
<td style="text-align:center">若\$s1 != \$s2, 跳转到标号L处</td>
</tr>
<tr>
<td style="text-align:center">小于时置位</td>
<td style="text-align:center">slt \$s1, \$s2, \$s3</td>
<td style="text-align:center">若\$s2 &lt; \$s3, \$s1 = 1; 否则\$s1 = 0</td>
</tr>
<tr>
<td style="text-align:center">无符号比较小于时置位</td>
<td style="text-align:center">sltu \$s1, \$s2, \$s3</td>
<td style="text-align:center">若\$s2 &lt; \$s3, \$s1 = 1; 否则\$s1 = 0</td>
</tr>
<tr>
<td style="text-align:center">无符号比较小于立即数时置位</td>
<td style="text-align:center">slti \$s1, \$s2, 20</td>
<td style="text-align:center">若\$s2 &lt; 20, \$s1 = 1; 否则\$s1 = 0</td>
</tr>
<tr>
<td style="text-align:center">无符号比较小于无符号立即数时置位</td>
<td style="text-align:center">sltiu \$s1, \$s2, 20</td>
<td style="text-align:center">若\$s2 &lt; 20, \$s1 = 1; 否则\$s1 = 0</td>
</tr>
<tr>
<td style="text-align:center">小于时跳转</td>
<td style="text-align:center">slt与beq结合</td>
</tr>
</tbody>
</table>
<ul>
<li>无条件跳转</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">指令</th>
<th style="text-align:center">实例</th>
<th style="text-align:center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">跳转到标号L处</td>
<td style="text-align:center">j L</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">跳转到寄存器的值所指向的位置</td>
<td style="text-align:center">jr \$ra</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">跳转到标号L处, 并将下一条指令的地址保存在$ra</td>
<td style="text-align:center">jal L</td>
</tr>
</tbody>
</table>
<h1 id="二进制表示MIPS指令"><a href="#二进制表示MIPS指令" class="headerlink" title="二进制表示MIPS指令"></a>二进制表示MIPS指令</h1><ul>
<li>指令长度为32位</li>
</ul>
<h2 id="字段格式"><a href="#字段格式" class="headerlink" title="字段格式"></a>字段格式</h2><ul>
<li>R型:</li>
</ul>
<p><img src="https://CoderUtil.github.io/images/TIM截图20180331140121.png" alt="计算机组成"></p>
<ul>
<li>I型: 用于立即数和数据传送指令</li>
</ul>
<p><img src="https://CoderUtil.github.io/images/TIM截图20180331140908.png" alt="计算机组成"></p>
<table>
<thead>
<tr>
<th style="text-align:center">指令</th>
<th style="text-align:center">op</th>
<th style="text-align:center">rs</th>
<th style="text-align:center">rt</th>
<th style="text-align:center">rd</th>
<th style="text-align:center">shamt</th>
<th style="text-align:center">funct</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">add</td>
<td style="text-align:center">0</td>
<td style="text-align:center">reg</td>
<td style="text-align:center">reg</td>
<td style="text-align:center">reg</td>
<td style="text-align:center">0</td>
<td style="text-align:center">32</td>
</tr>
<tr>
<td style="text-align:center">sub</td>
<td style="text-align:center">0</td>
<td style="text-align:center">reg</td>
<td style="text-align:center">reg</td>
<td style="text-align:center">reg</td>
<td style="text-align:center">0</td>
<td style="text-align:center">34</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align:center">指令</th>
<th style="text-align:center">op</th>
<th style="text-align:center">rs</th>
<th style="text-align:center">rt</th>
<th style="text-align:center">constant</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">addi</td>
<td style="text-align:center">8</td>
<td style="text-align:center">reg</td>
<td style="text-align:center">reg</td>
<td style="text-align:center">常数</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align:center">指令</th>
<th style="text-align:center">op</th>
<th style="text-align:center">rs</th>
<th style="text-align:center">rt</th>
<th style="text-align:center">address</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">lw</td>
<td style="text-align:center">35</td>
<td style="text-align:center">reg</td>
<td style="text-align:center">reg</td>
<td style="text-align:center">address</td>
</tr>
<tr>
<td style="text-align:center">rt</td>
<td style="text-align:center">43</td>
<td style="text-align:center">reg</td>
<td style="text-align:center">reg</td>
<td style="text-align:center">address</td>
</tr>
</tbody>
</table>
<h2 id="J型-跳转指令的机器码都是字地址"><a href="#J型-跳转指令的机器码都是字地址" class="headerlink" title="J型(跳转指令的机器码都是字地址)"></a>J型(跳转指令的机器码都是字地址)</h2><p><img src="https://CoderUtil.github.io/images/TIM截图20180406210731.png" alt="计算机组成"></p>
<p><img src="https://CoderUtil.github.io/images/TIM截图20180406214153.png" alt="计算机组成"></p>
<h1 id="栈"><a href="#栈" class="headerlink" title="栈"></a>栈</h1><ul>
<li>MIPS中栈的增长从高地址到低地址</li>
<li>帧指针\$fp: 不同的函数使用不同的栈, 帧指针用于迅速找到函数对应的栈. 而且相对于栈指针, 帧指针是不变的, 这样可以用帧指针作为栈中数据的基址值</li>
</ul>
<p><img src="https://CoderUtil.github.io/images/TIM截图20180331143718.png" alt="计算机组成"></p>
<h1 id="并行与指令"><a href="#并行与指令" class="headerlink" title="并行与指令"></a>并行与指令</h1><ul>
<li>数据冲突: 若两个线程同时访问一个地址, 且至少一个线程执行写操作, 则可能导致数据冲突</li>
</ul>
<p><img src="https://CoderUtil.github.io/images/TIM截图20180416225515.png" alt="计算机组成"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ll $t1, 0($s1)		//	链接取数指令, 从[$s1 + 0]中取出数据</span><br><span class="line">sc $t0, 0($s1)		//	条件存数指令, 向[$s1 + 0]存数据</span><br><span class="line"></span><br><span class="line">ll和sc一起使用, 起到锁的作用. 若ll执行后, sc执行前. [$s1 + 0]中的值被改变了, 则sc不会执行</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://utilcoder.com/计算机组成与原理/计算机组成与原理/第二章 算术运算/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Util">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Code">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/计算机组成与原理/计算机组成与原理/第二章 算术运算/" itemprop="url">第二章 算术运算</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-27T12:15:11+08:00">
                2018-03-27
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/计算机组成与原理/" itemprop="url" rel="index">
                    <span itemprop="name">计算机组成与原理</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="数的表示"><a href="#数的表示" class="headerlink" title="数的表示"></a>数的表示</h1><h2 id="无符号数与带符号数"><a href="#无符号数与带符号数" class="headerlink" title="无符号数与带符号数"></a>无符号数与带符号数</h2><ul>
<li>无符号数: 二进制数</li>
</ul>
<ul>
<li>带符号数: 最高位表示为符号位的二进制数, 0代表正数, 1代表负数. 包括原码、反码、补码</li>
</ul>
<h2 id="原码、反码、补码"><a href="#原码、反码、补码" class="headerlink" title="原码、反码、补码"></a>原码、反码、补码</h2><table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center">正数</th>
<th style="text-align:center">负数</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">原码</td>
<td style="text-align:center">二进制数</td>
<td style="text-align:center">符号位为1, 其他位与它的绝对值的原码相同</td>
</tr>
<tr>
<td style="text-align:center">反码</td>
<td style="text-align:center">二进制数</td>
<td style="text-align:center">它的绝对值的二进制数取反</td>
</tr>
<tr>
<td style="text-align:center">补码</td>
<td style="text-align:center">二进制数</td>
<td style="text-align:center">它的绝对值的二进制数取反加一</td>
</tr>
</tbody>
</table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">求十进制负数-2的原、反、补码: </span><br><span class="line">原码:	   </span><br><span class="line">	(1) 2的二进制数为0000,0010</span><br><span class="line">	(2) -2的原码为1000,0010</span><br><span class="line"></span><br><span class="line">反码:</span><br><span class="line">	(1) 2的二进制数为0000,0010</span><br><span class="line">	(2) -2的反码为1111,1101</span><br><span class="line"></span><br><span class="line">补码:</span><br><span class="line">	(1) 2的二进制数为0000,0010</span><br><span class="line">	(2) -2的补码为1111,1110</span><br><span class="line">	</span><br><span class="line"></span><br><span class="line">求二进制负数-1101, 0011的补码:</span><br><span class="line"></span><br><span class="line">除符号位外取反加一, 符号位根据正负号设置: 1010, 1101</span><br></pre></td></tr></table></figure>
<h2 id="计算机中操作数以补码表示"><a href="#计算机中操作数以补码表示" class="headerlink" title="计算机中操作数以补码表示"></a>计算机中操作数以补码表示</h2><ul>
<li>减去一个数, 等于加上这个数的相反数的补码(将减号看作数字的一部分, 只保留加号. 然后操作数都用补码表示)</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">	3 - 2 = 1</span><br><span class="line">	</span><br><span class="line">3的补码: 0000,0011</span><br><span class="line"></span><br><span class="line">-2的补码: 1111,1110</span><br><span class="line"></span><br><span class="line"> 0000,0011</span><br><span class="line">+1111,1110</span><br><span class="line">------------</span><br><span class="line"> 0000,0001</span><br><span class="line"></span><br><span class="line">1的补码: 0000,0001</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   	-3 - 2 = -5</span><br><span class="line">  </span><br><span class="line">-3的补码: 1111,1101   // 	-3可以看作0-3, 0 + (-3)的补码 </span><br><span class="line">-2的补码: 1111,1110</span><br><span class="line"></span><br><span class="line"> 1111,1101</span><br><span class="line">+1111,1110</span><br><span class="line">-----------</span><br><span class="line"> 1111,1011</span><br><span class="line"> </span><br><span class="line">-5的补码: 1111,1011</span><br></pre></td></tr></table></figure>
<h1 id="浮点数"><a href="#浮点数" class="headerlink" title="浮点数"></a>浮点数</h1><ul>
<li>科学记数法: 小数点左边只有一位数的记数法</li>
</ul>
<ul>
<li>规格化数: 没有前导零的浮点数</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.0 * 10^9是规格化的</span><br><span class="line"></span><br><span class="line">0.1 * 10^10是非规格化的</span><br></pre></td></tr></table></figure>
<ul>
<li>上溢: 正指数超过了指数域的上限</li>
<li>下溢: 负指数超过了指数域的下限</li>
</ul>
<h2 id="IEE754浮点数"><a href="#IEE754浮点数" class="headerlink" title="IEE754浮点数"></a>IEE754浮点数</h2><p><img src="https://CoderUtil.github.io/images/TIM截图20180327130223.png" alt="计算机组成"></p>
<p><img src="https://CoderUtil.github.io/images/TIM截图20180327131235.png" alt="计算机组成"></p>
<h2 id="浮点数转换成IEE"><a href="#浮点数转换成IEE" class="headerlink" title="浮点数转换成IEE"></a>浮点数转换成IEE</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">用B, D, H表示进制</span><br><span class="line"></span><br><span class="line">-0.75D =&gt; IEE754</span><br><span class="line"></span><br><span class="line">(1) 转换为无符号二进制</span><br><span class="line">	-0.11B			//		结果为无限小数时, 直接截断</span><br><span class="line">	</span><br><span class="line">(2) 转换为规格化的科学计数法	</span><br><span class="line">	-1.1B * 2^(-1)</span><br><span class="line">	</span><br><span class="line">(3) S = 1</span><br><span class="line">    E = -1 + 127 = 0111,1110B</span><br><span class="line">    M = 100...0(为了保存更多的信息, 隐藏了规格化小数的前导1)</span><br></pre></td></tr></table></figure>
<h2 id="浮点数加-减法"><a href="#浮点数加-减法" class="headerlink" title="浮点数加/减法"></a>浮点数加/减法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">0.5D + (-0.4375D), 保留3位尾数位</span><br><span class="line"></span><br><span class="line">(1) 转换为规格化的科学记数法表示</span><br><span class="line">  0.5D = 1.000B * 2^(-1)</span><br><span class="line">  -0.4375D = -1.110B * 2^(-2)</span><br><span class="line">  </span><br><span class="line">(2) 将指数较小的操作数向指数较大的操作数对齐</span><br><span class="line">	-1.110B * 2^(-2) = -0.111B * 2^(-1)</span><br><span class="line">	</span><br><span class="line">(3) 相加</span><br><span class="line">    1.000</span><br><span class="line">   -0.111</span><br><span class="line">  ---------</span><br><span class="line">    0.001</span><br><span class="line">    </span><br><span class="line">(4) 化为规格化且有4位有效数字的形式</span><br><span class="line">   0.001B * 2^(-1) = 1.000B * 2^(-4)</span><br></pre></td></tr></table></figure>
<h2 id="浮点数除法-补码不恢复余数法"><a href="#浮点数除法-补码不恢复余数法" class="headerlink" title="浮点数除法(补码不恢复余数法)"></a>浮点数除法(补码不恢复余数法)</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">X = 0.1011B, Y = -0.1101, 求 X补 / Y补. 保留4位尾数位</span><br><span class="line"></span><br><span class="line">(1) 求出补码</span><br><span class="line"></span><br><span class="line">	X补 = 0.1011			//	对于正数, 补码等于二进制数</span><br><span class="line">	Y补 = 1.0011			//	对于负数, 补码等于二进制数取反加一</span><br><span class="line">	</span><br><span class="line">(2) 扩展1位符号位</span><br><span class="line">	</span><br><span class="line">	X补 = 00.1011</span><br><span class="line">	Y补 = 11.0011</span><br><span class="line">	</span><br><span class="line">(3) 若X补与Y补同号, X补 - Y补; 异号则X补 + Y补</span><br><span class="line">	</span><br><span class="line">	00.1011</span><br><span class="line">   +11.0011</span><br><span class="line">  ------------</span><br><span class="line">    11.1110			=&gt;	第一步的余数</span><br><span class="line">    	</span><br><span class="line">    当余数 &gt; 0, 商 = 1</span><br><span class="line">    当余数 &lt; 0, 商 = 0</span><br><span class="line">    	</span><br><span class="line">    余数 &lt; 0, 因此第一步的商 = 0</span><br><span class="line">    </span><br><span class="line">(4) 将余数左移1位</span><br><span class="line">	余数为11.1100</span><br><span class="line">	</span><br><span class="line">(5) 根据(3), 若余数与Y补同号, 则余数 - Y补; 反之则余数 + Y补</span><br><span class="line">	</span><br><span class="line">	 11.1100</span><br><span class="line">	-11.0011</span><br><span class="line">  ------------</span><br><span class="line">     00.1001</span><br><span class="line">     </span><br><span class="line">     余数 &gt; 0, 因此第二步的商 = 1</span><br><span class="line"> </span><br><span class="line">(6) 重复(4), (5)直至算出5个商值, 分别为0, 1, 1, 0, 1(4位尾数位 + 1位整数位), 最后一步的余数为00.0111</span><br><span class="line"></span><br><span class="line">	因此X补 / Y补 = -0.1101		(异号相除，符号为负)</span><br><span class="line">	余数为0.0111</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://utilcoder.com/操作系统/操作系统/第二章 操作系统结构/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Util">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Code">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/操作系统/操作系统/第二章 操作系统结构/" itemprop="url">第二章 操作系统结构</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-27T11:42:41+08:00">
                2018-03-27
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/操作系统/" itemprop="url" rel="index">
                    <span itemprop="name">操作系统</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="操作系统提供的五大服务"><a href="#操作系统提供的五大服务" class="headerlink" title="操作系统提供的五大服务"></a>操作系统提供的五大服务</h1><p><img src="https://CoderUtil.github.io/images/TIM截图20180331122959.png" alt="操作系统"></p>
<h1 id="用户界面"><a href="#用户界面" class="headerlink" title="用户界面"></a>用户界面</h1><ul>
<li>分为命令行界面CLI和图形用户界面GUI</li>
</ul>
<h2 id="命令行界面CLI"><a href="#命令行界面CLI" class="headerlink" title="命令行界面CLI"></a>命令行界面CLI</h2><ul>
<li>通过解释程序shell来获取并执行用户的指令</li>
</ul>
<h2 id="CLI解释指令的方式"><a href="#CLI解释指令的方式" class="headerlink" title="CLI解释指令的方式"></a>CLI解释指令的方式</h2><ul>
<li>CLI包含执行命令的程序, 接收到指令后, 向对应程序传参使其执行</li>
</ul>
<ul>
<li>CLI不包含执行命令的程序,但是操作系统中有包含程序的系统文件中, CLI根据指令找到对应的文件, 交由文件执行</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rm file.txt</span><br><span class="line">会搜索名为rm的文件, 将该文件装入内存中, 然后调用参数file.txt执行</span><br></pre></td></tr></table></figure>
<h1 id="系统调用"><a href="#系统调用" class="headerlink" title="系统调用"></a>系统调用</h1><h2 id="向操作系统传参的方式"><a href="#向操作系统传参的方式" class="headerlink" title="向操作系统传参的方式"></a>向操作系统传参的方式</h2><ul>
<li>通过寄存器传递参数</li>
</ul>
<ul>
<li>将参数放入内存中, 将内存地址传递给操作系统</li>
</ul>
<ul>
<li>将参数放入栈中, 通过操作系统弹出参数</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://utilcoder.com/汇编/汇编/第二章 内存访问/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Util">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Code">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/汇编/汇编/第二章 内存访问/" itemprop="url">第二章 内存访问</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-26T16:33:22+08:00">
                2018-03-26
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/汇编/" itemprop="url" rel="index">
                    <span itemprop="name">汇编</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="内存单元"><a href="#内存单元" class="headerlink" title="内存单元"></a>内存单元</h1><h2 id="DS和-address"><a href="#DS和-address" class="headerlink" title="DS和[address]"></a>DS和[address]</h2><table>
<thead>
<tr>
<th style="text-align:center">汇编指令</th>
<th style="text-align:center">操作</th>
<th style="text-align:center">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">mov al, [0]</td>
<td style="text-align:center">将ds:0这个内存单元的值赋给al</td>
<td style="text-align:center">AL = DS:0</td>
</tr>
<tr>
<td style="text-align:center">mov [0], al</td>
<td style="text-align:center">将al的值赋给ds:0这个内存单元</td>
<td style="text-align:center">DS:0 = AL</td>
</tr>
<tr>
<td style="text-align:center">mov ax, [0]</td>
<td style="text-align:center">将ds:0这个内存单元的值赋给al, 将ds:1这个内存单元的值赋给ah</td>
<td style="text-align:center">AL = DS:0, AH = DS:1</td>
</tr>
</tbody>
</table>
<h2 id="address的表示方法"><a href="#address的表示方法" class="headerlink" title="address的表示方法"></a>address的表示方法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">mov ax, [200 + bx + si]</span><br><span class="line"></span><br><span class="line">等价于</span><br><span class="line"></span><br><span class="line">mov ax, 200[bx + si]</span><br><span class="line"></span><br><span class="line">等价于</span><br><span class="line"></span><br><span class="line">mov ax, 200.[bx + si]</span><br><span class="line"></span><br><span class="line">等价于</span><br><span class="line"></span><br><span class="line">mov ax, 200[bx][si]</span><br><span class="line"></span><br><span class="line">等价于</span><br><span class="line"></span><br><span class="line">mov ax, 200.bx.[si]</span><br></pre></td></tr></table></figure>
<h2 id="寄存器bp-si-di"><a href="#寄存器bp-si-di" class="headerlink" title="寄存器bp, si, di"></a>寄存器bp, si, di</h2><ul>
<li>与bx一样, 都用作address. 且它们的默认段寄存器都是ds</li>
</ul>
<ul>
<li>address只支持[bx + si], [bx + di], [bp + si], [bp + di]</li>
</ul>
<h2 id="段地址不能直接赋值"><a href="#段地址不能直接赋值" class="headerlink" title="段地址不能直接赋值"></a>段地址不能直接赋值</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mov ds, 1000H		//	错误</span><br><span class="line"></span><br><span class="line">mov bx, 1000H		//	正确</span><br><span class="line">mov ds, bx</span><br></pre></td></tr></table></figure>
<h2 id="内存单元之间不能直接赋值"><a href="#内存单元之间不能直接赋值" class="headerlink" title="内存单元之间不能直接赋值"></a>内存单元之间不能直接赋值</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mov word ptr cs:[di], cs:[si]	//	错误</span><br></pre></td></tr></table></figure>
<h2 id="X-ptr"><a href="#X-ptr" class="headerlink" title="X ptr"></a>X ptr</h2><ul>
<li>没有寄存器作为操作数时, 需要显示指明内存单元的长度</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">汇编指令</th>
<th style="text-align:center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">byte ptr</td>
<td style="text-align:center">指明内存单元是一个字节单元</td>
</tr>
<tr>
<td style="text-align:center">word ptr</td>
<td style="text-align:center">指明内存单元是一个字单元</td>
</tr>
</tbody>
</table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mov word ptr ds:[0], 1		</span><br><span class="line"></span><br><span class="line">inc byte ptr es:[0]</span><br></pre></td></tr></table></figure>
<h1 id="栈"><a href="#栈" class="headerlink" title="栈"></a>栈</h1><ul>
<li><p>栈: 一块内存空间, SS:SP指向栈顶元素. 栈空时, SS:SP指向内存空间的最大地址 + 1; 栈满时, SS:SP指向最小地址 - 1</p>
<p>​</p>
</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">(ax)</th>
<th style="text-align:center">表示寄存器ax中的内容</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">(20000H)</td>
<td style="text-align:center">表示物理地址为20000H的内存单元的内容</td>
</tr>
<tr>
<td style="text-align:center">((ds) * 16 + bx)</td>
<td style="text-align:center">表示段地址为ds, 偏移地址为bx的内存单元的内容</td>
</tr>
</tbody>
</table>
<p><img src="https://CoderUtil.github.io/images/TIM截图20180326172947.png" alt="汇编"></p>
<h2 id="表示寄存器-内存单元的内容"><a href="#表示寄存器-内存单元的内容" class="headerlink" title="()表示寄存器/内存单元的内容"></a>()表示寄存器/内存单元的内容</h2><table>
<thead>
<tr>
<th style="text-align:center">汇编指令</th>
<th style="text-align:center">操作</th>
<th style="text-align:center">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">push ax</td>
<td style="text-align:center">将ax的值放入位于栈顶的两个内存单元中, sp指向新栈顶</td>
<td style="text-align:center">SP = SP - 2, SS : SP = AX</td>
</tr>
<tr>
<td style="text-align:center">pop ax</td>
<td style="text-align:center">将位于栈顶的两个内存单元的值ax放入中, sp指向新栈顶</td>
<td style="text-align:center">AX = SS : SP, SP = SP + 2</td>
</tr>
</tbody>
</table>
<h1 id="汇编程序"><a href="#汇编程序" class="headerlink" title="汇编程序"></a>汇编程序</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">assume cs:code,	ds:data, ss:stack	//	将段寄存器与段名相关联</span><br><span class="line">	data segment			//	定义一个名为data的数据段, segment标志着段开始, ends标志着段结束</span><br><span class="line">		</span><br><span class="line">	data ends</span><br><span class="line">	</span><br><span class="line">	stack segment			//	定义一个名为stack的栈段</span><br><span class="line">		dw 0, 0 ,0</span><br><span class="line">	stack ends</span><br><span class="line">	</span><br><span class="line">	code segment			//	定义一个名为code的代码段</span><br><span class="line">    start:  mov ax, data	 //	 end start指明了start标号是程序的入口</span><br><span class="line">            mov ds, ax</span><br><span class="line"></span><br><span class="line">            mov ax, stack	 //  data与stack的段名等价于数据段和代码段的段地址值, 因此不能直接赋值</span><br><span class="line">            mov ss, ax</span><br><span class="line">            mov sp, 6		//	SP指向栈底</span><br><span class="line">            </span><br><span class="line">            ...</span><br><span class="line">            </span><br><span class="line">           	mov ax, 4CH	 //	程序返回 </span><br><span class="line">           	int 21H			</span><br><span class="line">	code ends			</span><br><span class="line">end	start					//	说明汇编程序结束</span><br></pre></td></tr></table></figure>
<ul>
<li>跳转到当前目录下: mount c d:\WorkEnvironment\DosBox<br>   ​                 c:</li>
</ul>
<ul>
<li>编辑: 在DOSBOX文件夹下编辑1.asm文件</li>
</ul>
<ul>
<li>编译: 输入masm, 在第一行填写1, 其他行回车</li>
</ul>
<ul>
<li>链接: 输入link, 在第一行填写1, 其他行回车</li>
</ul>
<ul>
<li>执行: 输入1</li>
</ul>
<h3 id="打印Hello程序"><a href="#打印Hello程序" class="headerlink" title="打印Hello程序"></a>打印Hello程序</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">assume cs:code, ds:data</span><br><span class="line"></span><br><span class="line">data segment </span><br><span class="line">    string1 db &apos;Hello World!&apos;, 13, 10, &apos;$&apos; 	//	13, 10表示换行符. &apos;$&apos;表示声明一个以$结尾的字符串</span><br><span class="line">    string2 db &apos;chenxingyu&apos;, 13, 10, &apos;$&apos;</span><br><span class="line">    string3 db &apos;16340039&apos;, &apos;$&apos;</span><br><span class="line">data ends</span><br><span class="line"></span><br><span class="line">code segment </span><br><span class="line">start:  mov ax, data </span><br><span class="line">        mov ds, ax </span><br><span class="line"></span><br><span class="line">        mov dx, offset string1		//	string1, 2, 3是标号</span><br><span class="line">        mov ah, 9h				   //	mov ah, 9h	int 21h执行打印	</span><br><span class="line">        int 21h</span><br><span class="line"></span><br><span class="line">        mov dx, offset string2 </span><br><span class="line">        mov ah, 9h</span><br><span class="line">        int 21h</span><br><span class="line"></span><br><span class="line">        mov dx, offset string3 </span><br><span class="line">        mov ah, 9h</span><br><span class="line">        int 21h</span><br><span class="line"></span><br><span class="line">        mov ah, 4ch</span><br><span class="line">        int 21h</span><br><span class="line">code ends </span><br><span class="line">end start</span><br></pre></td></tr></table></figure>
<h2 id="程序的注意事项"><a href="#程序的注意事项" class="headerlink" title="程序的注意事项:"></a>程序的注意事项:</h2><ul>
<li>程序中数据不能以字母开头, Debug下可以</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mov ax A000H	//	错误</span><br><span class="line"></span><br><span class="line">mov ax 0A000H	//	正确</span><br></pre></td></tr></table></figure>
<ul>
<li>内存单元不能直接用常量表示, Debug下可以</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mov ax, [0]		//	被认为是mov ax, 0</span><br><span class="line"></span><br><span class="line">解决办法:</span><br><span class="line">	mov bx, 0</span><br><span class="line">	mov ax, [bx]</span><br><span class="line">	或</span><br><span class="line">	mov ax, ds:[0]	//	显示添加段前缀</span><br></pre></td></tr></table></figure>
<h2 id="循环"><a href="#循环" class="headerlink" title="循环"></a>循环</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mov ax, 1	</span><br><span class="line">mov cx, 11</span><br><span class="line">s: inc ax		//	inc ax 等价于 ax = ax + 1</span><br><span class="line">loop s			//	执行到loop语句, 先cx = cx - 1, 若cx = 0则向下执行, 否则跳转至标号处</span><br></pre></td></tr></table></figure>
<h2 id="inc与dec"><a href="#inc与dec" class="headerlink" title="inc与dec"></a>inc与dec</h2><table>
<thead>
<tr>
<th style="text-align:center">汇编指令</th>
<th style="text-align:center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">inc</td>
<td style="text-align:center">inc cx    &lt;=&gt;    cx = cx + 1</td>
</tr>
<tr>
<td style="text-align:center">dec</td>
<td style="text-align:center">dec cx   &lt;=&gt;     cx = cx - 1</td>
</tr>
</tbody>
</table>
<h2 id="多层循环"><a href="#多层循环" class="headerlink" title="多层循环"></a>多层循环</h2><p>​    内层循环和外层循环共用一个cx, 因此一进入内存循环, 需要先把cx的值入栈保存. 出内循环之前, 将cx的值出栈</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">stack segment</span><br><span class="line">	dw 0, 0, 0, 0</span><br><span class="line">stack ends</span><br><span class="line"></span><br><span class="line">code segment</span><br><span class="line">	start:  mov ax, data	 </span><br><span class="line">            mov ds, ax</span><br><span class="line"></span><br><span class="line">            mov ax, stack	</span><br><span class="line">            mov ss, ax</span><br><span class="line">            mov sp, 6		</span><br><span class="line">            </span><br><span class="line">            mov cx, 4</span><br><span class="line">            </span><br><span class="line">        s0: push cx </span><br><span class="line">        </span><br><span class="line">        s1: mov cx, 5</span><br><span class="line">            loop s1</span><br><span class="line">            </span><br><span class="line">            pop cx</span><br><span class="line">            loop s0</span><br><span class="line">            </span><br><span class="line">           	mov ax, 4C00H	</span><br><span class="line">           	int 21H</span><br><span class="line">code ends</span><br></pre></td></tr></table></figure>
<h2 id="数据段、栈段"><a href="#数据段、栈段" class="headerlink" title="数据段、栈段"></a>数据段、栈段</h2><p>​    因为不可能把所有数据都放在寄存器中, 所以一部分数据要放在内存中, 栈段和数据段</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">assume cs:code,	ds:data, ss:stack</span><br><span class="line">data segment</span><br><span class="line"></span><br><span class="line">data ends</span><br><span class="line"></span><br><span class="line">stack segment</span><br><span class="line">	</span><br><span class="line">stack ends</span><br><span class="line"></span><br><span class="line">code segment</span><br><span class="line">	mov ax, data</span><br><span class="line">	mov ds, ax</span><br><span class="line">	</span><br><span class="line">	mov ax, stack</span><br><span class="line">	mov ss, ax</span><br><span class="line">code ends</span><br></pre></td></tr></table></figure>
<h2 id="定义内存单元中的数据"><a href="#定义内存单元中的数据" class="headerlink" title="定义内存单元中的数据"></a>定义内存单元中的数据</h2><table>
<thead>
<tr>
<th style="text-align:center">汇编指令</th>
<th style="text-align:center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">db</td>
<td style="text-align:center">define byte 定义字节型数据</td>
</tr>
<tr>
<td style="text-align:center">dw</td>
<td style="text-align:center">define word 定义字型数据</td>
</tr>
<tr>
<td style="text-align:center">dd</td>
<td style="text-align:center">define double word 定义两个字型数据</td>
</tr>
<tr>
<td style="text-align:center">dup</td>
<td style="text-align:center">搭配db、dw、dd使用, 用来进行数据的重复</td>
</tr>
</tbody>
</table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">db &apos;a&apos;, &apos;b&apos;, &apos;c&apos;		//	定义3个字节型数据</span><br><span class="line">db &apos;def&apos;			   	//	定义3个字节型数据</span><br><span class="line"></span><br><span class="line">dw 0, 0123H, 0456H		//	定义3个字型数据</span><br><span class="line"></span><br><span class="line">dd 0, 1, 2			    //   定义3个字型数据</span><br><span class="line"></span><br><span class="line">db 3 dup (0)		    //  定义3个字节型数据, 它们的值都是0</span><br><span class="line">db 3 dw (0, 1, 2)		//	定义9个字型数据, 0, 1, 2, 0, 1, 2, 0, 1, 2</span><br></pre></td></tr></table></figure>
<h1 id="and与or指令"><a href="#and与or指令" class="headerlink" title="and与or指令"></a>and与or指令</h1><table>
<thead>
<tr>
<th style="text-align:center">汇编指令</th>
<th style="text-align:center">操作</th>
<th style="text-align:center">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">and al, 0011,1111B</td>
<td style="text-align:center">按位与</td>
<td style="text-align:center">al &amp;= 0011,1111B</td>
</tr>
<tr>
<td style="text-align:center">or al, 0011,1111B</td>
<td style="text-align:center">按位或</td>
<td style="text-align:center">al \</td>
<td>= 0011,1111B</td>
</tr>
</tbody>
</table>
<h1 id="mul与div指令"><a href="#mul与div指令" class="headerlink" title="mul与div指令"></a>mul与div指令</h1><ul>
<li>mul</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">格式: </span><br><span class="line">      mul reg</span><br><span class="line">      mul 内存单元</span><br><span class="line">      </span><br><span class="line">注意:</span><br><span class="line">      两个乘数位数要相同. </span><br><span class="line">      若位数都是8位, 一个默认放在AL, 另一个放在8位reg或内存单元, 默认结果放在AX</span><br><span class="line">      若位数都是16位, 一个默认放在AX, 另一个放在16位reg或内存单元, 默认结果高位放在DX, 低位放在AX</span><br><span class="line">      </span><br><span class="line">8位乘法:</span><br><span class="line">    mov al, 100</span><br><span class="line">    mov bl, 100</span><br><span class="line">    mul bl</span><br><span class="line">    </span><br><span class="line">16位乘法:</span><br><span class="line">    mov ax, 1000</span><br><span class="line">    mov bx, 10000</span><br><span class="line">    mul bx</span><br></pre></td></tr></table></figure>
<ul>
<li>div</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">格式: </span><br><span class="line">      div reg</span><br><span class="line">      div 内存单元</span><br><span class="line">      </span><br><span class="line">注意:</span><br><span class="line">      若除数位数是8位, 被除数则为16位. 被除数默认放在AX, 默认AL存放商, AH存放余数</span><br><span class="line">      若除数位数是16位, 被除数则为32位. AX放被除数的低16位, DX放被除数高16位, 默认AX存放商, DX存放余数</span><br><span class="line">      </span><br><span class="line">除数为8位:</span><br><span class="line">    mov ax, 100</span><br><span class="line">    mov bl, 100</span><br><span class="line">    div bl</span><br><span class="line">    </span><br><span class="line">除数为16位::</span><br><span class="line">    mov dx, 1000</span><br><span class="line">    mov ax, 0 </span><br><span class="line">    mov bx, 100</span><br><span class="line">    mul bx</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://utilcoder.com/汇编/汇编/第一章 基础知识/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Util">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Code">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/汇编/汇编/第一章 基础知识/" itemprop="url">第一章 基础知识</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-26T09:03:50+08:00">
                2018-03-26
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/汇编/" itemprop="url" rel="index">
                    <span itemprop="name">汇编</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="CPU"><a href="#CPU" class="headerlink" title="CPU"></a>CPU</h1><h2 id="8086-8088CPU组成"><a href="#8086-8088CPU组成" class="headerlink" title="8086/8088CPU组成"></a>8086/8088CPU组成</h2><p><img src="https://CoderUtil.github.io/images/TIM截图20180326085329.png" alt="汇编"></p>
<h2 id="8086-8088CPU共同点"><a href="#8086-8088CPU共同点" class="headerlink" title="8086/8088CPU共同点"></a>8086/8088CPU共同点</h2><p>​    都是16位CPU. 运算器一次最多可以处理16位数据, 寄存器最大宽度为16位, CPU内部数据总线为16位</p>
<h2 id="8086-8088CPU区别"><a href="#8086-8088CPU区别" class="headerlink" title="8086/8088CPU区别"></a>8086/8088CPU区别</h2><table>
<thead>
<tr>
<th style="text-align:center">CPU</th>
<th style="text-align:center">指令队列容量</th>
<th style="text-align:center">每个总线周期从内存中读取放入指令队列</th>
<th style="text-align:center">外部数据总线宽带</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">8086</td>
<td style="text-align:center">6个字节</td>
<td style="text-align:center">2个字节</td>
<td style="text-align:center">16位</td>
</tr>
<tr>
<td style="text-align:center">8088</td>
<td style="text-align:center">4个字节</td>
<td style="text-align:center">1个字节</td>
<td style="text-align:center">8位</td>
</tr>
</tbody>
</table>
<ul>
<li>总线周期:  BIU完成一次访问存储器或端口所需要的时间</li>
</ul>
<h1 id="字word"><a href="#字word" class="headerlink" title="字word"></a>字word</h1><p>​    计算机内部一次可以处理的二进制位数. 8086CPU中寄存器位16位, 所以字为16位</p>
<h2 id="内存中字的存储"><a href="#内存中字的存储" class="headerlink" title="内存中字的存储"></a>内存中字的存储</h2><p>​    高地址存放高位字节, 低地址存放低位字节</p>
<table>
<thead>
<tr>
<th style="text-align:center">0</th>
<th style="text-align:center">1</th>
<th style="text-align:center">2</th>
<th style="text-align:center">3</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">20H</td>
<td style="text-align:center">4EH</td>
<td style="text-align:center">12H</td>
<td style="text-align:center">00H</td>
</tr>
</tbody>
</table>
<p>从地址为1的内存单元中取出1个字的数据, 为124EH</p>
<h1 id="寄存器-14个16位寄存器"><a href="#寄存器-14个16位寄存器" class="headerlink" title="寄存器(14个16位寄存器)"></a>寄存器(14个16位寄存器)</h1><p><img src="https://CoderUtil.github.io/images/TIM截图20180326092541.png" alt="汇编"></p>
<table>
<thead>
<tr>
<th style="text-align:center">段寄存器</th>
<th style="text-align:center">作用</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">代码段寄存器CS</td>
<td style="text-align:center">指向代码段</td>
</tr>
<tr>
<td style="text-align:center">数据段寄存器DS</td>
<td style="text-align:center">指向数据段</td>
</tr>
<tr>
<td style="text-align:center">堆栈段寄存器SS</td>
<td style="text-align:center">指向堆栈段</td>
</tr>
<tr>
<td style="text-align:center">附加段寄存器ES</td>
<td style="text-align:center">指向附加段</td>
</tr>
</tbody>
</table>
<ul>
<li>标志寄存器FR: 又称为状态寄存器PSW</li>
</ul>
<h2 id="数据寄存器"><a href="#数据寄存器" class="headerlink" title="数据寄存器"></a>数据寄存器</h2><p>​    为了兼容上一代的8位CPU, 数据寄存器可分为高位寄存器和低位寄存器</p>
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center">低位寄存器</th>
<th style="text-align:center">高位寄存器</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">AX</td>
<td style="text-align:center">AL</td>
<td style="text-align:center">AH</td>
</tr>
<tr>
<td style="text-align:center">BX</td>
<td style="text-align:center">BL</td>
<td style="text-align:center">BH</td>
</tr>
<tr>
<td style="text-align:center">CX</td>
<td style="text-align:center">CL</td>
<td style="text-align:center">CH</td>
</tr>
<tr>
<td style="text-align:center">DX</td>
<td style="text-align:center">DL</td>
<td style="text-align:center">DH</td>
</tr>
</tbody>
</table>
<h1 id="简单汇编指令"><a href="#简单汇编指令" class="headerlink" title="简单汇编指令"></a>简单汇编指令</h1><table>
<thead>
<tr>
<th style="text-align:center">汇编指令</th>
<th style="text-align:center">操作</th>
<th style="text-align:center">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">mov ax, 18</td>
<td style="text-align:center">将18送入AX</td>
<td style="text-align:center">AX = 18</td>
</tr>
<tr>
<td style="text-align:center">mov ah, 78</td>
<td style="text-align:center">将78送入AH</td>
<td style="text-align:center">AH = 78</td>
</tr>
<tr>
<td style="text-align:center">add/sub ax, 18</td>
<td style="text-align:center">AX中的数据加/减上18</td>
<td style="text-align:center">AX = AX +/- 18</td>
</tr>
<tr>
<td style="text-align:center">add/sub ah, 18</td>
<td style="text-align:center">AH中的数据加/减上18</td>
<td style="text-align:center">AH = AH +/- 18</td>
</tr>
</tbody>
</table>
<ul>
<li><p>汇编指令不区分大小写: mov ax, 18   &lt;=&gt;    MOV AX, 18</p>
<p>​</p>
</li>
<li><p>汇编指令中操作数的位数应该一致:  mov ah, bx是错误的, ah是8位寄存器, bx是16位寄存器</p>
</li>
</ul>
<h1 id="物理地址"><a href="#物理地址" class="headerlink" title="物理地址"></a>物理地址</h1><p>​    8086CPU中地址总线是20位的, 但存储地址的寄存器是16位的. 所以将两个16位地址合成一个20位地址</p>
<ul>
<li>物理地址 = 段地址 <em> 16 + 偏移地址 = 段地址 </em> 10H + 偏移地址</li>
<li>逻辑地址 = 段地址 : 偏移地址</li>
</ul>
<h1 id="寄存器CS和IP"><a href="#寄存器CS和IP" class="headerlink" title="寄存器CS和IP"></a>寄存器CS和IP</h1><p>​    CS * 16 + IP指向当前要读取的指令的地址</p>
<h2 id="程序执行"><a href="#程序执行" class="headerlink" title="程序执行"></a>程序执行</h2><pre><code>1. 从CS : IP指向的内存单元读取指令并放入指令缓存器
 2. IP = IP + 所读指令的长度, 从而指向下一条指令(IP永远指向指令, 因此冯诺依曼体系中主要根据IP指向内容判断是内存中的内容是指令还是数据)
  3. 执行指令
</code></pre><h1 id="DeBug程序"><a href="#DeBug程序" class="headerlink" title="DeBug程序"></a>DeBug程序</h1><h2 id="打开debug"><a href="#打开debug" class="headerlink" title="打开debug"></a>打开debug</h2><ol>
<li><p>打开DOSBOX</p>
<p>​</p>
</li>
<li><p>输入下列指令</p>
</li>
</ol>
<p><img src="https://CoderUtil.github.io/images/TIM图片20180326160139.png" alt="汇编"></p>
<h2 id="指令"><a href="#指令" class="headerlink" title="指令"></a>指令</h2><h3 id="R"><a href="#R" class="headerlink" title="R"></a>R</h3><ul>
<li>r,  查看所有寄存器的内容</li>
<li>r + 寄存器名, 在提示的: 后输入值, 修改指定寄存器的值</li>
</ul>
<p><img src="https://CoderUtil.github.io/images/TIM截图20180326160448.png" alt="汇编"></p>
<h3 id="D"><a href="#D" class="headerlink" title="D"></a>D</h3><ul>
<li><p>d 段地址 : 偏移地址, 查看此物理地址开始的128个内存单元的内容</p>
</li>
<li><p>d 段地址 : 起始偏移地址  结束偏移地址, 查看指定范围的内存单元</p>
</li>
</ul>
<p><img src="https://CoderUtil.github.io/images/TIM截图20180326160918.png" alt="汇编"></p>
<ul>
<li>右边的值表示每个内存单元的值对应的ASCII字符, 若ASCII字符不能显示就用’.’代替</li>
</ul>
<h3 id="E"><a href="#E" class="headerlink" title="E"></a>E</h3><ul>
<li>e 段地址 : 偏移地址  数据  数据  数据  …., 来修改从指定内存开始的内存单元</li>
<li>e 段地址 : 偏移地址  回车。 然后在.后面输入打算替换的数据, 改完后按空格修改下一个, 按回车结束</li>
</ul>
<p><img src="https://CoderUtil.github.io/images/TIM截图20180326162047.png" alt="汇编"></p>
<h3 id="U"><a href="#U" class="headerlink" title="U"></a>U</h3><ul>
<li>u 段地址 : 偏移地址, 产看指定地址开始的汇编指令</li>
</ul>
<p><img src="https://CoderUtil.github.io/images/TIM截图20180326162351.png" alt="汇编"></p>
<h3 id="T"><a href="#T" class="headerlink" title="T"></a>T</h3><ul>
<li>t , 执行CS : IP的指令</li>
</ul>
<h3 id="A"><a href="#A" class="headerlink" title="A"></a>A</h3><ul>
<li>a 段地址 : 偏移地址, 向指定内存地址写入汇编码</li>
</ul>
<p><img src="https://CoderUtil.github.io/images/TIM截图20180326162639.png" alt="汇编"></p>
<h1 id="汇编指令转为机器码"><a href="#汇编指令转为机器码" class="headerlink" title="汇编指令转为机器码"></a>汇编指令转为机器码</h1><p><img src="https://CoderUtil.github.io/images/TIM截图20180327153953.png" alt="汇编"></p>
<ul>
<li>当机器码表示为针对第一个操作数时, d = 1; 若针对第二个操作数, d = 0</li>
</ul>
<ul>
<li>字操作, w = 1; 字节操作, w = 0</li>
</ul>
<ul>
<li>disp表示位移量, 比如mov ax, [si] + 18, 则disp为18</li>
</ul>
<ul>
<li>reg表</li>
</ul>
<p><img src="https://CoderUtil.github.io/images/TIM截图20180327154418.png" alt="汇编"></p>
<ul>
<li>r/m, mod表</li>
</ul>
<p>!TIM图片20180326205518.png)</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.jpg"
                alt="Util" />
            
              <p class="site-author-name" itemprop="name">Util</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">32</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">8</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/Util" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:853130236@qq.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                友情链接
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="http://icytown.com/" title="Mega Show's Blog" target="_blank">Mega Show's Blog</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Util</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
